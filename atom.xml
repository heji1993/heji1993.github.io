<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>何机的技术博客</title>
  <subtitle>No pains,no gains</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://heji.website/"/>
  <updated>2018-05-11T08:41:57.386Z</updated>
  <id>http://heji.website/</id>
  
  <author>
    <name>何机</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Java枚举类型</title>
    <link href="http://heji.website/2018/05/11/Java%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B/"/>
    <id>http://heji.website/2018/05/11/Java枚举类型/</id>
    <published>2018-05-11T08:34:19.903Z</published>
    <updated>2018-05-11T08:41:57.386Z</updated>
    
    <content type="html"><![CDATA[<p>枚举类型（Enumerated Type） 很早就出现在编程语言中，它被用来将一组类似的值包含到一种类型当中。而这种枚举类型的名称则会被定义成独一无二的类型描述符，在这一点上和常量的定义相似。不过相比较常量类型，枚举类型可以为申明的变量提供更大的取值范围。</p>
<a id="more"></a>
<p>[TOC]</p>
<h1 id="枚举用法"><a href="#枚举用法" class="headerlink" title="枚举用法"></a>枚举用法</h1><h2 id="example1"><a href="#example1" class="headerlink" title="example1"></a>example1</h2><p><code>TypeEnum.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> TypeEnum &#123;  </div><div class="line">    VIDEO, AUDIO, TEXT, IMAGE  <span class="comment">// 可以把每个元素看做是一个TypeEnum类型的实例</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>Entity.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Entity</span> </span>&#123;  </div><div class="line">      </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;  </div><div class="line">    <span class="keyword">private</span> TypeEnum type;  </div><div class="line">      </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> id;  </div><div class="line">    &#125;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;  </div><div class="line">        <span class="keyword">this</span>.id = id;  </div><div class="line">    &#125;  </div><div class="line">          </div><div class="line">    <span class="function"><span class="keyword">public</span> TypeEnum <span class="title">getType</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> type;  </div><div class="line">    &#125;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setType</span><span class="params">(TypeEnum type)</span> </span>&#123;  </div><div class="line">        <span class="keyword">this</span>.type = type;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在为Entity对象赋值的时候，就可以这样：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Entity e = <span class="keyword">new</span> Entity();  </div><div class="line">e.setId(<span class="number">10</span>);  </div><div class="line">e.setType(TypeEnum.AUDIO);</div></pre></td></tr></table></figure></p>
<h2 id="example2"><a href="#example2" class="headerlink" title="example2"></a>example2</h2><p>如果要为每个枚举值指定属性，则在枚举中必须声明一个参数为属性对应类型的构造方法（不能是public）。否则编译器将给出The constructor TypeEnum(int, String) is undefined的错误。<br><code>TypeEnum.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> TypeEnum &#123;  </div><div class="line">    VIDEO(<span class="number">1</span>, <span class="string">"视频"</span>), AUDIO(<span class="number">2</span>, <span class="string">"音频"</span>), TEXT(<span class="number">3</span>, <span class="string">"文本"</span>), IMAGE(<span class="number">4</span>, <span class="string">"图像"</span>);  </div><div class="line">      </div><div class="line">    <span class="keyword">int</span> value;  </div><div class="line">    String name;  </div><div class="line">      </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">TypeEnum</span><span class="params">(<span class="keyword">int</span> value, String name)</span> </span>&#123;  </div><div class="line">        <span class="keyword">this</span>.value = value;  </div><div class="line">        <span class="keyword">this</span>.name = name;  </div><div class="line">    &#125;  </div><div class="line">      </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> value;  </div><div class="line">    &#125;  </div><div class="line">      </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> name;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">TypeEnum type = TypeEnum.TEXT;//type的value属性值为3，name属性值为文本。  </div><div class="line">System.out.println(type.getValue());//屏幕输出3。</div><div class="line">System.out.println(type.getName());//屏幕输出文本。</div></pre></td></tr></table></figure>
<h2 id="example3"><a href="#example3" class="headerlink" title="example3"></a>example3</h2><p>枚举类型有一个常用的方法<code>static T[] values()</code>，该方法返回该枚举的所有值。<br>现在，假设要为该枚举实现一个根据整数值生成枚举值的方法，可以这样做：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> TypeEnum &#123;  </div><div class="line">    VIDEO(<span class="number">1</span>, <span class="string">"视频"</span>), AUDIO(<span class="number">2</span>, <span class="string">"音频"</span>), TEXT(<span class="number">3</span>, <span class="string">"文本"</span>), IMAGE(<span class="number">4</span>, <span class="string">"图像"</span>);  </div><div class="line">      </div><div class="line">    <span class="keyword">int</span> value;  </div><div class="line">    String name;  </div><div class="line">      </div><div class="line">    TypeEnum(<span class="keyword">int</span> value, String name) &#123;  </div><div class="line">        <span class="keyword">this</span>.value = value;  </div><div class="line">        <span class="keyword">this</span>.name = name;  </div><div class="line">    &#125;  </div><div class="line">      </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> value;  </div><div class="line">    &#125;  </div><div class="line">      </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> name;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TypeEnum <span class="title">getByValue</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;  </div><div class="line">        <span class="keyword">for</span>(TypeEnum typeEnum : TypeEnum.values()) &#123;  </div><div class="line">            <span class="keyword">if</span>(typeEnum.value == value) &#123;  </div><div class="line">                <span class="keyword">return</span> typeEnum;  </div><div class="line">            &#125;  </div><div class="line">        &#125;  </div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No element matches "</span> + value);  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="枚举类说明"><a href="#枚举类说明" class="headerlink" title="枚举类说明"></a>枚举类说明</h1><ul>
<li>在某些情况下，一个类的对象时有限且固定的，如季节类，它只有春夏秋冬4个对象这种实例有限且固定的类，在 Java 中被称为枚举类；</li>
<li>在 Java 中使用 enum 关键字来定义枚举类，其地位与 class、interface 相同；</li>
<li><p>枚举类是一种特殊的类，它和普通的类一样，有自己的成员变量、成员方法、构造器 (只能使用 private 访问修饰符，所以无法从外部调用构造器，构造器只在构造枚举值时被调用)；</p>
</li>
<li><p>使用 enum 定义的枚举类默认继承了 java.lang.Enum 类，并实现了 java.lang.Seriablizable 和 java.lang.Comparable 两个接口;</p>
</li>
<li>所有的枚举值都是 public static final 的，且非抽象的枚举类不能再派生子类；</li>
<li>枚举类的所有实例(枚举值)必须在枚举类的第一行显式地列出，否则这个枚举类将永远不能产生实例。列出这些实例(枚举值)时，系统会自动添加 public static final 修饰，无需程序员显式添加。</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;枚举类型（Enumerated Type） 很早就出现在编程语言中，它被用来将一组类似的值包含到一种类型当中。而这种枚举类型的名称则会被定义成独一无二的类型描述符，在这一点上和常量的定义相似。不过相比较常量类型，枚举类型可以为申明的变量提供更大的取值范围。&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="http://heji.website/categories/Java/"/>
    
    
      <category term="Java" scheme="http://heji.website/tags/Java/"/>
    
      <category term="枚举" scheme="http://heji.website/tags/%E6%9E%9A%E4%B8%BE/"/>
    
  </entry>
  
  <entry>
    <title>RxJava2</title>
    <link href="http://heji.website/2018/03/26/RxJava2%EF%BC%88%E4%B8%8A%EF%BC%89/"/>
    <id>http://heji.website/2018/03/26/RxJava2（上）/</id>
    <published>2018-03-26T09:02:46.856Z</published>
    <updated>2018-03-26T09:09:48.055Z</updated>
    
    <content type="html"><![CDATA[<p>RxJava是使用Java VM的可观察序列编写异步和基于事件的程序的库。</p>
<a id="more"></a>
<p>[TOC]</p>
<h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><h2 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h2><p><img src="https://note.youdao.com/yws/api/personal/file/B1B0E774C7024104B50C61058BDC1B40?method=download&amp;shareKey=0a61c5dd6a2f922174544e3e3ba3d5d3" alt=""></p>
<p>上面一根水管为事件产生的水管，叫它上游吧，下面一根水管为事件接收的水管叫它下游吧。<br>两根水管通过一定的方式连接起来，使得 上游 每产生一个事件，下游 就能收到该事件。 这里的事件发送的顺序是先1,后2,后3这样的顺序, 事件接收的顺序也是先1,后2,后3的顺序。  </p>
<p>这里的 上游 和 下游 就分别对应着 <code>RxJava</code> 中的 <code>Observable</code> 和 <code>Observer</code>，它们之间的连接就对应着 <code>subscribe()</code>，因此这个关系用 RxJava 来表示就是：  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//创建一个上游 Observable：</span></div><div class="line">Observable&lt;Integer&gt; observable = Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;Integer&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        emitter.onNext(<span class="number">1</span>);</div><div class="line">        emitter.onNext(<span class="number">2</span>);</div><div class="line">        emitter.onNext(<span class="number">3</span>);</div><div class="line">        emitter.onComplete();</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">//创建一个下游 Observer</span></div><div class="line">Observer&lt;Integer&gt; observer = <span class="keyword">new</span> Observer&lt;Integer&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSubscribe</span><span class="params">(Disposable d)</span> </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">"subscribe"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Integer value)</span> </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">""</span> + value);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">"error"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span> </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">"complete"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//建立连接</span></div><div class="line">observable.subscribe(observer);</div></pre></td></tr></table></figure>
<p>这个运行的结果就是:  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">subscribe</div><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">complete</div></pre></td></tr></table></figure>
<blockquote>
<p>注意: 只有当上游和下游建立连接之后, 上游才会开始发送事件. 也就是调用了 subscribe() 方法之后才开始发送事件.  </p>
</blockquote>
<p>把这段代码连起来写就成了RxJava引以为傲的链式操作：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;Integer&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        emitter.onNext(<span class="number">1</span>);</div><div class="line">        emitter.onNext(<span class="number">2</span>);</div><div class="line">        emitter.onNext(<span class="number">3</span>);</div><div class="line">        emitter.onComplete();</div><div class="line">    &#125;</div><div class="line">&#125;).subscribe(<span class="keyword">new</span> Observer&lt;Integer&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSubscribe</span><span class="params">(Disposable d)</span> </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">"subscribe"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Integer value)</span> </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">""</span> + value);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">"error"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span> </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">"complete"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><strong>Observable：发射源，英文释义“可观察的”，在观察者模式中称为“被观察者”或“可观察对象”；</strong><br><strong>Observer：接收源，英文释义“观察者”，没错！就是观察者模式中的“观察者”，可接收Observable、Subject发射的数据；</strong></p>
<h2 id="ObservableEmitter和Disposable"><a href="#ObservableEmitter和Disposable" class="headerlink" title="ObservableEmitter和Disposable"></a>ObservableEmitter和Disposable</h2><p>接下来解释一下其中两个陌生的玩意：<code>ObservableEmitter</code> 和 <code>Disposable</code>.  </p>
<h3 id="ObservableEmitter"><a href="#ObservableEmitter" class="headerlink" title="ObservableEmitter"></a>ObservableEmitter</h3><p><strong>ObservableEmitter： Emitter</strong> 是发射器的意思，那就很好猜了，这个就是用来发出事件的，它可以发出三种类型的事件，通过调用 emitter 的<code>onNext(T value)</code>、<code>onComplete()</code>和 <code>onError(Throwable error)</code> 就可以分别发出 <strong>next</strong> 事件、<strong>complete</strong> 事件和 <strong>error</strong> 事件。  </p>
<ul>
<li>上游可以发送无限个<code>onNext</code>, 下游也可以接收无限个<code>onNext</code>.  </li>
<li>当上游发送了一个 <code>onComplete</code> 后, 上游 <code>onComplete</code> 之后的事件将会 继续 发送, 而下游收到<code>onComplete</code>事件之后将不再继续接收事件.  </li>
<li>当上游发送了一个<code>onError</code>后, 上游<code>onError</code>之后的事件将继续发送, 而下游收到<code>onError</code>事件之后将不再继续接收事件.  </li>
<li>上游可以不发送onComplete或onError.  </li>
<li>最为关键的是onComplete和onError<strong>必须唯一并且互斥</strong>, 即不能发多个onComplete, 也不能发多个onError, 也不能先发一个onComplete, 然后再发一个onError, 反之亦然.  </li>
</ul>
<blockquote>
<p>注: 关于onComplete和onError唯一并且互斥这一点, 是需要自行在代码中进行控制, 如果你的代码逻辑中违背了这个规则, 并不一定会导致程序崩溃. 比如发送多个onComplete是可以正常运行的, 依然是收到第一个onComplete就不再接收了, 但若是发送多个onError, 则收到第二个onError事件会导致程序会崩溃.</p>
</blockquote>
<p>以上几个规则用示意图表示如下：</p>
<table>
<thead>
<tr>
<th>例子</th>
<th>示意图</th>
</tr>
</thead>
<tbody>
<tr>
<td>只发送<code>onNext</code>事件</td>
<td><img src="https://note.youdao.com/yws/api/personal/file/24F6A385FE7C40569188FCFD9539B8AF?method=download&amp;shareKey=ac9b73ba15449e1d492a2ea77abb6db9" alt=""></td>
</tr>
<tr>
<td>发送<code>onComplete</code>事件</td>
<td><img src="https://note.youdao.com/yws/api/personal/file/244BFDCB935B4CF989447D7E459FDAB8?method=download&amp;shareKey=ba287fbac64a5f14eb1e227f6ec64b36" alt=""></td>
</tr>
<tr>
<td>发送<code>onError</code>事件</td>
<td><img src="https://note.youdao.com/yws/api/personal/file/E8AAF3E3A3AB4D0A883A28F5DFAE07B4?method=download&amp;shareKey=53d6aa2a4330043b4f3004f00ecf05a6" alt=""></td>
</tr>
</tbody>
</table>
<h3 id="Disposable"><a href="#Disposable" class="headerlink" title="Disposable"></a>Disposable</h3><p>介绍了ObservableEmitter, 接下来介绍Disposable, 这个单词的字面意思是一次性用品,用完即可丢弃的. 那么在RxJava中怎么去理解它呢, 对应于上面的水管的例子, 我们可以把它理解成两根管道之间的一个机关, 当调用它的dispose()方法时, 它就会将两根管道切断, 从而导致下游收不到事件.  </p>
<blockquote>
<p>注意: 调用dispose()并不会导致上游不再继续发送事件, 上游会继续发送剩余的事件.  </p>
</blockquote>
<p>来看个例子, 我们让上游依次发送1,2,3,complete,4,在下游收到第二个事件之后, 切断水管, 看看运行结果:  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;Integer&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">"emit 1"</span>);</div><div class="line">        emitter.onNext(<span class="number">1</span>);</div><div class="line">        Log.d(TAG, <span class="string">"emit 2"</span>);</div><div class="line">        emitter.onNext(<span class="number">2</span>);</div><div class="line">        Log.d(TAG, <span class="string">"emit 3"</span>);</div><div class="line">        emitter.onNext(<span class="number">3</span>);</div><div class="line">        Log.d(TAG, <span class="string">"emit complete"</span>);</div><div class="line">        emitter.onComplete();</div><div class="line">        Log.d(TAG, <span class="string">"emit 4"</span>);</div><div class="line">        emitter.onNext(<span class="number">4</span>);</div><div class="line">    &#125;</div><div class="line">&#125;).subscribe(<span class="keyword">new</span> Observer&lt;Integer&gt;() &#123;</div><div class="line">    <span class="keyword">private</span> Disposable mDisposable;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> i;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSubscribe</span><span class="params">(Disposable d)</span> </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">"subscribe"</span>);</div><div class="line">        mDisposable = d;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Integer value)</span> </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">"onNext: "</span> + value);</div><div class="line">        i++;</div><div class="line">        <span class="keyword">if</span> (i == <span class="number">2</span>) &#123;</div><div class="line">            Log.d(TAG, <span class="string">"dispose"</span>);</div><div class="line">            mDisposable.dispose();</div><div class="line">            Log.d(TAG, <span class="string">"isDisposed : "</span> + mDisposable.isDisposed());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">"error"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span> </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">"complete"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">```  </div><div class="line">运行结果为：  </div><div class="line">```bash</div><div class="line">subscribe</div><div class="line">emit <span class="number">1</span></div><div class="line">onNext: <span class="number">1</span></div><div class="line">emit <span class="number">2</span></div><div class="line">onNext: <span class="number">2</span></div><div class="line">dispose</div><div class="line">isDisposed : <span class="keyword">true</span></div><div class="line">emit <span class="number">3</span></div><div class="line">emit complete</div><div class="line">emit <span class="number">4</span></div></pre></td></tr></table></figure>
<p>从运行结果我们看到, 在收到onNext 2这个事件后, 切断了水管, 下游不再接受事件，但是上游仍然发送了3, complete, 4这几个事件. 同时可以看到下游的onSubscribe()方法是最先调用的.  </p>
<h1 id="subscribe"><a href="#subscribe" class="headerlink" title="subscribe"></a>subscribe</h1><p>另外，Observable的<code>subscribe</code>方法有多个重载：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Disposable <span class="title">subscribe</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Disposable <span class="title">subscribe</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; onNext)</span> </span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Disposable <span class="title">subscribe</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; onNext, Consumer&lt;? <span class="keyword">super</span> Throwable&gt; onError)</span> </span>&#123;&#125; </div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Disposable <span class="title">subscribe</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; onNext, Consumer&lt;? <span class="keyword">super</span> Throwable&gt; onError, Action onComplete)</span> </span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Disposable <span class="title">subscribe</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; onNext, Consumer&lt;? <span class="keyword">super</span> Throwable&gt; onError, Action onComplete, Consumer&lt;? <span class="keyword">super</span> Disposable&gt; onSubscribe)</span> </span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(Observer&lt;? <span class="keyword">super</span> T&gt; observer)</span> </span>&#123;&#125;</div></pre></td></tr></table></figure></p>
<p>最后一个带有Observer参数的我们已经使用过了,这里对其他几个方法进行说明：  </p>
<ul>
<li>不带任何参数的subscribe() 表示下游不关心任何事件,你上游尽管发你的数据去吧, 老子可不管你发什么.  </li>
<li><p>带有一个Consumer参数的方法表示下游只关心onNext事件, 其他的事件我假装没看见, 因此我们如果只需要onNext事件可以这么写:  </p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;Integer&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">"emit 1"</span>);</div><div class="line">        emitter.onNext(<span class="number">1</span>);</div><div class="line">        Log.d(TAG, <span class="string">"emit 2"</span>);</div><div class="line">        emitter.onNext(<span class="number">2</span>);</div><div class="line">        Log.d(TAG, <span class="string">"emit 3"</span>);</div><div class="line">        emitter.onNext(<span class="number">3</span>);</div><div class="line">        Log.d(TAG, <span class="string">"emit complete"</span>);</div><div class="line">        emitter.onComplete();</div><div class="line">        Log.d(TAG, <span class="string">"emit 4"</span>);</div><div class="line">        emitter.onNext(<span class="number">4</span>);</div><div class="line">    &#125;</div><div class="line">&#125;).subscribe(<span class="keyword">new</span> Consumer&lt;Integer&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Integer integer)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        Log.d(TAG, <span class="string">"onNext: "</span> + integer);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>其他几个方法同理, 这里就不一一解释了.</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;RxJava是使用Java VM的可观察序列编写异步和基于事件的程序的库。&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="http://heji.website/categories/Java/"/>
    
    
      <category term="Java" scheme="http://heji.website/tags/Java/"/>
    
      <category term="异步事件" scheme="http://heji.website/tags/%E5%BC%82%E6%AD%A5%E4%BA%8B%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>webpack2常用配置</title>
    <link href="http://heji.website/2017/07/04/webpack2%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/"/>
    <id>http://heji.website/2017/07/04/webpack2常用配置/</id>
    <published>2017-07-04T08:06:19.746Z</published>
    <updated>2017-07-04T08:09:20.317Z</updated>
    
    <content type="html"><![CDATA[<p>在使用webpack2之后，发现配置方式与webpack1相比变化挺大的。这里记录一下。<br><a id="more"></a></p>
<p>下面是webpack2的一些配置文件（代码仅供参考，按实际需要修改）。</p>
<h3 id="webpack-config-js"><a href="#webpack-config-js" class="headerlink" title="webpack.config.js"></a>webpack.config.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</div><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</div><div class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</div><div class="line"><span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</div><div class="line"><span class="keyword">var</span> CleanWebpackPlugin = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>);</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  entry: <span class="string">'./src/main.js'</span>, <span class="comment">//入口文件</span></div><div class="line">  <span class="comment">//使用build命令生成的任何资源都会放到dist目录</span></div><div class="line">  output: &#123;</div><div class="line">    path: path.resolve(__dirname, <span class="string">'./dist'</span>), <span class="comment">//“__dirname”是node.js中的一个全局变量，它指向当前执行脚本所在的目录。</span></div><div class="line">    filename: <span class="string">'[name].[hash:7].js'</span> <span class="comment">//保证内容改变，名称相应改变,目的在于缓存</span></div><div class="line">  &#125;,</div><div class="line">  <span class="built_in">module</span>: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: <span class="regexp">/\.vue$/</span>,</div><div class="line">        use: <span class="string">'vue-loader'</span>, <span class="comment">//webpack2以后推荐使用use</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="comment">//babel的配置，webpack默认会读取./babelrc文件的配置作为babel的配置</span></div><div class="line">        test: <span class="regexp">/\.js$/</span>,</div><div class="line">        use: <span class="string">'babel-loader'</span>,</div><div class="line">        exclude: <span class="regexp">/node_modules/</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="comment">//在js中import导入css，postcss允许对css进行解析，结合autoprefixer能给css样式添加厂商前缀</span></div><div class="line">        <span class="comment">//webpack默认会读取postcss.config.js文件作为配置文件</span></div><div class="line">        test: <span class="regexp">/\.css$/</span>,</div><div class="line">        use: ExtractTextPlugin.extract(&#123;</div><div class="line">          fallback: <span class="string">'style-loader'</span>,</div><div class="line">          use: [<span class="string">'css-loader'</span>,<span class="string">'postcss-loader'</span>]</div><div class="line">        &#125;)</div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="comment">//在js中import导入图片资源，当图片小于8k时，直接以base64的形式内联在代码，否则会拷贝到输出目录</span></div><div class="line">        test: <span class="regexp">/\.(png|jpg|gif|svg)$/</span>,</div><div class="line">        use: &#123;</div><div class="line">          loader:<span class="string">'url-loader'</span>,</div><div class="line">          options:&#123;</div><div class="line">            limit: <span class="number">8192</span>,</div><div class="line">            name:<span class="string">'imgs/[name].[hash:7].[ext]'</span></div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">//webpack-dev-server的相关配置</span></div><div class="line">  devServer: &#123;</div><div class="line">    historyApiFallback: <span class="literal">true</span>,</div><div class="line">    noInfo: <span class="literal">true</span></div><div class="line">  &#125;,</div><div class="line">  devtool: <span class="string">'eval-source-map'</span>,<span class="comment">//生成source maps，方便调试</span></div><div class="line">  plugins: [</div><div class="line">    <span class="comment">//在js中生成版权声明注释</span></div><div class="line">    <span class="keyword">new</span> webpack.BannerPlugin(<span class="string">"Copyright hejiv5."</span>),</div><div class="line">    <span class="comment">//这个插件的作用是依据一个简单的模板，帮你生成最终的Html5文件，这个文件中自动引用了你打包后的JS文件。每次编译都在文件名中插入一个不同的哈希值。也就是说不需要在index.html中手动引入js啦</span></div><div class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</div><div class="line">      template: <span class="string">"./index.html"</span>,<span class="comment">//生成网页名的依据</span></div><div class="line">      filename:<span class="string">'index.html'</span>  <span class="comment">//在内存中生成的网页名</span></div><div class="line">    &#125;),</div><div class="line">    <span class="comment">//这个插件帮你把js中导入的样式抽成单独的文件style.css</span></div><div class="line">    <span class="keyword">new</span> ExtractTextPlugin(<span class="string">"css/styles.css"</span>),</div><div class="line">    <span class="comment">//这个插件打包之前能删除dist目录</span></div><div class="line">    <span class="keyword">new</span> CleanWebpackPlugin([<span class="string">'dist'</span>],&#123;</div><div class="line">        root: __dirname,       　　　　　　　　　　<span class="comment">//根目录</span></div><div class="line">        verbose:  <span class="literal">true</span>,        　　　　　　　　　　<span class="comment">//开启在控制台输出信息</span></div><div class="line">        dry:      <span class="literal">false</span>        　　　　　　　　　　<span class="comment">//启用删除文件</span></div><div class="line">    &#125;)</div><div class="line">  ]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//生产环境的配置</span></div><div class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</div><div class="line">  <span class="comment">//不生成source-map</span></div><div class="line">  <span class="keyword">delete</span> <span class="built_in">module</span>.exports.devtool</div><div class="line">  <span class="built_in">module</span>.exports.plugins = (<span class="built_in">module</span>.exports.plugins || []).concat([</div><div class="line">    <span class="comment">//压缩JS代码的插件</span></div><div class="line">    <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</div><div class="line">      sourceMap: <span class="literal">true</span>,</div><div class="line">      compress: &#123;</div><div class="line">        warnings: <span class="literal">false</span></div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line">  ])</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="postcss-config-js"><a href="#postcss-config-js" class="headerlink" title="postcss.config.js"></a>postcss.config.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  plugins: [</div><div class="line">    <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="package-json部分代码："><a href="#package-json部分代码：" class="headerlink" title="package.json部分代码："></a>package.json部分代码：</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"> "scripts": &#123;</div><div class="line">    "dev": "cross-env NODE_ENV=development webpack-dev-server --open --hot",</div><div class="line">    "build": "cross-env NODE_ENV=production webpack --progress --hide-modules"</div><div class="line">  &#125;,</div><div class="line">  "dependencies": &#123;</div><div class="line">    "animate.css": "^3.5.2",</div><div class="line">    "mint-ui": "^2.2.7",</div><div class="line">    "vue": "^2.3.3",</div><div class="line">    "vue-router": "^2.7.0"</div><div class="line">  &#125;,</div><div class="line">  "devDependencies": &#123;</div><div class="line">    "autoprefixer": "^7.1.1",</div><div class="line">    "babel-core": "^6.0.0",</div><div class="line">    "babel-loader": "^6.0.0",</div><div class="line">    "babel-preset-env": "^1.5.1",</div><div class="line">    "clean-webpack-plugin": "^0.1.16",</div><div class="line">    "cross-env": "^3.0.0",</div><div class="line">    "css-loader": "^0.25.0",</div><div class="line">    "extract-text-webpack-plugin": "^2.1.2",</div><div class="line">    "file-loader": "^0.9.0",</div><div class="line">    "html-webpack-plugin": "^2.29.0",</div><div class="line">    "postcss-loader": "^2.0.6",</div><div class="line">    "style-loader": "^0.18.2",</div><div class="line">    "stylus": "^0.54.5",</div><div class="line">    "stylus-loader": "^3.0.1",</div><div class="line">    "url-loader": "^0.5.9",</div><div class="line">    "vue-loader": "^12.1.0",</div><div class="line">    "vue-template-compiler": "^2.3.3",</div><div class="line">    "webpack": "^2.6.1",</div><div class="line">    "webpack-dev-server": "^2.4.5"</div><div class="line">  &#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在使用webpack2之后，发现配置方式与webpack1相比变化挺大的。这里记录一下。&lt;br&gt;
    
    </summary>
    
      <category term="工具" scheme="http://heji.website/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="webpack" scheme="http://heji.website/tags/webpack/"/>
    
      <category term="构建工具" scheme="http://heji.website/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>微信公众号开发流程</title>
    <link href="http://heji.website/2017/06/20/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/"/>
    <id>http://heji.website/2017/06/20/微信公众号开发流程/</id>
    <published>2017-06-20T09:37:32.254Z</published>
    <updated>2017-06-20T09:51:58.422Z</updated>
    
    <content type="html"><![CDATA[<p>简要介绍微信公众号的开发流程。</p>
<a id="more"></a>
<h3 id="明确需求"><a href="#明确需求" class="headerlink" title="明确需求"></a>明确需求</h3><p>如果只需要实现简单的自动回复、推送消息、点击菜单跳转到指定消息等简单功能，建议直接使用个人订阅号在微信公众平台上进行配置即可。</p>
<p>如果需要点击菜单跳转到个人开发的页面，实现复杂的交互行为，那么需要认证过的公众号（个人类型的订阅号不能认证）。</p>
<p>另外，微信支付、网页授权等接口需要服务号才有权限调用。所以，建议直接申请服务号进行开发。</p>
<h3 id="申请、认证公众号"><a href="#申请、认证公众号" class="headerlink" title="申请、认证公众号"></a>申请、认证公众号</h3><p>公众号申请完之后需要认证，认证需要审核，审核需要软妹纸300，审核不通过钱不退。</p>
<h3 id="服务器租赁"><a href="#服务器租赁" class="headerlink" title="服务器租赁"></a>服务器租赁</h3><p>推荐使用阿里云服务器，入门型一般三百多一年就有了。</p>
<h3 id="开发公众号页面"><a href="#开发公众号页面" class="headerlink" title="开发公众号页面"></a>开发公众号页面</h3><p>在服务器开发公众号的网页，jsp、html等都可以。部分功能需要调用微信公众号的接口，具体请参考<a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1445241432" title="微信公众平台技术文档" target="_blank" rel="external">微信公众平台技术文档</a></p>
<h3 id="给公众号创建菜单"><a href="#给公众号创建菜单" class="headerlink" title="给公众号创建菜单"></a>给公众号创建菜单</h3><p>有两种方式给公众号创建菜单</p>
<ul>
<li>使用功能-自定义菜单创建菜单，菜单跳转到服务器指定网页即可</li>
<li>使用开发-基本配置-配置自己的服务器，在服务器使用代码调用微信的自定义菜单接口创建菜单，需要注意的是，如果启用了自己的服务器，第一种方式创建的菜单将失效，公众号的自动回复功能也将失效。</li>
</ul>
<p>建议使用第一种方式，简单，成本低，还保留自动回复功能。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;简要介绍微信公众号的开发流程。&lt;/p&gt;
    
    </summary>
    
      <category term="微信公众号" scheme="http://heji.website/categories/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/"/>
    
    
      <category term="微信公众号" scheme="http://heji.website/tags/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/"/>
    
  </entry>
  
  <entry>
    <title>Vue基础</title>
    <link href="http://heji.website/2017/06/19/Vue%E5%9F%BA%E7%A1%80/"/>
    <id>http://heji.website/2017/06/19/Vue基础/</id>
    <published>2017-06-19T03:08:06.567Z</published>
    <updated>2017-07-03T01:21:15.052Z</updated>
    
    <content type="html"><![CDATA[<p>Vue的基本用法。</p>
<a id="more"></a>
<h3 id="MVVM框架"><a href="#MVVM框架" class="headerlink" title="MVVM框架"></a>MVVM框架</h3><p><img src="http://note.youdao.com/yws/api/personal/file/F7978C20776942F8B4B286BAD138C3C9?method=download&amp;shareKey=7887101fdd0857bedbdb283b2bd39480" alt="MVVM框架" title="MVVM框架"></p>
<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ul>
<li>针对具有复杂交互逻辑的前端应用</li>
<li>提供基础的架构抽象</li>
<li>通过Ajax数据持久化，保证前端用户体验（针对这点，MVVM框架的最典型实现是SPA应用）</li>
</ul>
<h4 id="代表框架"><a href="#代表框架" class="headerlink" title="代表框架"></a>代表框架</h4><ul>
<li>Angular</li>
<li>react</li>
<li>vue</li>
</ul>
<h3 id="Vue雏形"><a href="#Vue雏形" class="headerlink" title="Vue雏形"></a>Vue雏形</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">		<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">new</span> Vue(&#123;</div><div class="line">				el:<span class="string">"#box"</span>, <span class="comment">//选择器，支持tagName、.className、#id</span></div><div class="line">				data:&#123;</div><div class="line">					<span class="string">"msg"</span>:<span class="string">"Welcome,vue!"</span></div><div class="line">				&#125;</div><div class="line">			&#125;);</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></div><div class="line">		&#123;&#123;msg&#125;&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>一片html代码配合上json，再new出来一个vue实例就能实现一个vue雏形。</p>
<h3 id="常用的vue指令"><a href="#常用的vue指令" class="headerlink" title="常用的vue指令"></a>常用的vue指令</h3><ul>
<li><p>v-model</p>
<p>  一般用于表单元素，实现双向数据绑定</p>
</li>
<li><p>v-for</p>
<p>  用于遍历对象。<code></code>表示遍历的索引。对于json对象而言，<code></code>表示遍历的key；对于数组而言，<code></code>无意义。另外，还可以用<code>v-for=&quot;(k,v) in fruitsJson&quot;</code>遍历json，此时<code></code>表示key，<code></code>表示value。</p>
</li>
<li><p>v-on</p>
<p>  用于绑定事件。用法：<code>v-on:click=&quot;addFruit(fruitTmp,$event);&quot;</code>。addFruit方法作为配置json的methods属性的属性存在。另外，除了能绑定click事件之外，还能绑定其他常见的事件。如果使用内联语句，语句可以访问一个 <code>$event</code> 属性，表示事件对象。</p>
</li>
<li><p>v-show</p>
<p>  用于显示/隐藏元素。用法：<code>v-show=&quot;true/false</code>。也可以是表达式，取其计算结果。</p>
</li>
<li><p>v-cloak</p>
<p>  这个指令保持在元素上直到关联实例结束编译。和 CSS 规则如 <code>[v-cloak] { display: none }</code> 一起用时，这个指令可以隐藏未编译的 Mustache 标签直到实例准备完毕。</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[v-cloak] &#123;</div><div class="line">  display: none;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-cloak</span>&gt;</span></div><div class="line">  &#123;&#123; message &#125;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>v-text</p>
<p>  等价于双花括号取数据，能防止闪烁。</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">v-text</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 和下面的一样 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>v-html<br>  等价于三花括号内容按普通 HTML 插入，能防止闪烁</li>
</ul>
<p>综合例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">		<span class="selector-tag">ul</span> <span class="selector-tag">li</span>&#123;</div><div class="line">			<span class="attribute">list-style</span>: none;</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">		<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">new</span> Vue(&#123;</div><div class="line">				el:<span class="string">"#box"</span>,</div><div class="line">				data:&#123;</div><div class="line">					<span class="string">"msg"</span>:<span class="string">"Welcome,vue!"</span>,</div><div class="line">					<span class="string">"fruits"</span>:[<span class="string">'apple'</span>,<span class="string">'banana'</span>,<span class="string">'pear'</span>],</div><div class="line">					<span class="string">"fruitsJson"</span>:&#123;</div><div class="line">						<span class="string">"a"</span>:<span class="string">"apple"</span>,</div><div class="line">						<span class="string">"b"</span>:<span class="string">"banana"</span>,</div><div class="line">						<span class="string">"o"</span>:<span class="string">"orange"</span></div><div class="line">					&#125;,</div><div class="line">					<span class="string">"showBox"</span>:<span class="literal">true</span></div><div class="line">				&#125;,</div><div class="line">				methods:&#123;</div><div class="line">					addFruit:<span class="function"><span class="keyword">function</span>(<span class="params">fruit,$event</span>)</span>&#123;</div><div class="line">						<span class="keyword">this</span>.fruits.push(fruit);</div><div class="line">						<span class="built_in">console</span>.log($event.target.tagName);</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;);</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"msg"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">		&#123;&#123;msg&#125;&#125; <span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"fruit in fruits"</span>&gt;</span></div><div class="line">				&#123;&#123;$index&#125;&#125;、&#123;&#123;fruit&#125;&#125;</div><div class="line">			<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">hr</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"fruit in fruitsJson"</span>&gt;</span></div><div class="line">				&#123;&#123;$index&#125;&#125;、&#123;&#123;$key&#125;&#125;-&#123;&#123;fruit&#125;&#125;</div><div class="line">			<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">hr</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(k,v) in fruitsJson"</span>&gt;</span></div><div class="line">				&#123;&#123;$index&#125;&#125;、&#123;&#123;$key&#125;&#125;-&#123;&#123;k&#125;&#125;-&#123;&#123;v&#125;&#125;</div><div class="line">			<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">hr</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"fruitTmp"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">v-on:click</span>=<span class="string">"addFruit(fruitTmp,$event);"</span>&gt;</span>添加水果<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">hr</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">v-on:click</span>=<span class="string">"showBox = !showBox"</span>&gt;</span>点击我方形消失/出现<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"height: 100px;width: 100px;background: #ccc;margin-top: 30px;"</span> <span class="attr">v-show</span>=<span class="string">"showBox"</span>&gt;</span></div><div class="line"></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="bootstrap-vue实现简单增删改查"><a href="#bootstrap-vue实现简单增删改查" class="headerlink" title="bootstrap+vue实现简单增删改查"></a>bootstrap+vue实现简单增删改查</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>简单列表<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-capable"</span> <span class="attr">content</span>=<span class="string">"yes"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-status-bar-style"</span> <span class="attr">content</span>=<span class="string">"black"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"dist/css/bootstrap.min.css"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"dist/js/bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">        <span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">new</span> Vue(&#123;</div><div class="line">                el:<span class="string">'#box'</span>,</div><div class="line">                data:&#123;</div><div class="line">                    myData:[],</div><div class="line">                    username:<span class="string">''</span>,</div><div class="line">                    age:<span class="string">''</span>,</div><div class="line">                    nowIndex:<span class="number">-100</span>,</div><div class="line">                    isUpdate:<span class="literal">false</span></div><div class="line">                &#125;,</div><div class="line">                methods:&#123;</div><div class="line">                    add:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                    	<span class="comment">/*如果是更新*/</span></div><div class="line">                    	<span class="keyword">if</span>(<span class="keyword">this</span>.isUpdate)&#123;</div><div class="line">                    		<span class="keyword">this</span>.myData[<span class="keyword">this</span>.nowIndex].name = <span class="keyword">this</span>.username;</div><div class="line">                    		<span class="keyword">this</span>.myData[<span class="keyword">this</span>.nowIndex].age = <span class="keyword">this</span>.age;</div><div class="line">                    		<span class="keyword">this</span>.isUpdate = <span class="literal">false</span>;</div><div class="line">                    	&#125;<span class="keyword">else</span>&#123;</div><div class="line">                    		<span class="keyword">this</span>.myData.push(&#123;</div><div class="line">	                            name:<span class="keyword">this</span>.username,</div><div class="line">	                            age:<span class="keyword">this</span>.age</div><div class="line">	                        &#125;);</div><div class="line">                    	&#125; </div><div class="line">                        <span class="keyword">this</span>.username=<span class="string">''</span>;</div><div class="line">                        <span class="keyword">this</span>.age=<span class="string">''</span>;</div><div class="line">                        <span class="keyword">this</span>.nowIndex = <span class="number">-100</span>;</div><div class="line">                    &#125;,</div><div class="line">                    deleteMsg:<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">                        <span class="keyword">if</span>(n==<span class="number">-2</span>)&#123;</div><div class="line">                            <span class="keyword">this</span>.myData=[];</div><div class="line">                        &#125;<span class="keyword">else</span>&#123;</div><div class="line">                            <span class="keyword">this</span>.myData.splice(n,<span class="number">1</span>);</div><div class="line">                        &#125;</div><div class="line">                    &#125;,</div><div class="line">                    update:<span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</span>&#123;</div><div class="line">                    	<span class="keyword">this</span>.username = <span class="keyword">this</span>.myData[index].name;</div><div class="line">                    	<span class="keyword">this</span>.age = <span class="keyword">this</span>.myData[index].age;</div><div class="line">                    	<span class="comment">//根据index更新数据</span></div><div class="line">                    	<span class="keyword">this</span>.nowIndex = index;</div><div class="line">                    	<span class="keyword">this</span>.isUpdate = <span class="literal">true</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;;</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">role</span>=<span class="string">"form"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"username"</span>&gt;</span>用户名:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"输入用户名"</span> <span class="attr">v-model</span>=<span class="string">"username"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"age"</span>&gt;</span>年　龄:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"age"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"输入年龄"</span> <span class="attr">v-model</span>=<span class="string">"age"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"添加"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">v-on:click</span>=<span class="string">"add()"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-bordered table-hover"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">caption</span> <span class="attr">class</span>=<span class="string">"h3 text-info"</span>&gt;</span>用户信息表<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"text-danger"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">"text-center"</span>&gt;</span>序号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">"text-center"</span>&gt;</span>名字<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">"text-center"</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">"text-center"</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"text-center"</span> <span class="attr">v-for</span>=<span class="string">"item in myData"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;$index+1&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;item.age&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-sm"</span> <span class="attr">data-toggle</span>=<span class="string">"modal"</span> <span class="attr">data-target</span>=<span class="string">"#layer"</span> <span class="attr">v-on:click</span>=<span class="string">"nowIndex=$index"</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-sm"</span> <span class="attr">v-on:click</span>=<span class="string">"update($index)"</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-show</span>=<span class="string">"myData.length!=0"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"4"</span> <span class="attr">class</span>=<span class="string">"text-right"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger btn-sm"</span> <span class="attr">v-on:click</span>=<span class="string">"nowIndex=-2"</span> <span class="attr">data-toggle</span>=<span class="string">"modal"</span> <span class="attr">data-target</span>=<span class="string">"#layer"</span> &gt;</span>删除全部<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-show</span>=<span class="string">"myData.length==0"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"4"</span> <span class="attr">class</span>=<span class="string">"text-center text-muted"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>暂无数据....<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="comment">&lt;!--模态框 弹出框--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">role</span>=<span class="string">"dialog"</span> <span class="attr">class</span>=<span class="string">"modal fade bs-example-modal-sm"</span> <span class="attr">id</span>=<span class="string">"layer"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-dialog"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-content"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-header"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"close"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">span</span>&gt;</span>&amp;times;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">"modal-title"</span>&gt;</span>确认删除么?<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-body text-right"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-sm"</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span> <span class="attr">class</span>=<span class="string">"btn btn-danger btn-sm"</span> <span class="attr">v-on:click</span>=<span class="string">"deleteMsg(nowIndex)"</span>&gt;</span>确认<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="事件详解"><a href="#事件详解" class="headerlink" title="事件详解"></a>事件详解</h3><ul>
<li>事件简写</li>
</ul>
<p><code>v-on:click=&quot;expression&quot;</code> 可以简写为 <code>@click=&quot;expression&quot;</code></p>
<ul>
<li>事件对象</li>
</ul>
<p>vue绑定的事件有一个隐含的$event参数对象，表示事件对象。下面是综合例子</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">		<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">new</span> Vue(&#123;</div><div class="line">				el:<span class="string">"body"</span>,</div><div class="line">				data:&#123;</div><div class="line"></div><div class="line">				&#125;,</div><div class="line">				methods:&#123;</div><div class="line">					show:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">						<span class="built_in">console</span>.log(e);</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;);</div><div class="line">			<span class="built_in">document</span>.getElementById(<span class="string">"btn1"</span>).addEventListener(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">				<span class="built_in">console</span>.log(e);</div><div class="line">			&#125;)</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">			<span class="built_in">console</span>.log(e);</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> @<span class="attr">click</span>=<span class="string">"show($event);"</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"show(event);"</span>&gt;</span>原生click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"btn1"</span>&gt;</span>原生click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li><p>事件冒泡</p>
<p>  1、使用原生方式阻止冒泡</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">		<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">new</span> Vue(&#123;</div><div class="line">				el:<span class="string">"body"</span>,</div><div class="line">				data:&#123;</div><div class="line"></div><div class="line">				&#125;,</div><div class="line">				methods:&#123;</div><div class="line">					show:<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</div><div class="line">						alert(<span class="number">1</span>);</div><div class="line">						<span class="comment">//阻止冒泡</span></div><div class="line">						<span class="keyword">if</span>(ev.stopPropagation)&#123;</div><div class="line">							ev.stopPropagation();</div><div class="line">						&#125;<span class="keyword">else</span>&#123;</div><div class="line">							ev.cancelBubble = <span class="literal">true</span>;</div><div class="line">						&#125;</div><div class="line">						</div><div class="line">					&#125;,</div><div class="line">					show2:<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</div><div class="line">						alert(<span class="number">2</span>);</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;);</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">"show2($event);"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> @<span class="attr">click</span>=<span class="string">"show($event);"</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>  2、使用vue的方式阻止冒泡</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">		<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">new</span> Vue(&#123;</div><div class="line">				el:<span class="string">"body"</span>,</div><div class="line">				data:&#123;</div><div class="line"></div><div class="line">				&#125;,</div><div class="line">				methods:&#123;</div><div class="line">					show:<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</div><div class="line">						alert(<span class="number">1</span>);</div><div class="line">					&#125;,</div><div class="line">					show2:<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</div><div class="line">						alert(<span class="number">2</span>);</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;);</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">"show2($event);"</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- click.stop阻止冒泡 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> @<span class="attr">click.stop</span>=<span class="string">"show($event);"</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>默认行为</p>
<p>  1、通过操作$event对象使用原生方式阻止</p>
<p>  2、使用vue的方式阻止默认行为<code>@contextmenu.prevent=&quot;show($event);&quot;</code></p>
</li>
<li><p>键盘事件</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">		<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">new</span> Vue(&#123;</div><div class="line">				el:<span class="string">"body"</span>,</div><div class="line">				data:&#123;</div><div class="line"></div><div class="line">				&#125;,</div><div class="line">				methods:&#123;</div><div class="line">					show:<span class="function"><span class="keyword">function</span>(<span class="params">ev,msg</span>)</span>&#123;</div><div class="line">						<span class="comment">/*if(ev.keyCode===13)&#123;</span></div><div class="line">							alert("按回车了");</div><div class="line">						&#125;*/</div><div class="line">						alert(<span class="string">"按下"</span>+msg+<span class="string">"键"</span>);</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;);</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!--keydown是键盘按下事件--&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keydown.13</span>=<span class="string">"show($event,'回车');"</span> <span class="attr">placeholder</span>=<span class="string">"监听回车键"</span> /&gt;</span></div><div class="line">	<span class="comment">&lt;!--keyup是键盘按下手指抬起事件--&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keyup.enter</span>=<span class="string">"show($event,'回车');"</span> <span class="attr">placeholder</span>=<span class="string">"监听回车键"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keydown.up</span>=<span class="string">"show($event,'上');"</span> <span class="attr">placeholder</span>=<span class="string">"上"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keydown.down</span>=<span class="string">"show($event,'下');"</span> <span class="attr">placeholder</span>=<span class="string">"下"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keydown.left</span>=<span class="string">"show($event,'左');"</span> <span class="attr">placeholder</span>=<span class="string">"左"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keydown.right</span>=<span class="string">"show($event,'右');"</span> <span class="attr">placeholder</span>=<span class="string">"右"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="属性绑定"><a href="#属性绑定" class="headerlink" title="属性绑定"></a>属性绑定</h3><p>Vue的属性推荐使用<code>v-bind:&lt;propertyName&gt;=&quot;&quot;</code>的方式绑定，简写形式为<code>:&lt;propertyName&gt;=&quot;&quot;</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">		<span class="selector-class">.red</span>&#123;</div><div class="line">			<span class="attribute">color</span>: red;</div><div class="line">		&#125;</div><div class="line">		<span class="selector-class">.steelblue</span>&#123;</div><div class="line">			<span class="attribute">background-color</span>: steelblue;</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">		<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">new</span> Vue(&#123;</div><div class="line">				el:<span class="string">"body"</span>,</div><div class="line">				data:&#123;</div><div class="line">					src:<span class="string">"https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png"</span>,</div><div class="line">					useRed:<span class="literal">true</span>,</div><div class="line">					useSteelblue:<span class="literal">false</span>,</div><div class="line">					style:&#123;</div><div class="line">						<span class="string">'color'</span>:<span class="string">'blue'</span>,</div><div class="line">						<span class="string">'background-color'</span>:<span class="string">'grey'</span></div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;);</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!--效果能实现,不推荐使用,控制台会警告--&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123;src&#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!--vue绑定属性的方式--&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:src</span>=<span class="string">"src"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!--绑定属性的简写--&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">"src"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!--vue对于class属性的处理与angular类似,key表示类名,value表示十分实用类--&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">hr</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">strong</span> <span class="attr">:class</span>=<span class="string">"&#123;'red':useRed,'steelblue':useSteelblue&#125;"</span>&gt;</span>哈哈哈哈哈<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">hr</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">strong</span> <span class="attr">:style</span>=<span class="string">"style"</span>&gt;</span>嘿嘿嘿嘿黑<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h3><p>与angular类似，Vue也使用双花括号把数据模型绑定到视图。如果想绑定一次，绑定的变量前加<code>*</code>，如果希望内容按普通 HTML 插入，使用三花括号，注意，三花括号的方式在vue2.0之后被移除。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">		<span class="selector-class">.red</span>&#123;</div><div class="line">			<span class="attribute">color</span>: red;</div><div class="line">		&#125;</div><div class="line">		<span class="selector-class">.steelblue</span>&#123;</div><div class="line">			<span class="attribute">background-color</span>: steelblue;</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">		<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">new</span> Vue(&#123;</div><div class="line">				el:<span class="string">"body"</span>,</div><div class="line">				data:&#123;</div><div class="line">					msg:<span class="string">"测试模板"</span></div><div class="line">				&#125;</div><div class="line">			&#125;);</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"msg"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">hr</span>/&gt;</span></div><div class="line">	<span class="comment">&lt;!--把msg的元素原样输出--&gt;</span></div><div class="line">	&#123;&#123;msg&#125;&#125;</div><div class="line">	<span class="tag">&lt;<span class="name">hr</span>/&gt;</span></div><div class="line">	<span class="comment">&lt;!--数据只绑定一次，后续模型的修改不会反映到视图--&gt;</span></div><div class="line">	&#123;&#123;*msg&#125;&#125;</div><div class="line">	<span class="tag">&lt;<span class="name">hr</span>/&gt;</span></div><div class="line">	<span class="comment">&lt;!--能把msg数据中的html元素转义输出--&gt;</span></div><div class="line">	&#123;&#123;&#123;msg&#125;&#125;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="内置过滤器"><a href="#内置过滤器" class="headerlink" title="内置过滤器"></a>内置过滤器</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">		<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">new</span> Vue(&#123;</div><div class="line">				el:<span class="string">"body"</span>,</div><div class="line">				data:&#123;</div><div class="line">					msg:<span class="string">"测试模板"</span></div><div class="line">				&#125;</div><div class="line">			&#125;);</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	&#123;&#123;'welcome' | uppercase&#125;&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">	<span class="comment">&lt;!--多个过滤器--&gt;</span></div><div class="line">	&#123;&#123;'welcoMe' | uppercase | lowercase&#125;&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">	<span class="comment">&lt;!--首字母大写--&gt;</span></div><div class="line">	&#123;&#123;'welcoMe' | capitalize &#125;&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">	<span class="comment">&lt;!--货币,使用空格加参数--&gt;</span></div><div class="line">	&#123;&#123;22 | currency '¥' &#125;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="与后台交互"><a href="#与后台交互" class="headerlink" title="与后台交互"></a>与后台交互</h3><p>Vue本身没有类似于angular的$http服务，需要引入额外的<code>vue-resource</code>组件。下面是vue-resource的例子，以百度搜索为例。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue-resource.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">		<span class="selector-class">.grey</span>&#123;</div><div class="line">			<span class="attribute">background-color</span>: <span class="number">#bbb</span>;</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">		<span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">new</span> Vue(&#123;</div><div class="line">				el:<span class="string">"body"</span>,</div><div class="line">				data:&#123;</div><div class="line">					wd:<span class="string">""</span>,</div><div class="line">					myData:[],</div><div class="line">					nowIndex : <span class="number">-1</span></div><div class="line">				&#125;,</div><div class="line">				methods:&#123;</div><div class="line">					getTxt:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">						<span class="keyword">this</span>.$http.get(<span class="string">"test.txt"</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</div><div class="line">							alert(<span class="string">"获取数据成功:"</span>+res.data);</div><div class="line">						&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</div><div class="line">							<span class="built_in">console</span>.log(error);</div><div class="line">						&#125;)</div><div class="line">					&#125;,</div><div class="line">					postData:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">						<span class="comment">// POST /someUrl</span></div><div class="line">						<span class="keyword">this</span>.$http.post(<span class="string">'/someUrl'</span>, &#123;foo: <span class="string">'bar'</span>&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</div><div class="line">						   	<span class="comment">// get status</span></div><div class="line">						    response.status;</div><div class="line">						    <span class="comment">// get status text</span></div><div class="line">						    response.statusText;</div><div class="line">						    <span class="comment">// get 'Expires' header</span></div><div class="line">						    response.headers.get(<span class="string">'Expires'</span>);</div><div class="line">						    <span class="comment">// get body data</span></div><div class="line">						    <span class="keyword">this</span>.someData = response.body;</div><div class="line">						&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</div><div class="line"></div><div class="line">						&#125;);</div><div class="line">					&#125;,</div><div class="line">					jsonpData:<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</div><div class="line">						<span class="comment">//搜索</span></div><div class="line">						<span class="keyword">if</span>(ev.keyCode===<span class="number">13</span>)&#123;</div><div class="line">							<span class="built_in">window</span>.open(<span class="string">"https://www.baidu.com/s?wd="</span>+<span class="keyword">this</span>.wd);</div><div class="line">							<span class="keyword">return</span>;</div><div class="line">						&#125;</div><div class="line">						<span class="comment">//上下键不检索</span></div><div class="line">						<span class="keyword">if</span>(ev.keyCode===<span class="number">38</span> || ev.keyCode===<span class="number">40</span>)&#123;</div><div class="line">							<span class="keyword">return</span>;</div><div class="line">						&#125;</div><div class="line">						<span class="comment">//涉及到跨域</span></div><div class="line">						<span class="keyword">this</span>.$http.jsonp(<span class="string">"https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su"</span>,&#123;</div><div class="line">							params: &#123;</div><div class="line">					          	wd:<span class="keyword">this</span>.wd</div><div class="line">					        &#125;,</div><div class="line">					        jsonp:<span class="string">'cb'</span></div><div class="line">						&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</div><div class="line">							res = <span class="built_in">JSON</span>.parse(res.bodyText);</div><div class="line">							<span class="keyword">this</span>.myData = res.s;</div><div class="line">						&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</div><div class="line">							<span class="built_in">console</span>.log(error);</div><div class="line">						&#125;);</div><div class="line">					&#125;,</div><div class="line">					changeDown:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">						<span class="keyword">this</span>.nowIndex++;</div><div class="line">						<span class="keyword">if</span>(<span class="keyword">this</span>.nowIndex===<span class="keyword">this</span>.myData.length)&#123;</div><div class="line">							<span class="keyword">this</span>.nowIndex = <span class="number">-1</span>;</div><div class="line">						&#125;</div><div class="line">						<span class="keyword">this</span>.wd = <span class="keyword">this</span>.myData[<span class="keyword">this</span>.nowIndex];</div><div class="line">					&#125;,</div><div class="line">					changeUp:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">						<span class="keyword">this</span>.nowIndex--;</div><div class="line">						<span class="keyword">if</span>(<span class="keyword">this</span>.nowIndex===<span class="number">-2</span>)&#123;</div><div class="line">							<span class="keyword">this</span>.nowIndex = <span class="keyword">this</span>.myData.length - <span class="number">1</span>;</div><div class="line">						&#125;</div><div class="line">						<span class="keyword">this</span>.wd = <span class="keyword">this</span>.myData[<span class="keyword">this</span>.nowIndex];</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;);</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> @<span class="attr">click</span>=<span class="string">"getTxt();"</span>&gt;</span>获取文本数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> @<span class="attr">click</span>=<span class="string">"postData();"</span>&gt;</span>发送数据到后台<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">hr</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"百度搜索"</span> <span class="attr">v-model</span>=<span class="string">"wd"</span> @<span class="attr">keyup</span>=<span class="string">"jsonpData($event);"</span> @<span class="attr">keydown.down</span>=<span class="string">"changeDown();"</span> @<span class="attr">keydown.up.prevent</span>=<span class="string">"changeUp();"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"value in myData"</span> <span class="attr">:class</span>=<span class="string">"&#123;'grey':$index===nowIndex&#125;"</span>&gt;</span></div><div class="line">			&#123;&#123;value&#125;&#125;</div><div class="line">		<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">"myData.length==0"</span>&gt;</span>没有数据<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>注意：除非特殊说明，后续使用的vue版本都是1.0.28，路由版本都是0.7.13。后面会介绍vue2.x</strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Vue的基本用法。&lt;/p&gt;
    
    </summary>
    
      <category term="Vue" scheme="http://heji.website/categories/Vue/"/>
    
    
      <category term="Vue" scheme="http://heji.website/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>jsonp的实现原理</title>
    <link href="http://heji.website/2017/06/15/jsonp%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/"/>
    <id>http://heji.website/2017/06/15/jsonp的实现原理/</id>
    <published>2017-06-15T10:15:20.785Z</published>
    <updated>2017-06-15T10:26:53.519Z</updated>
    
    <content type="html"><![CDATA[<p>每次使用jsonp时都会忍不住感叹作者巧妙的设计思路。</p>
<a id="more"></a>
<ul>
<li><p>jsonp原理</p>
<p>  在同源策略下，在某个服务器下的页面是无法获取到该服务器以外的数据的，但img、iframe、script等标签是个例外，这些标签可以通过src属性请求到其他服务器上的数据。<br>而JSONP就是通过script节点src调用跨域的请求。<br>当我们通过JSONP模式请求跨域资源时，服务器返回给客户端一段javascript代码，这段javascript代码自动调用客户端回调函数。</p>
</li>
<li><p>例子</p>
<p>  客户端<code>http://localhost:8080</code>访问服务器<code>http://localhost:9090/test</code>，正常情况下，这是不允许的。因为这两个URL是不同域的。</p>
<p>  若我们使用JSONP格式发送请求的话？<code>http://localhost:9090/test/testjsonp.do?cb=jsonpCallback&amp;a=12&amp;b=3</code></p>
<p>  则服务器返回的数据如下：</p>
<p>  <code>jsonpCallback(15)</code></p>
<p>  仔细看看服务器返回的数据，其实就是一段javascript代码，这就是函数名（参数）格式。</p>
<p>  服务器返回数据后，浏览器执行jsonpCallback函数。</p>
<p>  因此，客户端需要jsonpCallback函数。</p>
<p>  <strong>注意：其中url地址中的cb和jsonpCallback是随意命名的</strong></p>
</li>
<li><p>代码实现</p>
<p>  js代码：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> url = <span class="string">"http://localhost:9090/test/testjsonp.do?cb=jsonpCallback&amp;a=12&amp;b=3"</span>;   </div><div class="line"><span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);   </div><div class="line">script.setAttribute(<span class="string">'src'</span>, url);  <span class="comment">//load javascript    </span></div><div class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].appendChild(script);   </div><div class="line">      </div><div class="line"><span class="comment">//回调函数  </span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonpCallback</span>(<span class="params">data</span>)</span>&#123;  </div><div class="line">    alert(data);  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>  服务器代码Java为例：</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">   Integer a = Integer.parseInt(request.getParameter(<span class="string">"a"</span>));</div><div class="line">Integer b = Integer.parseInt(request.getParameter(<span class="string">"b"</span>));</div><div class="line">String jsonp=request.getParameter(<span class="string">"cb"</span>);  </div><div class="line">   response.getWriter().println(jsonp+<span class="string">"("</span>+(a+b)+<span class="string">")"</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>jQuery的jsonp</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$.ajax(&#123;</div><div class="line">    url: <span class="string">'http://localhost:9090/test/testjsonp.do'</span>, <span class="comment">//不同的域</span></div><div class="line">    type: <span class="string">'GET'</span>, <span class="comment">// jsonp模式只有GET 是合法的</span></div><div class="line">    data: &#123;</div><div class="line">        <span class="string">'a'</span>: <span class="number">12</span>,</div><div class="line">        <span class="string">'b'</span>: <span class="number">3</span></div><div class="line">    &#125;,</div><div class="line">    dataType: <span class="string">'jsonp'</span>, <span class="comment">// 数据类型</span></div><div class="line">    jsonp: <span class="string">'cb'</span>, <span class="comment">// 指定回调函数名，与服务器端接收的一致，并回传回来</span></div><div class="line">    success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line"> 	alert(data);</div><div class="line"> &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
</ul>
<pre><code>其实jquery 内部会转化成`http://localhost:9090/test/testjsonp.do?cb=jQuery2030038573939353227615_1402643146875&amp;a=12&amp;b=3`

然后动态加载`&lt;script type=&quot;text/javascript&quot;src=&quot;http://localhost:9090/test/testjsonp.do?cb=jQuery2030038573939353227615_1402643146875&amp;a=12&amp;b=3&quot;&gt;&lt;/script&gt;`

然后后端就会返回`jQuery2030038573939353227615_1402643146875(传递参数 )`。

在这个过程，jQuery自动帮你生成jQuery2030038573939353227615_1402643146875回调函数并把数据取出来供success属性方法来调用。执行完毕后就 `&lt;script&gt;`会被移除
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;每次使用jsonp时都会忍不住感叹作者巧妙的设计思路。&lt;/p&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://heji.website/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://heji.website/tags/JavaScript/"/>
    
      <category term="web前端" scheme="http://heji.website/tags/web%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>sublime3使用指南</title>
    <link href="http://heji.website/2017/06/08/sublime3%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"/>
    <id>http://heji.website/2017/06/08/sublime3使用指南/</id>
    <published>2017-06-08T06:37:38.695Z</published>
    <updated>2017-07-03T01:16:59.676Z</updated>
    
    <content type="html"><![CDATA[<p>正所谓 工欲善其事，必先利其器。牢记一些前端开发工具的使用技巧能大大提高我们的效率。</p>
<a id="more"></a>
<h3 id="插件备份"><a href="#插件备份" class="headerlink" title="插件备份"></a>插件备份</h3><p>优雅使用Sublime Text，插件则是不可缺少的存在；而插件的备份就显得非常的重要（譬如：各平台同步；更换系统/电脑，迅速使用已安装的插件）。这事儿也很简单，只需将<code>Packages</code>（Preferences &gt; Browse Packages）中内容拷贝一份，同步云端即可；至于存储何处，云盘，Github，皆无不可；譬如先前有存一份于sublime_packages，每有所需只要 Down 下来，替换掉原<code>Packages</code>下内容就好。</p>
<h3 id="插件安装"><a href="#插件安装" class="headerlink" title="插件安装"></a>插件安装</h3><ul>
<li><p>插件安装方式一：直接安装：</p>
<blockquote>
<p>安装Sublime text 3插件很方便，可以直接下载安装包解压缩到Packages目录（菜单-&gt;preferences-&gt;packages）。</p>
</blockquote>
</li>
<li><p>插件安装方式二：使用Package Control组件安装：</p>
<blockquote>
<p>按 Ctrl+` 调出console（注：安装有QQ输入法的这个快捷键会有冲突的，输入法属性设置-输入法管理-取消热键切换至QQ拼音）粘贴以下代码到底部命令行并回车：</p>
</blockquote>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> urllib.request,os,hashlib; h = <span class="string">'df21e130d211cfc94d9b0905775a7c0f'</span> + <span class="string">'1e3d39e33b79698005270310898eea76'</span>; pf = <span class="string">'Package Control.sublime-package'</span>; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( <span class="string">'http://packagecontrol.io/'</span> + pf.replace(<span class="string">' '</span>, <span class="string">'%20'</span>)).read(); dh = hashlib.sha256(by).hexdigest(); print(<span class="string">'Error validating download (got %s instead of %s), please try manual install'</span> % (dh, h)) <span class="keyword">if</span> dh != h <span class="keyword">else</span> open(os.path.join( ipp, pf), <span class="string">'wb'</span> ).write(by)</div></pre></td></tr></table></figure>
</li>
</ul>
<pre><code>重启Sublime Text 3。如果在Perferences-&gt;package settings中看到package control这一项，则安装成功。按下Ctrl+Shift+P调出命令面板输入install 调出 Install Package 选项并回车，然后在列表中选中要安装的插件。
</code></pre><h3 id="常用插件"><a href="#常用插件" class="headerlink" title="常用插件"></a>常用插件</h3><ul>
<li><p><a href="https://sublime.wbond.net/packages/Emmet" title="Emmet" target="_blank" rel="external">Emmet</a></p>
<p>  前端开发必备，Write less , show more，使用Tab键触发。安装Emmet后，可以输入少量代码后按Tab键，系统会自动补全代码。</p>
</li>
<li><p>SublimeCodeIntel</p>
<p>  一个全功能的 Sublime Text 代码自动完成引擎（代码提示）。<br>  安装完之后需要修改配置才能有代码提示，详情自己百度</p>
</li>
<li><p><a href="https://sublime.wbond.net/packages/AutoFileName" title="AutoFileName" target="_blank" rel="external">AutoFileName</a></p>
<p>  快速列出你想引用的文件夹里面所有文件的名字，比如想引用test/img/1.png。只需要输入/img,该插件就会自动提示/img下面的所有文件名，如图</p>
<p>  <img src="http://note.youdao.com/yws/api/personal/file/D11B2D26219349E0B6E7C6FCB029491C?method=download&amp;shareKey=b9cc23043616216dc8ecfebb5471dc8e" alt="AutoFileName"></p>
</li>
<li><p><a href="https://github.com/facelessuser/BracketHighlighter" title="BracketHighlighter" target="_blank" rel="external">BracketHighlighter</a></p>
<p>  高亮显示<code>[]</code>, <code>()</code>, <code>{}</code>, <code>&quot;&quot;</code>, <code>&#39;&#39;</code>, <code>&lt;tag&gt;&lt;/tag&gt;</code>符号，便于查看起始和结束标记。如图：</p>
<p>  <img src="http://note.youdao.com/yws/api/personal/file/EE35691601694832B110E475D0BE4DAA?method=download&amp;shareKey=cf1e455f93c110e9cf9c5ddbff8f71e9" alt="BracketHighlighter">    </p>
</li>
<li><p><a href="https://sublime.wbond.net/packages/ColorPicker" title="ColorPicker" target="_blank" rel="external">ColorPicker</a></p>
<p>  调色板，需要输入颜色时，可直接选取颜色。使用快捷键ctrl+shift+c即可打开调色板。需要注意的是，这个快捷键可能会打不开调色板，原因是该快捷键被占用了，最直接的解决办法是直接在Preferences→Key Bindings-User中配置：“{ “keys”: [“ctrl+shift+c”], “command”: “color_pick”},”</p>
</li>
<li><p><a href="https://sublime.wbond.net/packages/JsFormat" title="JsFormat" target="_blank" rel="external">JsFormat</a></p>
<p>  功能：Javascript的代码格式化插件</p>
<p>  使用：在已压缩的JS文件中，右键选择jsFormat或者使用默认快捷键（Ctrl+Alt+F）</p>
</li>
<li><p><a href="https://github.com/wbond/sublime_alignment" title="Alignment" target="_blank" rel="external">Alignment</a></p>
<p>  功能：代码对齐</p>
<p>  使用：默认快捷键Ctrl+Alt+A和QQ截屏冲突，可设置其他快捷键如：Ctrl+Shift+Alt+A；先选择要对齐的文本</p>
</li>
<li><p><a href="https://sublime.wbond.net/packages/Autoprefixer" title="sublime-autoprefixer" target="_blank" rel="external">sublime-autoprefixer</a></p>
<p>  功能：CSS添加私有前缀</p>
<p>  使用：Ctrl+Shift+P打开命令，选择autoprefixer即可。需要安装node.js。或者配置快捷键</p>
</li>
<li><p><a href="https://sublime.wbond.net/packages/DocBlockr" title="DocBlockr" target="_blank" rel="external">DocBlockr</a></p>
<p>  功能：生成优美注释</p>
<p>  使用：输入<code>/*</code>、<code>/**</code>然后回车，还有很多用法，请参照官网文档</p>
</li>
<li><p><a href="https://github.com/wbond/sublime_terminal" title="Terminal" target="_blank" rel="external">Terminal</a></p>
<p>  功能：打开终端</p>
<p>  使用：<code>ctrl+shift+t</code>基于文件打开终端；<code>ctrl+alt+shift+t</code>基于项目打开终端</p>
</li>
<li><p><a href="https://github.com/revolunet/sublimetext-markdown-preview" title="MarkdownPreview" target="_blank" rel="external">MarkdownPreview</a></p>
<p>  功能：MarkdownPreview提供markdown文件的预览。</p>
</li>
<li><p><a href="https://github.com/learning/SublimeServer" title="SublimeServer" target="_blank" rel="external">SublimeServer</a></p>
<p>  用sublime server 能启动本地服务器（手机访问电脑页面）</p>
</li>
</ul>
<h3 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h3><h4 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h4><ul>
<li>Ctrl + `： 打开Sublime Text控制台（Esc退出）</li>
<li>Ctrl+Shift+P：打开命令面板（Esc退出）</li>
<li>Ctrl + K + B： 组合键，显示或隐藏侧栏</li>
<li>Alt ：光标调到菜单栏，↑↓←→ 移动光标</li>
</ul>
<h4 id="编辑"><a href="#编辑" class="headerlink" title="编辑"></a>编辑</h4><ul>
<li>Ctr+Shift+D：复制粘贴光标所在行</li>
<li>Alt+.：关闭标签</li>
<li>Ctrl+/：用//注释当前行。</li>
<li>Ctrl+Shift+/：用/**/注释。</li>
<li>Ctrl + Enter： 在当前行下面新增一行然后跳至该行</li>
<li>Ctrl + Shift + Enter： 在当前行上面增加一行并跳至该行</li>
<li>Ctrl + ←/→： 进行逐词移动，</li>
<li>Ctrl + Shift + ←/→： 进行逐词选择</li>
<li>Ctrl + Shift + ↑/↓： 移动当前行（文件会被修改）</li>
<li>Ctrl+Z：撤销</li>
<li>Ctrl+Y：恢复撤销</li>
<li>Ctrl+J：合并行（已选择需要合并的多行时）</li>
</ul>
<h4 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h4><ul>
<li>Ctrl + D：选择当前光标所在的词并高亮该词所有出现的位置，再次Ctrl + D，会选择该词出现的下一个位置</li>
<li>Ctrl+L ：选择光标所在整行</li>
<li>Ctrl+X：删除光标所在行</li>
<li>Ctrl + J： 把当前选中区域合并为一行</li>
</ul>
<h4 id="屏幕"><a href="#屏幕" class="headerlink" title="屏幕"></a>屏幕</h4><ul>
<li>F11： 切换普通全屏</li>
<li>Shift + F11： 切换无干扰全屏</li>
</ul>
<h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><ul>
<li><p><a href="http://equinsuocha.io/material-theme/#/default" title="material-theme" target="_blank" rel="external">material-theme</a></p>
<p>  安装：使用<code>install package</code>安装<code>Material Theme</code></p>
<p>  激活主题：<br>  <code>Preferences</code> &gt; <code>Settings - User</code>添加以下行：</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">"color_scheme": "Packages/Material Theme/schemes/Material-Theme.tmTheme",</div><div class="line">"theme": "Material-Theme.sublime-theme",</div></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;正所谓 工欲善其事，必先利其器。牢记一些前端开发工具的使用技巧能大大提高我们的效率。&lt;/p&gt;
    
    </summary>
    
      <category term="工具" scheme="http://heji.website/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="web前端" scheme="http://heji.website/tags/web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="工具" scheme="http://heji.website/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>Git和Github使用教程</title>
    <link href="http://heji.website/2017/05/27/Git%E5%92%8CGithub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    <id>http://heji.website/2017/05/27/Git和Github使用教程/</id>
    <published>2017-05-27T03:18:53.435Z</published>
    <updated>2017-05-27T03:26:17.840Z</updated>
    
    <content type="html"><![CDATA[<p>有段时间没有使用git和github了，本着好记性不如烂笔头，重新梳理了下git和github的使用方法。</p>
<a id="more"></a>
<p>有段时间没有使用git和github了，本着好记性不如烂笔头，重新梳理了下git和github的使用方法。</p>
<h3 id="Git和Github"><a href="#Git和Github" class="headerlink" title="Git和Github"></a>Git和Github</h3><p>简单来说Git就是一个版本管理工具，github是一个用git做版本控制的项目托管平台。</p>
<h3 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h3><h4 id="注册github账户及创建远程仓库"><a href="#注册github账户及创建远程仓库" class="headerlink" title="注册github账户及创建远程仓库"></a>注册github账户及创建远程仓库</h4><p>要想使用github第一步当然是在<a href="https://github.com/" title="github" target="_blank" rel="external">github官网</a> 上注册一个账户。 之后就可以创建仓库了（免费用户只能建公共仓库），Create a New Repository，填好名称后Create，之后会出现一些仓库的配置信息，这也是一个git的简单教程。</p>
<h4 id="git的安装和配置"><a href="#git的安装和配置" class="headerlink" title="git的安装和配置"></a>git的安装和配置</h4><ul>
<li>根据实际情况下载git客户端安装</li>
<li><p>配置git(以下命令建议在git bash执行)</p>
<ul>
<li><p>首先在本地创建ssh key；</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ssh-keygen -t rsa -C <span class="string">"your_email@youremail.com"</span></div></pre></td></tr></table></figure>
<p>  后面的your_email@youremail.com改为你在github上注册的邮箱，之后会要求确认路径和输入密码，我们这使用默认的一路回车就行。成功的话会在~/下生成.ssh文件夹(windows下路径为<code>C:\Users\Administrator\.ssh</code>)，进去，打开id_rsa.pub，复制里面的key。</p>
</li>
<li><p>在github上配置ssh key<br>  回到github上，进入 Account Settings（账户配置），左边选择SSH Keys，Add SSH Key,title随便填，粘贴在你电脑上生成的key。<br>  <img src="http://note.youdao.com/yws/api/personal/file/A3DE34DC3BCB4EBBBA66C6250D77115C?method=download&amp;shareKey=863d9d9a53a52cad46a8aaa37deedbf4" alt="配置key" title="配置key"></p>
</li>
<li><p>验证是否配置成功<br>  在gitbash中输入命令：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ssh -T git@github.com</div></pre></td></tr></table></figure>
<p>  如果是第一次的会提示是否continue，输入yes就会看到：You’ve successfully authenticated, but GitHub does not provide shell access 。这就表示已成功连上github。</p>
</li>
<li><p>配置username和email<br>  在gitbash中输入命令：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git config --global user.name <span class="string">"your name"</span></div><div class="line">$ git config --global user.email <span class="string">"your_email@youremail.com"</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="工作流"><a href="#工作流" class="headerlink" title="工作流"></a>工作流</h4><p>在介绍正式使用之前，先介绍下git的版本管理机制。<br>你的本地仓库由 git 维护的三棵”树”组成。第一个是你的 工作目录（workspace ），它持有实际文件；第二个是 暂存区（stage），它像个缓存区域，临时保存你的改动；最后是 HEAD（Local repository），它指向你最后一次提交的结果。<br>下面以一张图说明本地仓库和远程仓库的关系：<br><img src="http://note.youdao.com/yws/api/personal/file/78D5A4F8D8244F8FAD9DB7F4634212B6?method=download&amp;shareKey=2e337c1275b5ce45edd42928fd70301b" alt="关系图以及命令的影响"></p>
<h4 id="本地git使用"><a href="#本地git使用" class="headerlink" title="本地git使用"></a>本地git使用</h4><ul>
<li><p>创建本地仓库</p>
<p>  新建项目文件夹，打开，执行命令初始化为git仓库</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git init</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>本地git常用命令</p>
<ul>
<li><p>查看变化<code>git status</code></p>
<p>  我在上一步创建的文件夹新建一个文件，这时我使用<code>git status</code>命令可以查看发生了什么变化。</p>
</li>
<li><p>提交修改到缓存区<code>git add *</code></p>
<p>  它告诉我有一个还未追踪的文件，并提示我可以使用 <code>git add &lt;file&gt;...</code>把它加进去。使用命令<code>git add *</code>，添加所有修改到缓存区，*表示所有。</p>
</li>
<li><p>提交修改到HEAD</p>
<p>  接着，再执行<code>git commit -m &quot;提交注释&quot;</code>把缓存区的修改提交到HEAD</p>
</li>
<li><p>未被追踪和已追踪</p>
<p>  然后我们继续修改文件的内容，然后使用<code>git status</code>查看变化，可以看到，这次的提示和新增时查看状态的提示不同，因为新增文件时文件尚未被追踪（untracked），而这次是更改已经追踪（tracked）的文件。</p>
</li>
<li><p>比较工作空间和HEAD的文件<code>git diff</code></p>
<p>  我们可以通过<code>git diff</code>来比较工作空间的文件与HEAD最新一次commit文件。</p>
</li>
<li><p>撤销修改<code>git checkout -- .</code></p>
<p>  假如我想撤销修改，执行<code>git checkout -- .</code>，小数点表示撤销所有。撤销之后执行<code>git status</code>会提示没有需要提交的内容。</p>
</li>
<li><p>查看提交日志<code>git log</code></p>
<p>  再次修改文件，接着执行<code>git add *</code>和<code>git commit -m &quot;&quot;</code>添加并提交到HEAD，然后再执行<code>git log</code>命令可以看到有两个提交记录</p>
</li>
<li><p>版本回退<code>git reset --hard xxx</code>，xxx表示版本号</p>
<p>  从刚才的 <code>git log</code>可以查看提交的版本<br>  <img src="http://note.youdao.com/yws/api/personal/file/AFB6CB8A14064D7580FB91F8EE80C0E3?method=download&amp;shareKey=7fd0a6c5b4019b1adfa133b115de1186" alt="提交的记录"></p>
<p>  假如我们想要回到最初的版本，执行命令<code>git reset --hard 1df0573</code>即可，版本号取前七位。此时，再次执行<code>git log</code>可以看到只有一个提交记录了。</p>
<p>  假如我们又想回到最新版，执行<code>git reflog</code>可以查看HEAD的变化情况</p>
<p>  <img src="http://note.youdao.com/yws/api/personal/file/3EFFACC15A0841E4BE0737552FD915AE?method=download&amp;shareKey=0104c52a00365166b59a11074ba39a0d" alt="reflog"></p>
<p>  此时，我再次使用reset，将HEAD指向 ad93b89，即可回到第一次reset前的状态了</p>
</li>
<li><p>清除未追踪的文件<code>git clean -xf</code></p>
<p>  假如我新建了一个文件，此时文件处于未追踪状态，执行checkout命令是不能撤销的。需要使用<code>git clean -xf</code>命令来清除所有未追踪的文件</p>
</li>
</ul>
</li>
</ul>
<h4 id="github与git的关联（上文已完成本地git与github的连接）"><a href="#github与git的关联（上文已完成本地git与github的连接）" class="headerlink" title="github与git的关联（上文已完成本地git与github的连接）"></a>github与git的关联（上文已完成本地git与github的连接）</h4><ul>
<li><p>本地仓库与远程仓库的关联</p>
<p>  在本地仓库执行命令：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git remote add origin git@github.com:yourName/yourRepo.git</div></pre></td></tr></table></figure>
<p>  后面的yourName和yourRepo表示你在github的用户名和刚才新建的仓库</p>
</li>
<li><p>获取远程仓库最新资源 <code>git pull origin master</code></p>
<p>  如果你在创建 repository 的时候，加入了 README.md 或者 LICENSE ，那么 github 会拒绝你的 push 。你需要先执行</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git pull origin master</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>将本地仓库推送到远程仓库 <code>git push</code><br>  执行命令<code>git push</code>可将本地仓库最新提交的版本（HEAD）推送至远程仓库</li>
</ul>
<h3 id="GitHub团队项目合作流程"><a href="#GitHub团队项目合作流程" class="headerlink" title="GitHub团队项目合作流程"></a>GitHub团队项目合作流程</h3><h4 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h4><p>首先把队友直接push的权限关掉，即设置成Read。这样可以防止队友误操作，未经审核就把代码push到团队项目上。<br>Teams用来分配issue的时候会用到，所以保留下来，并不是没有用。</p>
<p><img src="http://note.youdao.com/yws/api/personal/file/DF360C4BB2774817BB419976AC5BC276?method=download&amp;shareKey=81ec1aa9e41e7fff40e61a91d468ffce" alt="前期准备" title="前期准备"></p>
<h4 id="创建开发分支"><a href="#创建开发分支" class="headerlink" title="创建开发分支"></a>创建开发分支</h4><p>master分支一般用来发布稳定版本，dev分支（开发分支）用来发布开发版本。<br>输入分支名称后，下面会跳出Create branch，点击即可创建。</p>
<blockquote>
<p>下面图片写的是develop，是因为我们这个项目已经有dev分支了。如果你们没有dev分支，那么名字改成dev即可。这个影响不大。</p>
</blockquote>
<p><img src="http://note.youdao.com/yws/api/personal/file/B1AB493C7A064E90BC0722AC74D1EAFC?method=download&amp;shareKey=27f9abe03e6fb5c2c96574893910c0ee" alt="创建分支" title="创建分支"></p>
<p>分支创建完毕后，会自动跳转到dev分支。由于dev分支是从master分支上创建的，因此内容与master分支一致。</p>
<h4 id="Fork项目到个人的仓库"><a href="#Fork项目到个人的仓库" class="headerlink" title="Fork项目到个人的仓库"></a>Fork项目到个人的仓库</h4><p>点击右上角的Fork，并选择你的账号（一般在第一个）。就可以Fork团队项目到个人仓库啦。</p>
<p><img src="http://note.youdao.com/yws/api/personal/file/84AB82E3ED404559B9C1321398015307?method=download&amp;shareKey=61845cecd2d27c868e23c55a04fec4f9" alt="fork仓库" title="fork仓库"></p>
<p>Fork完成后</p>
<p><img src="http://note.youdao.com/yws/api/personal/file/0FBEA79EAB9240C8BA763DF361BF04C0?method=download&amp;shareKey=5bbabc3d7ce01982469c27cf9487f233" alt="fork完成" title="fork完成"></p>
<h4 id="Clone项目到本地"><a href="#Clone项目到本地" class="headerlink" title="Clone项目到本地"></a>Clone项目到本地</h4><p>打开git命令行，输入指令和fork到个人仓库的地址，回车即可克隆到本地<br><img src="http://note.youdao.com/yws/api/personal/file/0EF394F6DBC64230B99FE78A882E5153?method=download&amp;shareKey=6e62648bf41d5a9ba3eac865710ee6f8" alt="clone项目到本地" title="clone项目到本地"></p>
<p>使用 <code>git branch</code> 命令查看本地分支，发现本地只有master分支。如下图的①</p>
<p><img src="http://note.youdao.com/yws/api/personal/file/F176652A8A0B41EAB94AAE76716AB271?method=download&amp;shareKey=7c9f0f173827332e3bf661d63251a4a6" alt="创建分支" title="创建分支"></p>
<p>如上图的②，使用 <code>git branch -a</code> 查看所有分支，就能看到远程分支。</p>
<p>根据远程分支，我们可以创建一个新的本地分支dev，并把该项目的dev分支的内容放到本地dev分支。如上图③。</p>
<blockquote>
<p><code>git checkout -b dev origin/dev</code> 的意思是，创建一个dev分支（-b），并把远程dev分支（origin/dev）的内容放在该分支内。接着切换到该分支（checkout）</p>
</blockquote>
<p>现在使用 <code>git branch</code> 可以查看两个分支，并且用 <code>ls</code> 或者 <code>dir</code> 就能看到dev分支的内容了。想切换回master分支的时候，再用 <code>git checkout master</code> 即可。</p>
<p><img src="http://note.youdao.com/yws/api/personal/file/B81EE261B7FF410F88CA93485DFD62B6?method=download&amp;shareKey=3da4ec96f409dbc9ab99ac3224e617e3" alt="查看分支" title="查看分支"></p>
<p>上面的操作完成后，你就可以在本地进行开发了。但是如果要将你修改完的代码合并到团队项目上，还需要进行下面的操作。</p>
<h4 id="和团队项目保持同步"><a href="#和团队项目保持同步" class="headerlink" title="和团队项目保持同步"></a>和团队项目保持同步</h4><p>首先查看有没有设置upstream，使用 <code>git remote -v</code> 命令来查看。如下图①</p>
<p><img src="http://note.youdao.com/yws/api/personal/file/EC1A695DA79B489086DF6D97277F6AC1?method=download&amp;shareKey=642053c34763e637f53f9e7df89239ae" alt="设置upstream" title="设置upstream"></p>
<p>如果没有显示upstream，则使用 <code>git remote add upstream</code> 团队项目地址 命令。如上图②<br>接着再次使用 <code>git remote -v</code> ，如果如上图③，显示出了upstream，那么就设置好了</p>
<p>开始同步。首先执行 <code>git fetch upstream</code> 获取团队项目最新版本。如下图①</p>
<p><img src="http://note.youdao.com/yws/api/personal/file/F7E5EEE2AA4A42F196682E689A82F660?method=download&amp;shareKey=5a567212bb15436251c8ce2349f91123" alt="同步代码合并分支" title="同步代码合并分支"></p>
<p>此时并没有把最新版本合并到你本地的分支上，因此还需要一步。如上图②，当前分支是dev分支，执行 <code>git merge upstream/dev</code> 命令后，会将源分支（upstream/dev）合并到当前分支（dev）。</p>
<blockquote>
<p>如果你是在本地的master分支上开发，那么在使用该命令前，先切换到master分支。<br>merge的时候，有可能碰到冲突。需要解决冲突才能继续下面的操作。冲突的解决可以参考→ 冲突的解决</p>
</blockquote>
<h4 id="push修改到自己fork的项目上"><a href="#push修改到自己fork的项目上" class="headerlink" title="push修改到自己fork的项目上"></a>push修改到自己fork的项目上</h4><p>解决冲突后，就可以使用 git push 命令将本地的修改同步到自己的GitHub仓库上了。</p>
<blockquote>
<p>注意，在当前所在分支使用push，会push到与这个分支相关联的远程仓库分支。这里dev分支与origin/dev关联，因此push到GitHub上的dev分支。</p>
</blockquote>
<p><img src="http://note.youdao.com/yws/api/personal/file/C82F8928704A4EC6B825BC2444A91B34?method=download&amp;shareKey=9429f4ee7f6e786cba2415cc0c001701" alt="push修改" title="push修改"></p>
<h4 id="请求合并到团队项目上"><a href="#请求合并到团队项目上" class="headerlink" title="请求合并到团队项目上"></a>请求合并到团队项目上</h4><p>首先到你的GitHub上，进入你Fork的仓库里。点击红框处的Pull request</p>
<p><img src="http://note.youdao.com/yws/api/personal/file/3645DDFD28EB4ABD96FA38B000EC4CB8?method=download&amp;shareKey=4b5b1e03241c5c9e671068b689cd1b1a" alt="请求合并" title="请求合并"></p>
<p>下图左边红框，表示要合并到fzu2015/CourseManagement项目的dev分支。<br>下图右边红框，表示要从自己仓库的dev分支发起合并请求。<br>点击红框处的 Create pull request就可以发送合并请求了。</p>
<p><img src="http://note.youdao.com/yws/api/personal/file/E24798213BF64466AF41A9E874508412?method=download&amp;shareKey=d9f951395a7a8b5375e130acee2cbd0f" alt="请求合并" title="请求合并"></p>
<p>当然，在发送请求之前，你可以检查一下你都改了哪些东西。在上面那个页面往下拉，就可以看到两者的对比。</p>
<p>以上操作结束后，团队成员的流程就结束了。最后一步交给团队项目负责人来完成。</p>
<h4 id="团队项目负责人审核及同意合并请求"><a href="#团队项目负责人审核及同意合并请求" class="headerlink" title="团队项目负责人审核及同意合并请求"></a>团队项目负责人审核及同意合并请求</h4><p>首先进入GitHub的团队项目仓库中。此时右边的Pull requests显示当前项目有几个Pull request。点击进入查看。</p>
<p><img src="http://note.youdao.com/yws/api/personal/file/244B2BA92CC343E1AB825E9F6F443DA5?method=download&amp;shareKey=b2050436c2f3e8db46d81c5f6dc100c4" alt="同意合并" title="同意合并"></p>
<p>选择一个Pull request</p>
<p>项目负责人审核有两个要注意的地方</p>
<ul>
<li>一个是下图的①。一定要看清楚是合并到哪个分支。这里是从schaepher的dev分支合并到fzu2015的dev分支。</li>
<li>另一个是下图的②。点击进去后，就可以查看该Pull request对项目做了哪些修改。这样如果有问题，可以及时发现，并关闭该Pull request。</li>
</ul>
<blockquote>
<p>如果关闭了，一定要告诉队友，否则他可能会不知道。虽然也可以直接在下面发布Comment告诉他，但队友不一定看到。</p>
</blockquote>
<p><img src="http://note.youdao.com/yws/api/personal/file/AC10146C2964456CB91F43F7A4B5E6B8?method=download&amp;shareKey=53c9f57b39d02521e21f13859df07fb7" alt="审核合并" title="审核合并"></p>
<p>如果没有问题，可以点击Merge pull request。这样就合并好了。</p>
<p>以上文章部分出自<a href="http://www.cnblogs.com/schaepher/p/4933873.html" title="schaepher的博客" target="_blank" rel="external">schaepher的博客</a>，原文链接：<code>http://www.cnblogs.com/schaepher/p/4933873.html</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;有段时间没有使用git和github了，本着好记性不如烂笔头，重新梳理了下git和github的使用方法。&lt;/p&gt;
    
    </summary>
    
      <category term="工具" scheme="http://heji.website/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="web前端" scheme="http://heji.website/tags/web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="工具" scheme="http://heji.website/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>移动端全适配解决方案——方案篇</title>
    <link href="http://heji.website/2017/05/26/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%85%A8%E9%80%82%E9%85%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E2%80%94%E2%80%94%E6%96%B9%E6%A1%88%E7%AF%87/"/>
    <id>http://heji.website/2017/05/26/移动端全适配解决方案——方案篇/</id>
    <published>2017-05-26T00:58:32.271Z</published>
    <updated>2017-05-26T01:00:00.798Z</updated>
    
    <content type="html"><![CDATA[<p>现在来介绍下移动端全适配的具体实现方案，以网易新闻和手淘为例。</p>
<a id="more"></a>
<h3 id="面临的问题"><a href="#面临的问题" class="headerlink" title="面临的问题"></a>面临的问题</h3><p>在不同大小和高清的屏幕下：</p>
<ul>
<li>如何保证 界面布局 一致性：不错乱，不变形</li>
<li>如何保证 字体大小 一致性：大屏显示更大，小屏显示更小或更多</li>
<li>如何保证 1px边框 一致性：不同的高清屏也在正常显示1px的高度大小</li>
<li>如何保证 图片清晰度 一致性：不同大小和高清屏下都能看到清晰的图片</li>
</ul>
<p>考虑优先级：<br>布局 &gt; 字体大小 &gt; 1px边框 &gt; 高清图</p>
<h3 id="网易新闻的方案"><a href="#网易新闻的方案" class="headerlink" title="网易新闻的方案"></a>网易新闻的方案</h3><ul>
<li><p>使用理想视口作为可视视口的尺寸</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>设置html元素的font-size</p>
<p>  理论上来讲，html元素的字体大小是任意的。在设置了不缩放的情况下（此时可视视口等于理想视口），设备的屏幕越大html的字体大小应该设置得越大。为方便设计，取可视视口宽度乘以一个系数作为html元素的字体大小</p>
<p>  网易新闻手机网易网选择的系数为 100 / 750，这个系数可以如下推出：</p>
<p>  750px 是设计稿的宽度（以iphone6的物理像素数为标准），100是期望的换算比例。那么html元素的字体大小被设置为可视视口的宽度 * 100/750 即 可视视口宽度/7.5。也就是说1 rem = 可视视口宽 / 7.5</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.documentElement.style.fontSize = <span class="built_in">window</span>.innerWidth / <span class="number">7.5</span> + <span class="string">'px'</span>; <span class="comment">//注意:这里的7.5是设计稿宽度除以100获得，以实际设计稿宽度为基准计算</span></div></pre></td></tr></table></figure>
</li>
</ul>
<pre><code>因为此时可视视口的宽度是7.5rem，布局时元素的宽度不应超过这个值，否则会出现横向滚动条。
</code></pre><ul>
<li><p>将样式中px单位转换为rem单位</p>
<p>  上面一步中已经说明，100是期望的换算比例。也就是说1rem等价于设计稿中的100px。所以，把样式表中的px单位的数值就可以转换为以rem为单位的数值了。</p>
</li>
<li><p>在最新的网易新闻页面中字体的单位也使用了 rem</p>
</li>
</ul>
<h3 id="手淘的解决方案"><a href="#手淘的解决方案" class="headerlink" title="手淘的解决方案"></a>手淘的解决方案</h3><p>手淘使用自家开发的开源库<a href="https://github.com/amfe/lib-flexible" title="flexible" target="_blank" rel="external">flexible</a>实现移动端全适配。</p>
<ul>
<li><p>设置合适的缩放比</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*如果设置了meta标签，dpr取meta标签设置的initial-scale，scale取其倒数*/</span></div><div class="line"><span class="keyword">if</span> (!dpr &amp;&amp; !scale) &#123;</div><div class="line">    <span class="keyword">var</span> isAndroid = win.navigator.appVersion.match(<span class="regexp">/android/gi</span>);</div><div class="line">    <span class="keyword">var</span> isIPhone = win.navigator.appVersion.match(<span class="regexp">/iphone/gi</span>);</div><div class="line">    <span class="keyword">var</span> devicePixelRatio = win.devicePixelRatio;</div><div class="line">    <span class="keyword">if</span> (isIPhone) &#123;</div><div class="line">        <span class="comment">// iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案</span></div><div class="line">        <span class="keyword">if</span> (devicePixelRatio &gt;= <span class="number">3</span> &amp;&amp; (!dpr || dpr &gt;= <span class="number">3</span>)) &#123;                </div><div class="line">            dpr = <span class="number">3</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (devicePixelRatio &gt;= <span class="number">2</span> &amp;&amp; (!dpr || dpr &gt;= <span class="number">2</span>))&#123;</div><div class="line">            dpr = <span class="number">2</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            dpr = <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// 其他设备下，仍旧使用1倍的方案</span></div><div class="line">        dpr = <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    scale = <span class="number">1</span> / dpr;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>  对 iOS 设备 dpr = window.devicePixelRatio ，其他设备认为 dpr 为 1。比方说iphone5的dpr是2，那么在iphone5下计算的缩放比为0.5，如果没有设置缩放，那么正常情况下css中的1px对应iphone5 2px的物理像素，现在设置缩放比为0.5，这意味着css中的1px严格等于一个物理像素。这就是淘宝方案的巧妙之处了，对于 iOS 下高分辨率的设备，提供了更好的支持，解决了 1px border 问题和高清图片的问题。</p>
</li>
<li><p>设置html元素的font-size</p>
<p>  在计算 html 的 font-size 时淘宝的方案直接将可视视口的宽度乘以一个系数 0.1，由此推导换算比例：</p>
<blockquote>
<p>可视视口的宽度为 10 rem， 对应设计稿的宽度，则 1 rem        对应设计稿宽度的 1 / 10，换算时将设计稿中的长度数值除以      (设计稿宽度/10) 就可以了。<br>  例如：设计稿的宽度为 750 则设计稿中的长度数值除以 75         得到的就是以 rem 为单位的 css 长度的数值</p>
</blockquote>
<p>  在 meta 标签中的缩放比例发生变化时，设置 html 元素的 font-size</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.documentElement.style.fontSize = <span class="built_in">window</span>.innerWidth / <span class="number">10</span> + <span class="string">'px'</span>;</div></pre></td></tr></table></figure>
</li>
<li><p>由于可视视口的宽度就是 10 rem，对元素进行布局时只要不超过 10rem 即可，另外淘宝的方案将 body 的 width 设为 100% 并对 overflow 进行 hidden，这个 100% width 会计算为布局视口的宽，也是 10rem，那么 body 内布局超出 10rem 的元素不会导致布局视口出现滚动条</p>
</li>
<li><p>淘宝的方案中对字体使用了 px 单位，这就需要对不同的视口宽度（也就是不同dpr）的设备分别进行适配，淘宝的方案是将 dpr 数值设置为 html 的 data-dpr 属性，通过css选择器选择不同 dpr 设备下的元素</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">div &#123;</div><div class="line">    width: 1rem; </div><div class="line">    height: 0.4rem;</div><div class="line">    font-size: 12px; // 默认写上dpr为1的fontSize</div><div class="line">&#125;</div><div class="line">[data-dpr="2"] div &#123;</div><div class="line">    font-size: 24px;</div><div class="line">&#125;</div><div class="line">[data-dpr="3"] div &#123;</div><div class="line">    font-size: 36px;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;现在来介绍下移动端全适配的具体实现方案，以网易新闻和手淘为例。&lt;/p&gt;
    
    </summary>
    
      <category term="移动端" scheme="http://heji.website/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
    
      <category term="移动端" scheme="http://heji.website/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
      <category term="webapp" scheme="http://heji.website/tags/webapp/"/>
    
  </entry>
  
  <entry>
    <title>移动端全适配解决方案——概念篇</title>
    <link href="http://heji.website/2017/05/26/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%85%A8%E9%80%82%E9%85%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E2%80%94%E2%80%94%E6%A6%82%E5%BF%B5%E7%AF%87/"/>
    <id>http://heji.website/2017/05/26/移动端全适配解决方案——概念篇/</id>
    <published>2017-05-26T00:56:05.525Z</published>
    <updated>2017-05-26T00:58:07.176Z</updated>
    
    <content type="html"><![CDATA[<p>要搞懂移动端的适配问题，就要先搞明白像素和视口。</p>
<a id="more"></a>
<h3 id="像素"><a href="#像素" class="headerlink" title="像素"></a>像素</h3><p>在移动端给一个元素设置 <code>width:200px</code> 时发生了什么？这里的px到底是多长呢？像素是网页布局的基础，但是我们一直在用直觉使用它。</p>
<p>其实存在两种像素：</p>
<ul>
<li>设备像素<br>  屏幕的物理像素，任何设备屏幕的物理像素的数量都是固定不变的，单位是pt。</li>
<li><p>CSS像素<br>  在CSS、JS中使用的一个抽象的概念，单位是 px。</p>
<blockquote>
<p>顺便说下，CSS像素也可以称为设备独立像素(device-independent pixels)，简称为dips，单位是dp。</p>
</blockquote>
<p>  那么，我们现在再来说说一个元素 width:200px 以后会怎么样。这个元素跨越了200个CSS元素，200个CSS元素相当于多少个设备像素取决于两个条件：1、页面是否缩放；2、屏幕是否为高密度</p>
</li>
</ul>
<p>这两方面后面再解释，先梳理一下手机硬件之间的关系，注意这里使用的都是物理像素。<br>以 iPhone5 为例，我们已知的是：</p>
<ol>
<li>分辨率：1136pt x 640pt<br> 指屏幕上垂直有 1136 个物理像素，水平有 640 个物理像素</li>
<li>屏幕尺寸： 4英寸<br> 注意英寸是长度单位，不是面积单位。4英寸指的是屏幕对角线的长度。</li>
<li>屏幕像素密度：326dpi<br> 屏幕像素密度（Pibel Per Inch）简称 ppi ，单位是 dpi（dot per inch）。这里指屏幕水平或垂直每英寸有326个物理像素。原则上来说，ppi越高越好，因为图像会更加细腻清晰。<br> ppi 是可以通过 分辨率 和 屏幕尺寸 计算得到的：<br> <img src="http://note.youdao.com/yws/api/personal/file/416E980384A14720B41CB4686237F3E7?method=download&amp;shareKey=3b520718bf0ce85d8ac881a53d456093" alt=""></li>
</ol>
<h3 id="视口"><a href="#视口" class="headerlink" title="视口"></a>视口</h3><p>移动设备上有三个viewport</p>
<ul>
<li><p>layout viewport(布局视口)</p>
<p>  如果把移动设备上浏览器的可视区域设为viewport的话，某些网站就会因为viewport太窄而显示错乱，所以这些浏览器就决定默认情况下把viewport设为一个较宽的值，比如980px，这样的话即使是那些为桌面设计的网站也能在移动浏览器上正常显示了。ppk把这个浏览器默认的viewport叫做 layout viewport。这个layout viewport的宽度可以通过 <code>document.documentElement.clientWidth</code> 来获取。</p>
</li>
<li><p>visual viewport(可视视口)</p>
<p>  layout viewport的宽度是大于浏览器可视区域的宽度的，所以我们还需要一个viewport来代表 浏览器可视区域的大小，这个viewport称为visual viewport，其宽度值为横向可见CSS像素数。visual viewport的宽度可以通过<code>window.innerWidth</code> 来获取。CSS媒体查询的<code>max-width/min-width</code>取的就是可视视口的宽度</p>
</li>
<li><p>ideal viewport(理想视口)</p>
<p>  ideal viewport是指能完美适配移动设备的viewport。通过<code>screen.width</code>能获取理想视口的宽度</p>
<blockquote>
<p>定义理想视口是浏览器的事情，并不能简单地认为是开发者定义的，开发者只能使用。</p>
</blockquote>
</li>
</ul>
<p>移动设备默认的viewport是layout viewport，也就是那个比屏幕要宽的viewport，但在进行移动设备网站的开发时，我们需要的是ideal viewport。那么怎么才能得到ideal viewport呢？这就该轮到meta标签出场了</p>
<p>方法1、<code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt;</code><br>要得到ideal viewport可以把把默认的layout viewport的宽度设为移动设备的屏幕宽度。</p>
<p>方法2、<code>&lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1&quot;&gt;</code><br>因为这里的缩放值是1，是相对于ideal viewport进行缩放的。所以设置了initial-scale=1其实就是获取ideal viewport</p>
<p>但如果width 和 initial-scale=1同时出现，并且还出现了冲突呢？比如：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=400, initial-scale=1"</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>width=400表示把当前viewport的宽度设为400px，initial-scale=1则表示把当前viewport的宽度设为ideal viewport的宽度。当遇到这种情况时，浏览器会取它们两个中较大的那个值。例如，当width=400，ideal viewport的宽度为320时，取的是400；当width=400， ideal viewport的宽度为480时，取的是ideal viewport的宽度。</p>
<h3 id="缩放"><a href="#缩放" class="headerlink" title="缩放"></a>缩放</h3><ul>
<li>缩放与设备像素、CSS像素的关系<br>  缩放是在放大或缩小CSS像素，比如一个宽度为 200px 的元素无论放大，还是200个CSS像素。但是因为这些像素被放大了，所以CSS像素也就跨越了更多的设备像素。缩小则相反。</li>
<li><p>缩放与视口</p>
<ul>
<li><p>缩放会影响视觉视口的尺寸<br>  页面被用户放大，视觉视口内CSS像素数量减少；被用户缩小，视觉视口内CSS像素数量增多就行了。这个道理应该是不难想的。</p>
</li>
<li><p>用户缩放不会影响布局视口</p>
<blockquote>
<p>注意，这是『用户缩放』，后面会说开发者设置缩放的情况</p>
</blockquote>
</li>
</ul>
</li>
<li><p>缩放比例<br>  我们在开发者工具中可以在这里查看缩放比例：<br>  <img src="http://note.youdao.com/yws/api/personal/file/74D94782CD5745FC9F42718796B69C3A?method=download&amp;shareKey=127dbbdeb05fe32cdd804bf15f68e80e" alt=""><br>  这里的 75% 是相对于理想视口的。<br>  在下载浏览器中，可以这么算（理想视口与可视视口的比）：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">zoom level = screen.width / <span class="built_in">window</span>.innerWidth</div></pre></td></tr></table></figure>
</li>
<li><p>禁止缩放</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"user-scalable=no"</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>设置缩放</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"initial-scale=2"</span>&gt;</span></div></pre></td></tr></table></figure>
<p>  使用initial-scale有一个副作用：同时也会将布局视口的尺寸设置为缩放后的尺寸。所以initial-scale=1与width=device-width的效果是一样的。</p>
</li>
</ul>
<h3 id="完美视口"><a href="#完美视口" class="headerlink" title="完美视口"></a>完美视口</h3><p>解决各种浏览器兼容问题的理想视口设置<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1"</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="设备像素比"><a href="#设备像素比" class="headerlink" title="设备像素比"></a>设备像素比</h3><p>在谈到像素的时候，讲到除了缩放，屏幕是否为高密度也会影响设备像素和CSS像素的关系。<br>在缩放程度为100%（这个条件很重要，因为缩放也会影响他们）时，他们的比例叫做设备像素比(device pixel ratio)：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dpr = 设备像素 / CSS像素</div></pre></td></tr></table></figure></p>
<p>可以通过JS得到： <code>window.devicePixelRatio</code><br>设备像素比也和视口有关：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dpr = 屏幕横向设备像素 / 理想视口的宽</div></pre></td></tr></table></figure></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这一篇介绍了移动端适配需要掌握的知识，先说明了移动端存在的两种像素，然后介绍了三种视口，由缩放对视口的影响引入理想视口，最后说明设备想告诉比。下一篇介绍现在市面上的适配方案。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;要搞懂移动端的适配问题，就要先搞明白像素和视口。&lt;/p&gt;
    
    </summary>
    
      <category term="移动端" scheme="http://heji.website/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
    
      <category term="移动端" scheme="http://heji.website/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
      <category term="webapp" scheme="http://heji.website/tags/webapp/"/>
    
  </entry>
  
  <entry>
    <title>angular自定义指令监听属性值的变化</title>
    <link href="http://heji.website/2017/05/19/angular%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4%E7%9B%91%E5%90%AC%E5%B1%9E%E6%80%A7%E5%80%BC%E7%9A%84%E5%8F%98%E5%8C%96/"/>
    <id>http://heji.website/2017/05/19/angular自定义指令监听属性值的变化/</id>
    <published>2017-05-19T09:35:54.531Z</published>
    <updated>2017-05-19T09:37:35.416Z</updated>
    
    <content type="html"><![CDATA[<p>在使用自定义指令时，若指令的值是动态变化的，自定义指令内部如何获取变化后的值呢？</p>
<a id="more"></a>
<ul>
<li><p>方法一：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//html代码</span></div><div class="line">&lt;pd-Ggdm dmjbh=<span class="string">"2055"</span> code=<span class="string">"bean.JBXX.splxdm"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">pd-Ggdm</span>&gt;</span></span></div><div class="line">//js代码</div><div class="line">angular.module("pd.ggdm" , ["pd.resource"])</div><div class="line">.directive("pdGgdm", function() &#123;</div><div class="line">	return &#123;</div><div class="line">		restrict : "E",</div><div class="line">		transclude : true, </div><div class="line">      	replace : true,  </div><div class="line">		scope : &#123;</div><div class="line">			code : "=" ,</div><div class="line">			dmjbh : "@"</div><div class="line">		&#125;,</div><div class="line">		template:"<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>",</div><div class="line">		link: function(scope,element,attrs) &#123;</div><div class="line">		    scope.$watch('code', function(newVal)&#123;</div><div class="line">                    console.log(newVal);//每次你在controller里修改了userInfo，这里都会打印</div><div class="line">            &#125;, true);</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>  该方法使用了数据绑定，使自定义指令内的变量绑定父控制器的变量，然后监听变量的变化。</p>
</li>
<li><p>方法二</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//html代码</span></div><div class="line">&lt;pd-Ggdm dmjbh=<span class="string">"2055"</span> code=<span class="string">"&#123;&#123;bean.JBXX.splxdm&#125;&#125;"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">pd-Ggdm</span>&gt;</span></span></div><div class="line">//js代码</div><div class="line">angular.module("pd.ggdm" , ["pd.resource"])</div><div class="line">.directive("pdGgdm", function() &#123;</div><div class="line">	return &#123;</div><div class="line">		restrict : "E",</div><div class="line">		transclude : true, </div><div class="line">      	replace : true,  </div><div class="line">		scope : &#123;</div><div class="line">			code : "@" ,</div><div class="line">			dmjbh : "@"</div><div class="line">		&#125;,</div><div class="line">		template:"<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>",</div><div class="line">		link: function(scope,element,attrs) &#123;</div><div class="line">		    attrs.$observe('code', function(newVal)&#123;</div><div class="line">                //检测属性值的变化</div><div class="line">            &#125;);</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>  该方法则是监听属性值的变化</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在使用自定义指令时，若指令的值是动态变化的，自定义指令内部如何获取变化后的值呢？&lt;/p&gt;
    
    </summary>
    
      <category term="AngularJS" scheme="http://heji.website/categories/AngularJS/"/>
    
    
      <category term="AngularJS" scheme="http://heji.website/tags/AngularJS/"/>
    
  </entry>
  
  <entry>
    <title>正则表达式入门</title>
    <link href="http://heji.website/2017/04/17/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    <id>http://heji.website/2017/04/17/正则表达式/</id>
    <published>2017-04-17T04:13:42.503Z</published>
    <updated>2017-04-17T04:31:14.978Z</updated>
    
    <content type="html"><![CDATA[<p>正则表达式晦涩难懂，学一次忘一次，每次需要用的时候都要上网查，所以记录下来是非常有必要的。</p>
<a id="more"></a>
<p>正则表达式的功能很强大，可以检索，替换文本。<br>比如javascript里面经常会使用正则表达式来做表单验证（判断手机号码，邮箱格式等）。</p>
<h3 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h3><p><code>.</code> - 匹配除了换行符之外的任意字符<br><code>*</code> - 指定前边的内容可以连续重复使用任意次<br><code>+</code> - 指定前边的内容可以连续重复一次或多次<br><code>?</code> - 指定前边的内容可以连续重复一次或0次<br><code>{n}</code> - 指定前边的内容可以连续重复n次<br><code>{n,}</code> - 指定前边的内容可以连续重复n次或更多<br><code>{n,m}</code> - 指定前边的内容可以连续重复n到m次<br><code>\d</code> - 匹配一个数字<br><code>\w</code> - 匹配字母或数字或下划线或汉字<br><code>\s</code> - 匹配任意的空白符，包括空格，制表符(Tab)，换行符，中文全角空格等<br><code>[XYZ]</code> - 匹配中括号里面的任何一个字符<br><code>[XYZ]</code>+ - 匹配中括号中的一个或多个字符<br><code>$</code> - 匹配字符串的结尾<br><code>^</code> - 匹配字符串的开头<br><code>[a-z]</code> - 匹配任意小写字母<br><code>[^a-z]</code> - 在中括号里面的^表示否，这个例子中任何非小写字母的字符都能匹配<br><code>( )</code> - 标记一个子表达式的开始和结束位置.<br><code>|</code> - 指明两项之间的一个选择</p>
<h3 id="模式修饰符"><a href="#模式修饰符" class="headerlink" title="模式修饰符"></a>模式修饰符</h3><p><code>i</code> 不区分大小写搜索<br><code>m</code> 多行搜索<br><code>g</code> 全局搜索</p>
<h3 id="在线工具"><a href="#在线工具" class="headerlink" title="在线工具"></a>在线工具</h3><p>安利一个正则表达式<a href="http://regexr.com/" target="_blank" rel="external">在线工具</a></p>
<h3 id="JavaScript中的应用"><a href="#JavaScript中的应用" class="headerlink" title="JavaScript中的应用"></a>JavaScript中的应用</h3><ul>
<li><p>Test()<br>  这个方法接受一个字符串参数，并且返回一个bool值标示目标字符串是否匹配成功。<br>  例如：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> username = <span class="string">'JohnSmith'</span>;</div><div class="line">alert(<span class="regexp">/[A-Za-z_-]+/</span>.test(username)); <span class="comment">// returns true</span></div></pre></td></tr></table></figure>
<p>  <code>/[A-Za-z_-]+/</code> 这部分，它可以用来检测目标字符串是否满足全部由大小写字母以及下划线，减号组成。通常在验证注册表单的时候会用到。 <code>[A-Za-z_-]</code>匹配一个[]中的字符，+ 号指定前边的内容可以连续重复一次或多次。</p>
</li>
<li><p>Split()<br>  程序员对split这个方法肯定也很熟悉了，它用于把一个字符串分割成字符串数组。<br>  但是你可能不知道，它除了接受分割符参数以外，还接受正则表达式。<br>  例如：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> str = <span class="string">'this is my string'</span>;    </div><div class="line">alert(str.split(<span class="regexp">/\s/</span>)); </div><div class="line"><span class="comment">// alerts "this, is, my, string";</span></div></pre></td></tr></table></figure>
<p>  <code>\s</code>匹配任意的空白符，包括空格，制表符(Tab)，换行符，中文全角空格等，于是就讲str分割成数组[this, is, my, string]</p>
</li>
<li><p>Replace()<br>  replace方法用于将匹配的内容替换成目标内容。<br>  举个栗子：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> username = <span class="string">'J;ohnSmith;@%'</span>;</div><div class="line">username = username.replace(<span class="regexp">/[^A-Za-z\d_-]+/</span>, <span class="string">''</span>);</div><div class="line">alert(username); <span class="comment">// JohnSmith;@%</span></div></pre></td></tr></table></figure>
<p>  我们把除了大小写字母以及下划线，减号之外的字符全都替换成’’。注意[]里面的^表示取反。<br>  注意上面的栗子，我们只替换了第一个字符，因为默认一匹配就不再继续搜索。我们可以直接在正则后面添加g开启全局模式。</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> username = <span class="string">'J;ohnSmith;@%'</span>;</div><div class="line">username = username.replace(<span class="regexp">/[^A-Za-z\d_-]+/g</span>, <span class="string">''</span>);</div><div class="line">alert(username); <span class="comment">// alerts JohnSmith</span></div></pre></td></tr></table></figure>
</li>
<li><p>Match()<br>  跟test不太一样，match的调用对象是待测字符串。它的返回值是所有匹配的元素组成的数组。<br>  举个栗子：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> string = <span class="string">'This is just a string with some 12345 and some !@#$ mixed in.'</span>;</div><div class="line">alert(string.match(<span class="regexp">/[a-z]+/gi</span>)); <span class="comment">// alerts "This,is,just,a,string,with,some,and,some,mixed,in"</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="常用正则表达式"><a href="#常用正则表达式" class="headerlink" title="常用正则表达式"></a>常用正则表达式</h3><ul>
<li><p>校验数字</p>
  <table><tr><th style="width:20%;">匹配规则</th><th style="width:30%;">正则表达式</th><th>说明</th></tr><tr><td>数字</td><td>^\d*$</td><td></td></tr><tr><td>n位的数字</td><td>^\d{n}$</td><td></td></tr><tr><td>至少n位的数字</td><td>^\d{n,}$</td><td></td></tr><tr><td>m-n位的数字</td><td>^\d{m,n}$</td><td></td></tr><tr><td>零和非零开头的数字</td><td>^(0|[1-9][0-9]*)$</td><td>|表示或</td></tr><tr><td>非零开头的最多带两位小数的数字</td><td>^([1-9]\d*)+(.\d{1,2})?$</td><td>+表示匹配第一个子项的内容必须至少出现一次(数字不能少数点开头)，?表示小数点可有可无，但最多只能有一个</td></tr><tr><td>带1-2位小数的正数或负数</td><td>^(-)?\d+.\d{1,2}$</td><td>^(-)?表示以”-“开头或者开头不是”-“</td></tr><tr><td>非零的正整数</td><td>^[1-9]\d*$</td><td></td></tr><tr><td>非零的负整数</td><td>^-[1-9]\d*$</td><td></td></tr></table>
</li>
<li><p>校验字符的表达式</p>
  <table><tr><th style="width:40%;">匹配规则</th><th style="width:50%;">正则表达式</th><th>说明</th></tr><tr><td>汉字</td><td>^[\u4e00-\u9fa5]+$</td><td></td></tr><tr><td>英文和数字</td><td>^[A-Za-z0-9]+$</td><td></td></tr><tr><td>长度为3-20的所有字符</td><td>^.{3,20}$</td><td></td></tr><tr><td>由26个英文字母组成的字符串</td><td>^[A-Za-z]+$</td><td></td></tr><tr><td>由26个大写英文字母组成的字符串</td><td>^[A-Z]+$</td><td></td></tr><tr><td>由26个小写英文字母组成的字符串</td><td>^[a-z]+$</td><td></td></tr><tr><td>由数字和26个英文字母组成的字符串</td><td>^[A-Za-z0-9]+$</td><td></td></tr><tr><td>由数字、26个英文字母或者下划线组成的字符串</td><td>^\w+$</td><td></td></tr><tr><td>中文、英文、数字包括下划线</td><td>^[\u4E00-\u9FA5A-Za-z0-9_]+$</td><td></td></tr><tr><td>中文、英文、数字但不包括下划线等符号</td><td>^[\u4E00-\u9FA5A-Za-z0-9]+$</td><td></td></tr></table>
</li>
<li><p>常用表单校验</p>
  <table><tr><th style="width:30%;">匹配规则</th><th style="width:30%;">正则表达式</th><th>说明</th></tr><tr><td>去除字符串前后空格</td><td>(^\s+)|(\s+$)</td><td></td></tr><tr><td>邮箱(xxx@xxx.xxx)</td><td>^\w+@\w+.\w+$</td><td></td></tr><tr><td>国内手机号码</td><td>^1[34578]{1}\d{9}$</td><td>以1开头，接着跟3或4或5或7或8，接着9位数字</td></tr><tr><td>帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)</td><td>^[a-zA-Z]\w{4,15}$</td><td></td></tr><tr><td>密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)</td><td>^[a-zA-Z]\w{5,17}$</td><td></td></tr><tr><td>强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)</td><td>^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$</td><td>不懂</td></tr><tr><td>日期格式</td><td>^\d{4}-\d{1,2}-\d{1,2}$</td><td></td></tr><tr><td>腾讯QQ号</td><td>^[1-9][0-9]{4,}$</td><td></td></tr><tr><td>IP地址</td><td>^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])(.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){3}$</td><td></td></tr></table>


</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;正则表达式晦涩难懂，学一次忘一次，每次需要用的时候都要上网查，所以记录下来是非常有必要的。&lt;/p&gt;
    
    </summary>
    
      <category term="正则表达式" scheme="http://heji.website/categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    
    
      <category term="正则表达式" scheme="http://heji.website/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>jQuery2.1.1源码解析七、get和eq的区别</title>
    <link href="http://heji.website/2017/03/31/jQuery2.1.1%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%B8%83%E3%80%81get%E5%92%8Ceq%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <id>http://heji.website/2017/03/31/jQuery2.1.1源码解析七、get和eq的区别/</id>
    <published>2017-03-31T06:15:21.801Z</published>
    <updated>2017-03-31T06:27:00.937Z</updated>
    
    <content type="html"><![CDATA[<p>get方法获取的是元素的DOM元素，eq方法获取的是jQuery对象<br><a id="more"></a></p>
<p>get方法和eq方法的区别：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">.eq()  减少匹配元素的集合，根据index索引值，精确指定索引对象。</div><div class="line">.get() 通过检索匹配jQuery对象得到对应的DOM元素。</div></pre></td></tr></table></figure></p>
<p>上两节我们看过了get方法的源码，这次，我们来看看eq方法的源码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">eq: <span class="function"><span class="keyword">function</span>(<span class="params"> i </span>) </span>&#123;</div><div class="line">		<span class="keyword">var</span> len = <span class="keyword">this</span>.length,</div><div class="line">			j = +i + ( i &lt; <span class="number">0</span> ? len : <span class="number">0</span> );</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.pushStack( j &gt;= <span class="number">0</span> &amp;&amp; j &lt; len ? [ <span class="keyword">this</span>[j] ] : [] ); <span class="comment">//创建一个新的jQuery对象</span></div><div class="line">	&#125;</div><div class="line">...</div><div class="line">pushStack: <span class="function"><span class="keyword">function</span>(<span class="params"> elems </span>) </span>&#123;</div><div class="line">    <span class="comment">//新建一个jQuery对象然后用jQuery.merge语句把elems节点合并到新的jQuery对象上</span></div><div class="line">    <span class="keyword">var</span> ret = jQuery.merge( <span class="keyword">this</span>.constructor(), elems );</div><div class="line">    <span class="comment">//把执行find方法前的对象的引用赋给prevObject属性</span></div><div class="line">    ret.prevObject = <span class="keyword">this</span>;</div><div class="line">    ret.context = <span class="keyword">this</span>.context;</div><div class="line">    <span class="comment">// 放回新创建的jQuery对象</span></div><div class="line">    <span class="keyword">return</span> ret;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>jQuery的考虑很周到，通过eq方法只能产生一个新的对象，但是如果需要的是一个合集对象要怎么处理？因此jQuery便提供了一个slice方法：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">slice: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.pushStack( slice.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> ) ); <span class="comment">//slice.apply( this, arguments )把this指向的jQuery集合分割，然后再调用pushStack方法返回分割后的新的jQuery集合</span></div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Ps:pushStack方法其实就是对jQuery集合进行包装，供jQuery回溯使用</strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;get方法获取的是元素的DOM元素，eq方法获取的是jQuery对象&lt;br&gt;
    
    </summary>
    
      <category term="jQuery" scheme="http://heji.website/categories/jQuery/"/>
    
    
      <category term="JavaScript" scheme="http://heji.website/tags/JavaScript/"/>
    
      <category term="web前端" scheme="http://heji.website/tags/web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="jQuery" scheme="http://heji.website/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>jQuery2.1.1源码解析六、仿栈与队列的操作</title>
    <link href="http://heji.website/2017/03/31/jQuery2.1.1%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E5%85%AD%E3%80%81%E4%BB%BF%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97%E7%9A%84%E6%93%8D%E4%BD%9C/"/>
    <id>http://heji.website/2017/03/31/jQuery2.1.1源码解析六、仿栈与队列的操作/</id>
    <published>2017-03-31T06:13:29.391Z</published>
    <updated>2017-03-31T06:37:23.091Z</updated>
    
    <content type="html"><![CDATA[<p>jQuery既然是模仿的数组结构，那么肯定会实现一套类数组的处理方法，比如常见的栈与队列操作push、pop、shift、unshift、求和、遍历循环each、排序及筛选等一系的扩展方法。<br><a id="more"></a></p>
<p>jQuery提供了.get()、:index()、 :lt()、:gt()、:even()及 :odd()这类索引值相关的选择器，他们的作用可以过滤他们前面的匹配表达式的集合元素:<br>我们看一下下面几个选择器的原理：<br>get方法–是通过检索匹配jQuery对象得到对应的DOM元素，如下代码实现：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [];</div><div class="line"><span class="keyword">var</span> slice = arr.slice;</div><div class="line">...</div><div class="line">get: <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> num != <span class="literal">null</span> ?</div><div class="line">    <span class="comment">// Return just the one element from the set</span></div><div class="line">    (num &lt; <span class="number">0</span> ? <span class="keyword">this</span>[num + <span class="keyword">this</span>.length] : <span class="keyword">this</span>[num]) :</div><div class="line">    <span class="comment">// Return all the elements in a clean array</span></div><div class="line">    slice.call(<span class="keyword">this</span>); <span class="comment">//slice指向的是Array对象的slice属性。这行代码的详细理解请查看另一篇笔记`Array.prototype.slice.call(arguments)的理解`</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>原理很简单，因为jQuery查询出来的是一个数组的DOM集合，所以就可以按照数组的方法通过下标的索引取值，当然如果num的值超出范围，比如小于元素数量的负数或等于或大于元素的数量的数，那么它将返回undefined。当没有穿参数时，返回jQuery对象数组。<br>由于是数组的关系，所以我们有几个快速方法，比如头跟尾的取值：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">first: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.eq( <span class="number">0</span> );</div><div class="line">&#125;,</div><div class="line">last: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.eq(<span class="number">-1</span>);</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;jQuery既然是模仿的数组结构，那么肯定会实现一套类数组的处理方法，比如常见的栈与队列操作push、pop、shift、unshift、求和、遍历循环each、排序及筛选等一系的扩展方法。&lt;br&gt;
    
    </summary>
    
      <category term="jQuery" scheme="http://heji.website/categories/jQuery/"/>
    
    
      <category term="JavaScript" scheme="http://heji.website/tags/JavaScript/"/>
    
      <category term="web前端" scheme="http://heji.website/tags/web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="jQuery" scheme="http://heji.website/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>jQuery2.1.1源码解析五、回溯处理的设计</title>
    <link href="http://heji.website/2017/03/31/jQuery2.1.1%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%BA%94%E3%80%81%E5%9B%9E%E6%BA%AF%E5%A4%84%E7%90%86%E7%9A%84%E8%AE%BE%E8%AE%A1/"/>
    <id>http://heji.website/2017/03/31/jQuery2.1.1源码解析五、回溯处理的设计/</id>
    <published>2017-03-31T06:11:01.594Z</published>
    <updated>2017-03-31T06:41:37.934Z</updated>
    
    <content type="html"><![CDATA[<p>有链式调用必然会有回溯设计，这一节介绍jQuery的回溯处理的设计。<br><a id="more"></a></p>
<p>我们知道Query选择器最终都是通过DOM接口实现取值的, 但是通过jQuery处理后返回的不仅仅只有DOM对象，而是一个包装容器，下面是控制台打印的jQuery对象（使用了链式操作之后）。<br><img src="imgs/1489561386731_3.png" alt=""><br><strong>在jQuery对象中有个prevObject对象，这个是干嘛用的呢？</strong><br>如果你想知道prevObject是做什么的，咱们首先得先来了解一下jQuery对象栈，jQuery内部维护着一个jQuery对象栈。每个遍历方法都会找到一组新元素（一个jQuery对象），然后jQuery会把这组元素推入到栈中。<br>而每个jQuery对象都有三个属性：context、selector和prevObject，其中的prevObject属性就指向这个对象栈中的前一个对象，而通过这个属性可以回溯到最初的DOM元素集中。<br>jQuery为我们操作这个内部对象栈提供个非常有用的2个方法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">.end()</div><div class="line">.addBack()</div></pre></td></tr></table></figure></p>
<p>总的来说：end方法就是回溯到上一个Dom合集,因此对于链式操作与优化，这个方法还是很有意义的。下面是jQuery的end方法的源码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">end: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> <span class="keyword">this</span>.prevObject || <span class="keyword">this</span>.constructor(<span class="literal">null</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>prevObject在什么情况下会产生？</strong><br>在构建jQuery对象的时候，通过pushStack方法构建，如下代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">jQuery.fn.extend(&#123;</div><div class="line">    find: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</div><div class="line">       <span class="keyword">var</span> i,</div><div class="line">			len = <span class="keyword">this</span>.length,</div><div class="line">			ret = [],</div><div class="line">			self = <span class="keyword">this</span>;</div><div class="line">		</div><div class="line">        <span class="keyword">if</span> ( <span class="keyword">typeof</span> selector !== <span class="string">"string"</span> ) &#123;</div><div class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.pushStack( jQuery( selector ).filter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">				<span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; len; i++ ) &#123;</div><div class="line">					<span class="keyword">if</span> ( jQuery.contains( self[ i ], <span class="keyword">this</span> ) ) &#123;</div><div class="line">						<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;) );</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; len; i++ ) &#123;</div><div class="line">			jQuery.find( selector, self[ i ], ret ); <span class="comment">//直接利用 Sizzle 接口，把结果注入到 ret 数组中去</span></div><div class="line">		&#125;</div><div class="line">        <span class="comment">// Needed because $( selector, context ) becomes $( context ).find( selector )</span></div><div class="line">        <span class="comment">//此处this指执行find前的jQuery对象</span></div><div class="line">        ret = <span class="keyword">this</span>.pushStack(len &gt; <span class="number">1</span> ? jQuery.unique(ret) : ret);</div><div class="line">        ret.selector = <span class="keyword">this</span>.selector ? <span class="keyword">this</span>.selector + <span class="string">" "</span> + selector : selector;</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>接着我们看pushStack对象，作用就通过新的DOM元素去创建一个新的jQuery对象:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">pushStack: <span class="function"><span class="keyword">function</span>(<span class="params"> elems </span>) </span>&#123;</div><div class="line">    <span class="comment">//新建一个jQuery对象然后用jQuery.merge语句把elems节点合并到新的jQuery对象上</span></div><div class="line">    <span class="keyword">var</span> ret = jQuery.merge( <span class="keyword">this</span>.constructor(), elems );</div><div class="line"></div><div class="line">    <span class="comment">//把执行find方法前的对象的引用赋给prevObject属性</span></div><div class="line">    ret.prevObject = <span class="keyword">this</span>;</div><div class="line">    ret.context = <span class="keyword">this</span>.context;</div><div class="line"></div><div class="line">    <span class="comment">// 放回新创建的jQuery对象</span></div><div class="line">    <span class="keyword">return</span> ret;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>流程解析：<br>1、首先构建一个新的jQuery对象，因为constructor是指向构造器的，所以这里就等同于调用jQuery()方法了，返回了一个新的jQuery对象；<br>2、然后用jQuery.merge语句把elems节点合并到新的jQuery对象上；<br>3、最后给返回的新jQuery对象添加prevObject属性，我们看到prevObject其实还是当前jQuery的一个引用罢了，所以也就是为什么通过prevObject能取到上一个合集的原因了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;有链式调用必然会有回溯设计，这一节介绍jQuery的回溯处理的设计。&lt;br&gt;
    
    </summary>
    
      <category term="jQuery" scheme="http://heji.website/categories/jQuery/"/>
    
    
      <category term="JavaScript" scheme="http://heji.website/tags/JavaScript/"/>
    
      <category term="web前端" scheme="http://heji.website/tags/web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="jQuery" scheme="http://heji.website/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>jQuery2.1.1源码解析四、插件接口的设计</title>
    <link href="http://heji.website/2017/03/31/jQuery2.1.1%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E5%9B%9B%E3%80%81%E6%8F%92%E4%BB%B6%E6%8E%A5%E5%8F%A3%E7%9A%84%E8%AE%BE%E8%AE%A1/"/>
    <id>http://heji.website/2017/03/31/jQuery2.1.1源码解析四、插件接口的设计/</id>
    <published>2017-03-31T06:09:56.961Z</published>
    <updated>2017-03-31T06:39:57.775Z</updated>
    
    <content type="html"><![CDATA[<p>如果jQuery没有插件接口的设计，那么他就像个光杆司令没有兵，就是没有手下，只有自己一个封闭的城堡。因此jQuery城堡需要设计一个大门 - 插件接口，从而打开大门开始招兵买马。<br><a id="more"></a></p>
<p>在javascript的世界中一共有四种上下文调用方式：方法调用模式、函数调用模式、构造器调用模式、apply调用模式。我要分别解释一下：<br>方法调用模式： 类似于foo.bar()，函数作为一个对象的方法出现，this指向foo。<br>函数调用模式：类似于bar(),函数单独出现，this指向window<br>构造器调用模式：类似于 var foo = new bar()，this指向new bar()返回的对象。<br>apply调用：类似于bar.apply(object)，this指向object</p>
<p><strong>关于apply方法的说明：</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*定义一个人类*/</span>  </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>)</span>&#123;  </div><div class="line">    <span class="keyword">this</span>.name=name;  </div><div class="line">    <span class="keyword">this</span>.age=age;  </div><div class="line">&#125;  </div><div class="line"><span class="comment">/*定义一个学生类*/</span>  </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name,age,grade</span>)</span>&#123;  </div><div class="line">    Person.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>);  </div><div class="line">    <span class="keyword">this</span>.grade=grade;  </div><div class="line">&#125;  </div><div class="line"><span class="comment">//创建一个学生类  </span></div><div class="line"><span class="keyword">var</span> student=<span class="keyword">new</span> Student(<span class="string">"zhangsan"</span>,<span class="number">21</span>,<span class="string">"一年级"</span>);  </div><div class="line"><span class="comment">//测试  </span></div><div class="line">alert(<span class="string">"name:"</span>+student.name+<span class="string">"\n"</span>+<span class="string">"age:"</span>+student.age+<span class="string">"\n"</span>+<span class="string">"grade:"</span>+student.grade);  </div><div class="line"><span class="comment">//大家可以看到测试结果name:zhangsan age:21  grade:一年级  </span></div><div class="line"><span class="comment">//学生类里面我没有给name和age属性赋值啊,为什么又存在这两个属性的值呢,这个就是apply的神奇之处.</span></div></pre></td></tr></table></figure></p>
<p>分析: <code>Person.apply(this,arguments);</code><br>this:在创建对象在这个时候代表的是Student对象<br>arguments:是参数数组,也就是[“zhangsan”,”21”,”一年级”];<br>通俗一点讲就是:用student去执行Person这个类里面的内容,在Person这个类里面存在this.name等之类的语句,这样就将属性创建到了student对象里面。</p>
<p>jQuery插件的开发分为两种：<br>  ☑  一种是挂在jQuery命名空间下的全局函数，也可称为静态方法；<br>  ☑  另一种是jQuery对象级别的方法，即挂在jQuery原型下的方法，这样通过选择器获取的jQuery对象实例也能共享该方法。</p>
<p>提供的接口：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$.extend(target, [object1], [objectN]);</div></pre></td></tr></table></figure></p>
<p><strong>注意：该方法也可用来合并对象(其实扩展jQuery就是把内容合并到jQuery对象或者jQuery实例对象中去)</strong></p>
<p>下面是拟jQuery源码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> $ = jQuery = <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> jQuery.fn.init(selector);</div><div class="line">&#125;</div><div class="line">jQuery.fn = jQuery.prototype = &#123;</div><div class="line">    name: <span class="string">'heji'</span>,</div><div class="line">	init: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</div><div class="line">		<span class="keyword">this</span>.selector = selector;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">	&#125;,</div><div class="line">	<span class="keyword">constructor</span>: jQuery</div><div class="line">&#125;</div><div class="line">jQuery.fn.init.prototype = jQuery.fn</div><div class="line">jQuery.extend = jQuery.fn.extend = function() &#123;</div><div class="line">	<span class="keyword">var</span> options, src, copy,</div><div class="line">		target = <span class="built_in">arguments</span>[<span class="number">0</span>] || &#123;&#125;, <span class="comment">//target默认执行第一个对象或者空对象(合并对象)</span></div><div class="line">		i = <span class="number">1</span>,</div><div class="line">		length = <span class="built_in">arguments</span>.length;</div><div class="line">	<span class="comment">//只有一个参数，就是对jQuery自身的扩展处理，如果多个参数，表示合并对象</span></div><div class="line">	<span class="comment">//extend,fn.extend</span></div><div class="line">	<span class="keyword">if</span> (i === length) &#123;</div><div class="line">	    <span class="comment">//调用的上下文对象jQuery/或者实例,当使用jQuery.extend扩展时,this表示jQuery对象;当使用jQuery.fn.extend扩展时,实际上this表示jQuery对象原型</span></div><div class="line">		target = <span class="keyword">this</span>; </div><div class="line">		i--;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (; i &lt; length; i++) &#123;</div><div class="line">		<span class="comment">//从i开始取参数,不为空开始遍历</span></div><div class="line">		<span class="keyword">if</span> ((options = <span class="built_in">arguments</span>[i]) != <span class="literal">null</span>) &#123;</div><div class="line">			<span class="keyword">for</span> (name <span class="keyword">in</span> options) &#123;</div><div class="line">				copy = options[name];</div><div class="line">				<span class="comment">//拷贝属性到target.</span></div><div class="line">				target[name] = copy;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> target;</div><div class="line">&#125;</div><div class="line">jQuery.fn.extend(&#123;</div><div class="line">	setName: <span class="function"><span class="keyword">function</span>(<span class="params">myName</span>) </span>&#123;</div><div class="line">		<span class="keyword">this</span>.myName = myName</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">	&#125;,</div><div class="line">	getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		$(<span class="string">"#name"</span>).html(<span class="keyword">this</span>.myName)</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">	&#125;</div><div class="line">&#125;)</div><div class="line">$().setName(<span class="string">'何机'</span>).getName();</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;如果jQuery没有插件接口的设计，那么他就像个光杆司令没有兵，就是没有手下，只有自己一个封闭的城堡。因此jQuery城堡需要设计一个大门 - 插件接口，从而打开大门开始招兵买马。&lt;br&gt;
    
    </summary>
    
      <category term="jQuery" scheme="http://heji.website/categories/jQuery/"/>
    
    
      <category term="JavaScript" scheme="http://heji.website/tags/JavaScript/"/>
    
      <category term="web前端" scheme="http://heji.website/tags/web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="jQuery" scheme="http://heji.website/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>jQuery2.1.1源码解析三、方法链式调用的实现</title>
    <link href="http://heji.website/2017/03/31/jQuery2.1.1%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%B8%89%E3%80%81%E6%96%B9%E6%B3%95%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <id>http://heji.website/2017/03/31/jQuery2.1.1源码解析三、方法链式调用的实现/</id>
    <published>2017-03-31T06:08:56.029Z</published>
    <updated>2017-03-31T06:38:32.660Z</updated>
    
    <content type="html"><![CDATA[<p>jQuery的链式操作极大地提高了代码的效率，现在我们研究一下jQuery如何实现链式操作。<br><a id="more"></a></p>
<p>我们先来看看使用jQuery的一段链式代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">'input[type="button"]'</span>)</div><div class="line">    .eq(<span class="number">0</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        alert(<span class="string">'点击我!'</span>);</div><div class="line">&#125;).end().eq(<span class="number">1</span>)</div><div class="line">.click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    $(<span class="string">'input[type="button"]:eq(0)'</span>).trigger(<span class="string">'click'</span>);</div><div class="line">&#125;).end().eq(<span class="number">2</span>)</div><div class="line">.toggle(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    $(<span class="string">'.aa'</span>).hide(<span class="string">'slow'</span>);</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    $(<span class="string">'.aa'</span>).show(<span class="string">'slow'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>看这个代码的结构，我们或多或少都能猜到其含义：<br>  ☑  找出type类型为button的input元素<br>  ☑  找到第一个按钮，并绑定click事件处理函数<br>  ☑  返回所有按钮，再找到第二个<br>  ☑  为第二个按钮绑定click事件处理函数<br>  ☑  为第三个按钮绑定toggle事件处理函数</p>
<p>jQuery的这种管道风格的链式代码，总的来说：</p>
<ul>
<li>节约JS代码</li>
<li>所返回的都是同一个对象，可以提高代码的效率。</li>
</ul>
<p>链式处理的前提必须是方法中必须返回一个或者一些实例对象。例如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">aQuery.prototype = &#123;</div><div class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">    &#125;,</div><div class="line">    name: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;jQuery的链式操作极大地提高了代码的效率，现在我们研究一下jQuery如何实现链式操作。&lt;br&gt;
    
    </summary>
    
      <category term="jQuery" scheme="http://heji.website/categories/jQuery/"/>
    
    
      <category term="JavaScript" scheme="http://heji.website/tags/JavaScript/"/>
    
      <category term="web前端" scheme="http://heji.website/tags/web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="jQuery" scheme="http://heji.website/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>jQuery2.1.1源码解析二、无new构建实例</title>
    <link href="http://heji.website/2017/03/31/jQuery2.1.1%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%BA%8C%E3%80%81%E6%97%A0new%E6%9E%84%E5%BB%BA%E5%AE%9E%E4%BE%8B/"/>
    <id>http://heji.website/2017/03/31/jQuery2.1.1源码解析二、无new构建实例/</id>
    <published>2017-03-31T04:31:13.285Z</published>
    <updated>2017-03-31T06:36:45.180Z</updated>
    
    <content type="html"><![CDATA[<p>在jQuery里面，你既可以用<code>$.isArray()</code>调用<code>jq</code>的静态方法，也可以通过<code>$().css()</code>获取对象执行对象方法。<br><a id="more"></a></p>
<p>在js中，要实现一个变量既能被new，又能调用它的方法，其实不难实现(使用原型实现)：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">a.func = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;alert(<span class="string">"静态方法"</span>);&#125;;</div><div class="line">a.prototype.t = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;alert(<span class="string">"对象方法"</span>);&#125;;</div><div class="line"><span class="keyword">var</span> t = <span class="keyword">new</span> a();</div><div class="line">t.t();</div><div class="line">a.func();</div></pre></td></tr></table></figure></p>
<h3 id="无new构建"><a href="#无new构建" class="headerlink" title="无new构建"></a>无new构建</h3><p>下面就是一个无new构建的例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> aQuery = <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</div><div class="line">	<span class="comment">//调用时this表示window对象(函数是window对象的属性)</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>===<span class="built_in">window</span>); <span class="comment">//true,false</span></div><div class="line">    <span class="keyword">if</span> (!(<span class="keyword">this</span> <span class="keyword">instanceof</span> aQuery)) &#123;</div><div class="line">    	<span class="comment">//如果this不是aQuery对象的实例,新建一个aQuery对象返回,此时this即为aQuery对象的一个实例</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> aQuery(selector);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.constructor===aQuery); <span class="comment">//true</span></div><div class="line">    <span class="comment">// /[^#].*/：匹配除#外的所有字符串,exec方法返回匹配结果组成的数组</span></div><div class="line">    <span class="keyword">var</span> elem = <span class="built_in">document</span>.getElementById(<span class="regexp">/[^#].*/</span>.exec(selector)[<span class="number">0</span>]);</div><div class="line">    <span class="keyword">this</span>.length = <span class="number">1</span>;</div><div class="line">    <span class="keyword">this</span>[<span class="number">0</span>] = elem;</div><div class="line">    <span class="keyword">this</span>.context = <span class="built_in">document</span>;</div><div class="line">    <span class="keyword">this</span>.selector = selector;</div><div class="line">    <span class="keyword">this</span>.get = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>[num];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(aQuery(<span class="string">"#book"</span>).get(<span class="number">0</span>));</div></pre></td></tr></table></figure></p>
<p>现在，我们看看jQuery是如何做的：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> jQuery = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> jQuery.fn.init(selector, context);</div><div class="line">&#125;;</div><div class="line">jQuery.fn = jQuery.prototype = &#123;&#125;;</div><div class="line"><span class="keyword">var</span> init = jQuery.fn.init = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>)</span>&#123;&#125;;</div><div class="line"><span class="comment">//让返回对象的原型指向jQuery的原型,这样,所有$()获取的对象的原型其实就都是jQuery对象的原型</span></div><div class="line">init.prototype = jQuery.fn;</div></pre></td></tr></table></figure></p>
<p>通俗解释：</p>
<ol>
<li><code>$()</code>,<code>jQuery()</code>是执行一个函数，<code>$</code>和<code>jQuery</code>是函数名称，这个函数返回的是一个对象，所以里面是一个new表达式，但是名字不能是自己，否则无限循环。</li>
<li>既然不是自己，其实可以理解为<code>jQuery()</code>返回的不是jQuery对象，而是<code>jQuery.fn.init</code>（一个名字而已）对象。</li>
<li>但是为了原型链，jQuery这样处理，<code>jQuery.fn.init.prototype = jQuery.prototype</code>.</li>
</ol>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>jQuery的无new构建原理中在<code>$()</code>内部中首先保证是通过<code>new</code>创建,使得我们在函数调用中可以使用this来代表该jq实例，通过原型的共享而实现了静态方法与实例方法的共存。手段惊艳，不得不赞叹作者的过人之处。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在jQuery里面，你既可以用&lt;code&gt;$.isArray()&lt;/code&gt;调用&lt;code&gt;jq&lt;/code&gt;的静态方法，也可以通过&lt;code&gt;$().css()&lt;/code&gt;获取对象执行对象方法。&lt;br&gt;
    
    </summary>
    
      <category term="jQuery" scheme="http://heji.website/categories/jQuery/"/>
    
    
      <category term="JavaScript" scheme="http://heji.website/tags/JavaScript/"/>
    
      <category term="web前端" scheme="http://heji.website/tags/web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="jQuery" scheme="http://heji.website/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>jQuery2.1.1源码解析一、理解架构</title>
    <link href="http://heji.website/2017/03/31/jQuery2.1.1%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%B8%80%E3%80%81%E7%90%86%E8%A7%A3%E6%9E%B6%E6%9E%84/"/>
    <id>http://heji.website/2017/03/31/jQuery2.1.1源码解析一、理解架构/</id>
    <published>2017-03-31T04:24:39.158Z</published>
    <updated>2017-03-31T04:30:59.709Z</updated>
    
    <content type="html"><![CDATA[<p>接触前端已经有一年多，觉得应该能尝试着看一些伟大框架的源码。首先是大名鼎鼎的jQuery，感谢慕课网的教程。<br><a id="more"></a></p>
<h3 id="整体架构"><a href="#整体架构" class="headerlink" title="整体架构"></a>整体架构</h3><ul>
<li><p>jQuery2.1.1的结构如下：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</div><div class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"> global, factory </span>) </span>&#123;</div><div class="line">    	<span class="keyword">if</span> ( <span class="keyword">typeof</span> <span class="built_in">module</span> === <span class="string">"object"</span> &amp;&amp; <span class="keyword">typeof</span> <span class="built_in">module</span>.exports === <span class="string">"object"</span> ) &#123;</div><div class="line">    		<span class="built_in">module</span>.exports = global.document ?</div><div class="line">    			factory( global, <span class="literal">true</span> ) :</div><div class="line">    			<span class="function"><span class="keyword">function</span>(<span class="params"> w </span>) </span>&#123;</div><div class="line">    				<span class="keyword">if</span> ( !w.document ) &#123;</div><div class="line">    					<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>( <span class="string">"jQuery requires a window with a document"</span> );</div><div class="line">    				&#125;</div><div class="line">    				<span class="keyword">return</span> factory( w );</div><div class="line">    			&#125;;</div><div class="line">    	&#125; <span class="keyword">else</span> &#123;</div><div class="line">    		factory( global );</div><div class="line">    	&#125;</div><div class="line">    &#125;(<span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">"undefined"</span> ? <span class="built_in">window</span> : <span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> window, noGlobal </span>) </span>&#123;</div><div class="line">    	<span class="keyword">var</span> jQuery = <span class="function"><span class="keyword">function</span>(<span class="params"> selector, context </span>) </span>&#123;</div><div class="line">    		<span class="keyword">return</span> <span class="keyword">new</span> jQuery.fn.init( selector, context );</div><div class="line">    	&#125;;</div><div class="line">    	<span class="comment">// 核心方法</span></div><div class="line">    	<span class="comment">// 回调系统</span></div><div class="line">    	<span class="comment">// 异步队列</span></div><div class="line">    	<span class="comment">// 数据缓存</span></div><div class="line">    	<span class="comment">// 队列操作</span></div><div class="line">    	<span class="comment">// 选择器引</span></div><div class="line">    	<span class="comment">// 属性操作</span></div><div class="line">    	<span class="comment">// 节点遍历</span></div><div class="line">    	<span class="comment">// 文档处理</span></div><div class="line">    	<span class="comment">// 样式操作</span></div><div class="line">    	<span class="comment">// 属性操作</span></div><div class="line">    	<span class="comment">// 事件体系</span></div><div class="line">    	<span class="comment">// AJAX交互</span></div><div class="line">    	<span class="comment">// 动画引擎</span></div><div class="line">    	<span class="keyword">return</span> jQuery;</div><div class="line">    &#125;));</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
</li>
<li><p>jQuery的模块依赖网<br>  <img src="imgs/1488794281489_3.png" alt=""><br>  jQuery库如今一共13个模块，模块不是单一的，比如jQuery动画，依赖异步队列、动画队列、回调队列与数据缓存模块等。jQuery的设计中最喜欢做的事就是抽出代码的共同特性使之“模块化”，这是非常值得我们学习的。</p>
</li>
</ul>
<h3 id="自调用匿名函数"><a href="#自调用匿名函数" class="headerlink" title="自调用匿名函数"></a>自调用匿名函数</h3><p>任何库与框架设计的第一个要点就是解决命名空间与变量污染的问题。jQuery就是利用了JavaScript函数作用域的特性，采用自调用匿名函数的方法来解决这个问题。<br>自定义匿名函数有两种常用的方式：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//方式一,jQuery使用的方式</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(a);</div><div class="line">&#125;(<span class="built_in">window</span>));</div><div class="line"><span class="comment">//方式二</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(a);</div><div class="line">&#125;)(<span class="built_in">window</span>)</div></pre></td></tr></table></figure></p>
<p>下面是jQuery结构代码的详细解析：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"> global, factory </span>) </span>&#123;</div><div class="line">    <span class="comment">//这里定义一个匿名函数,global变量实际上就是typeof window !== "undefined" ? window : this三目运算符的结果,factory变量实际上就是封装了jQuery所有功能代码的函数</span></div><div class="line">    <span class="keyword">if</span> ( <span class="keyword">typeof</span> <span class="built_in">module</span> === <span class="string">"object"</span> &amp;&amp; <span class="keyword">typeof</span> <span class="built_in">module</span>.exports === <span class="string">"object"</span> ) &#123;</div><div class="line">        <span class="comment">//如果是node平台,且支持window.document属性,那么直接暴露factory函数,第二个参数表示不需要创建全局变量jQuery和$</span></div><div class="line">        <span class="built_in">module</span>.exports = global.document ?</div><div class="line">            factory( global, <span class="literal">true</span> ) :</div><div class="line">            <span class="function"><span class="keyword">function</span>(<span class="params"> w </span>) </span>&#123;</div><div class="line">                <span class="keyword">if</span> ( !w.document ) &#123;</div><div class="line">                    <span class="comment">//如果不支持window.document属性,直接抛出异常</span></div><div class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>( <span class="string">"jQuery requires a window with a document"</span> );</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">return</span> factory( w );</div><div class="line">            &#125;;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">//如果不是node平台,直接返回factory函数,此时没有传递noGlobal参数,那么该参数就是undefined</span></div><div class="line">        factory( global );</div><div class="line">    &#125;</div><div class="line">&#125;(<span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">"undefined"</span> ? <span class="built_in">window</span> : <span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> window, noGlobal </span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> jQuery = <span class="function"><span class="keyword">function</span>(<span class="params"> selector, context </span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> jQuery.fn.init( selector, context );</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// 核心方法</span></div><div class="line">    <span class="comment">// 回调系统</span></div><div class="line">    <span class="comment">// 异步队列</span></div><div class="line">    <span class="comment">// 数据缓存</span></div><div class="line">    <span class="comment">// 队列操作</span></div><div class="line">    <span class="comment">// 选择器引</span></div><div class="line">    <span class="comment">// 属性操作</span></div><div class="line">    <span class="comment">// 节点遍历</span></div><div class="line">    <span class="comment">// 文档处理</span></div><div class="line">    <span class="comment">// 样式操作</span></div><div class="line">    <span class="comment">// 属性操作</span></div><div class="line">    <span class="comment">// 事件体系</span></div><div class="line">    <span class="comment">// AJAX交互</span></div><div class="line">    <span class="comment">// 动画引擎</span></div><div class="line">    <span class="keyword">var</span> strundefined = <span class="keyword">typeof</span> <span class="literal">undefined</span>;</div><div class="line">    <span class="keyword">if</span> ( <span class="keyword">typeof</span> noGlobal === strundefined ) &#123;</div><div class="line">        <span class="comment">//如果noGlobal变量未定义,需要全局变量jQuery和$</span></div><div class="line">    	<span class="built_in">window</span>.jQuery = <span class="built_in">window</span>.$ = jQuery;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> jQuery;</div><div class="line">&#125;));</div></pre></td></tr></table></figure>
<p>问题：为什么需要传递window？<br>这样做是为了减少变量查找所花的时间，如果变量在函数体内就不用经过scope作用域大范围查找。因此，显然把它当成一个局部变量来查找要快一些。另外，把window作为参数传递进来，在进行代码压缩时能减小框架的体积（压缩之后参数名会变化）<br>问题：为什么需要传递undefined？<br>因为在早期的浏览器，undefined变量的值是能够改变的，在jQuery功能函数内需要一个准确的undefined变量，所以需要传递进来。</p>
<h3 id="jQuery的类数组对象结构"><a href="#jQuery的类数组对象结构" class="headerlink" title="jQuery的类数组对象结构"></a>jQuery的类数组对象结构</h3><p>很多人迷惑的jQuery为什么能像数组一样操作，通过对象get方法或者直接通过下标0索引就能转成DOM对象。<br>9种用法整体来说可以分三大块：选择器、dom的处理、dom加载。<br>换句话说jQuery就是为了获取DOM、操作DOM而存在的！所以为了更方便这些操作，让节点与实例对象通过一个桥梁给关联起来，jQuery内部就采用了一种叫“类数组对象”的方式作为存储结构，所以我们即可以像对象一样处理jQuery操作，也能像数组一样可以使用push、pop、shift、unshift、sort、each、map等类数组的方法操作jQuery对象了。<br>jQuery对象可用数组下标索引是什么原理？<br>通过<code>$(&quot;.Class&quot;)</code>构建的对象结构如下所示：<br><img src="imgs/1488854531784_2.png" alt=""><br>整个结构很明了，通过对象键值对的关系保存着属性，原型保存着方法。我们来简单的模拟一个这样的数据结构：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> aQuery = <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</div><div class="line">	<span class="comment">//调用时this表示window对象(函数是window对象的属性)</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>===<span class="built_in">window</span>); <span class="comment">//true,false</span></div><div class="line">    <span class="keyword">if</span> (!(<span class="keyword">this</span> <span class="keyword">instanceof</span> aQuery)) &#123;</div><div class="line">    	<span class="comment">//如果this不是aQuery对象的实例,新建一个aQuery对象返回,此时this即为aQuery对象的一个实例</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> aQuery(selector);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>===aQuery); <span class="comment">//true</span></div><div class="line">    <span class="comment">// /[^#].*/：匹配除#外的所有字符串,exec方法返回匹配结果组成的数组</span></div><div class="line">    <span class="keyword">var</span> elem = <span class="built_in">document</span>.getElementById(<span class="regexp">/[^#].*/</span>.exec(selector)[<span class="number">0</span>]);</div><div class="line">    <span class="keyword">this</span>.length = <span class="number">1</span>;</div><div class="line">    <span class="keyword">this</span>[<span class="number">0</span>] = elem;</div><div class="line">    <span class="keyword">this</span>.context = <span class="built_in">document</span>;</div><div class="line">    <span class="keyword">this</span>.selector = selector;</div><div class="line">    <span class="keyword">this</span>.get = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>[num];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(aQuery(<span class="string">"#book"</span>).get(<span class="number">0</span>));</div></pre></td></tr></table></figure></p>
<p>以上是模拟jQuery的对象结构，通过aQuery方法抽象出了对象创建的具体过程，这也是软件工程领域中的广为人知的设计模式-工厂方法。</p>
<ul>
<li>jQuery的无new构建原理<br>  函数aQuery()内部首先保证了必须是通过new操作符构建。这样就能保证当前构建的是一个带有this的实例对象，既然是对象我们可以把所有的属性与方法作为对象的key与value的方式给映射到this上，所以如上结构就可以模拟出jQuery的这样的操作了，即可通过索引取值，也可以链式方法取值，但是这样的结构是有很大的缺陷的，每次调用ajQuery方法等于是创建了一个新的实例，那么类似get方法就要在每一个实例上重新创建一遍，性能就大打折扣，所以jQuery在结构上的优化不仅仅只是我们看到的，除了实现类数组结构、方法的原型共享，而且还实现方法的静态与实例的共存，这是我们之后将会重点分析的。</li>
</ul>
<h3 id="变量污染与变量冲突"><a href="#变量污染与变量冲突" class="headerlink" title="变量污染与变量冲突"></a>变量污染与变量冲突</h3><p>任何库与框架设计的第一个要点就是解决命名空间与变量污染的问题。jq就是利用js本身函数的作用域采用立即调用表达式将变量包裹的函数里，对外开放的只有jQuery和$作为入口。<br>但是<code>$</code>这么轻便的变量，如果其他框架也将它作为简写怎么办，所以jq提供了noConflict()方法来让出<code>$</code>这个变量，用法是先引入其他框架的js，再引入jq。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;script src=<span class="string">"other_lib.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line">&lt;script src=<span class="string">"jquery.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line"></div><div class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</div><div class="line">  $.noConflict();</div><div class="line">  jQuery(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="comment">// 使用 jQuery 的代码</span></div><div class="line">  &#125;);</div><div class="line">  <span class="comment">// 使用其他库的 $ 的代码</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p>解决变量冲突的源码如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span></div><div class="line">    <span class="comment">//因为此时jQuery尚未对window.jQuery赋值,此时window.jQuery表示undefined</span></div><div class="line">	_jQuery = <span class="built_in">window</span>.jQuery,</div><div class="line">    <span class="comment">//因为此时jQuery尚未对window.$赋值,此时$表示其他框架的全局变量</span></div><div class="line">	_$ = <span class="built_in">window</span>.$;</div><div class="line"><span class="comment">//deep参数指示是否允许彻底将 jQuery 变量还原。</span></div><div class="line">jQuery.noConflict = <span class="function"><span class="keyword">function</span>(<span class="params"> deep </span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span> ( <span class="built_in">window</span>.$ === jQuery ) &#123;</div><div class="line">	    <span class="comment">//引入jQuery之后,window.$表示jQuery对象,此时恢复其他框架变量对$符号的使用</span></div><div class="line">	    <span class="built_in">window</span>.$ = _$;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> ( deep &amp;&amp; <span class="built_in">window</span>.jQuery === jQuery ) &#123;</div><div class="line">        <span class="comment">//引入jQuery之后,window.jQuery表示jQuery对象,如果指定deep=true,那么window.jQuery将会被还原为undefined</span></div><div class="line">		<span class="built_in">window</span>.jQuery = _jQuery;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//返回jQuery对象（可以重新指派引用）</span></div><div class="line">	<span class="keyword">return</span> jQuery;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">if</span> ( <span class="keyword">typeof</span> noGlobal === strundefined ) &#123;</div><div class="line">	<span class="built_in">window</span>.jQuery = <span class="built_in">window</span>.$ = jQuery;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>另外，可以使用闭包的方式传入jQuery对象,也可解决<code>$</code>冲突的问题。</p>
<h3 id="jQuery中的ready与load事件"><a href="#jQuery中的ready与load事件" class="headerlink" title="jQuery中的ready与load事件"></a>jQuery中的ready与load事件</h3><p>Query有3种针对文档加载的方法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// ...代码...</span></div><div class="line">&#125;)</div><div class="line"><span class="comment">//document ready 简写</span></div><div class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// ...代码...</span></div><div class="line">&#125;)</div><div class="line">$(<span class="built_in">document</span>).load(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// ...代码...</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>一个是ready一个是load，这两个到底有什么区别呢？<br>ready在构建了基本的DOM结构之后就会触发，load事件需要在所有资源比如图片等加载完成之后才触发。所以，ready先执行，load后执行。<br><strong>DOM文档加载的步骤：</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(1) 解析HTML结构。</div><div class="line">(2) 加载外部脚本和样式表文件。</div><div class="line">(3) 解析并执行脚本代码。</div><div class="line">(4) 构造HTML DOM模型。//ready</div><div class="line">(5) 加载图片等外部文件。</div><div class="line">(6) 页面加载完毕。//load</div></pre></td></tr></table></figure></p>
<p>现在我们看看jQuery如何处理文档加载时机的问题：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> readyList;</div><div class="line">jQuery.fn.ready = <span class="function"><span class="keyword">function</span>(<span class="params"> fn </span>) </span>&#123;</div><div class="line">	jQuery.ready.promise().done( fn );</div><div class="line">	<span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">completed</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">document</span>.removeEventListener( <span class="string">"DOMContentLoaded"</span>, completed, <span class="literal">false</span> );</div><div class="line">	<span class="built_in">window</span>.removeEventListener( <span class="string">"load"</span>, completed, <span class="literal">false</span> );</div><div class="line">	jQuery.ready();</div><div class="line">&#125;</div><div class="line">jQuery.ready.promise = <span class="function"><span class="keyword">function</span>(<span class="params"> obj </span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span> ( !readyList ) &#123;</div><div class="line">		readyList = jQuery.Deferred();</div><div class="line">		<span class="keyword">if</span> ( <span class="built_in">document</span>.readyState === <span class="string">"complete"</span> ) &#123;</div><div class="line">			setTimeout( jQuery.ready );</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="built_in">document</span>.addEventListener( <span class="string">"DOMContentLoaded"</span>, completed, <span class="literal">false</span> );</div><div class="line">			<span class="built_in">window</span>.addEventListener( <span class="string">"load"</span>, completed, <span class="literal">false</span> );</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> readyList.promise( obj );</div><div class="line">&#125;;</div><div class="line">jQuery.ready.promise();</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;接触前端已经有一年多，觉得应该能尝试着看一些伟大框架的源码。首先是大名鼎鼎的jQuery，感谢慕课网的教程。&lt;br&gt;
    
    </summary>
    
      <category term="jQuery" scheme="http://heji.website/categories/jQuery/"/>
    
    
      <category term="JavaScript" scheme="http://heji.website/tags/JavaScript/"/>
    
      <category term="web前端" scheme="http://heji.website/tags/web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="jQuery" scheme="http://heji.website/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>Array.prototype.slice.call(arguments)的理解</title>
    <link href="http://heji.website/2017/03/31/Array.prototype.slice.call(arguments)%E7%9A%84%E7%90%86%E8%A7%A3/"/>
    <id>http://heji.website/2017/03/31/Array.prototype.slice.call(arguments)的理解/</id>
    <published>2017-03-31T04:14:55.718Z</published>
    <updated>2017-03-31T04:18:29.439Z</updated>
    
    <content type="html"><![CDATA[<p>JavaScript中call和apply方法在一些框架的源码中经常遇到，这里简单介绍一下这两个方法。以Array.prototype.slice.call(arguments)为例</p>
<a id="more"></a>
<p>Array.prototype.slice.call(arguments)能将具有length属性的对象转成数组，除了IE下的节点集合（因为ie下的dom对象是以com对象的形式实现的，js对象与com对象不能进行转换）<br>例如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a=&#123;length:<span class="number">2</span>,<span class="number">0</span>:<span class="string">'first'</span>,<span class="number">1</span>:<span class="string">'second'</span>&#125;;</div><div class="line"><span class="built_in">Array</span>.prototype.slice.call(a);<span class="comment">//  ["first", "second"]</span></div><div class="line"><span class="keyword">var</span> a=&#123;length:<span class="number">2</span>&#125;;</div><div class="line"><span class="built_in">Array</span>.prototype.slice.call(a);<span class="comment">//  [undefined, undefined]</span></div></pre></td></tr></table></figure></p>
<p>在说明Array.prototype.slice.call(arguments)之前，先举一个call用法的例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);    <span class="comment">//this表示'littledu'</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="keyword">this</span>);      <span class="comment">//  Object</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span> <span class="keyword">instanceof</span> <span class="built_in">String</span>);    <span class="comment">// true</span></div><div class="line">&#125;</div><div class="line">a.call(<span class="string">'littledu'</span>);</div></pre></td></tr></table></figure></p>
<p>调用call方法会把构造函数内部的this指向参数代表的对象<br>现在我们分析下Array.prototype.slice.call(arguments)。slice是Array原型对象的一个属性（以函数的形式存在）。当调用slice.call方法时，slice函数内部的this引用就指向arguments[0]<br>此时，我们再看看splice方法的实现：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.slice = <span class="function"><span class="keyword">function</span>(<span class="params">start,end</span>)</span>&#123;</div><div class="line">     <span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">Array</span>();</div><div class="line">     start = start || <span class="number">0</span>;</div><div class="line">     end = end || <span class="keyword">this</span>.length; <span class="comment">//this指向调用的对象，当用了call后，能够改变this的指向，也就是指向传进来的对象，这是关键</span></div><div class="line">     <span class="keyword">for</span>(<span class="keyword">var</span> i = start; i &lt; end; i++)&#123;</div><div class="line">          result.push(<span class="keyword">this</span>[i]);</div><div class="line">     &#125;</div><div class="line">     <span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>也就是说Array.prototype.slice.call(arguments)的参数对象必须要有length属性，并且其他属性的key必须是从0开始的索引才能把对象转成数组。<br>最后，附个转成数组的通用函数：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> toArray = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>)</span>&#123;</div><div class="line">     <span class="keyword">try</span>&#123;</div><div class="line">         <span class="keyword">return</span> <span class="built_in">Array</span>.prototype.slice.call(s);</div><div class="line">     &#125; <span class="keyword">catch</span>(e)&#123;</div><div class="line">           <span class="comment">//当没有length属性时</span></div><div class="line">             <span class="keyword">var</span> arr = [];</div><div class="line">             <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>,len = s.length; i &lt; len; i++)&#123;</div><div class="line">                 <span class="comment">//arr.push(s[i]);</span></div><div class="line">                  arr[i] = s[i];  <span class="comment">//据说这样比push快</span></div><div class="line">             &#125;</div><div class="line">              <span class="keyword">return</span> arr;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>另外，call方法和apply方法很类似，区分它们看下面这句代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">foo.call(<span class="keyword">this</span>, arg1,arg2,arg3) == foo.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)==<span class="keyword">this</span>.foo(arg1, arg2, arg3)</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;JavaScript中call和apply方法在一些框架的源码中经常遇到，这里简单介绍一下这两个方法。以Array.prototype.slice.call(arguments)为例&lt;/p&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://heji.website/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://heji.website/tags/JavaScript/"/>
    
      <category term="web前端" scheme="http://heji.website/tags/web%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
</feed>
