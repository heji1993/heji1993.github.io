

<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    
    <meta name="author" content="何机">
    
    <meta name="description" content="canvas是HTML5定义的一种可供绘图的元素，我们用JavaScript对它进行配置和操作。它很灵活，相对容易使用，并且提供了足够多的功能来代替flash制作某些类型的富内容。">
    
    <meta name="keywords" content="JavaScript,canvas,HTML5, 何机的技术博客,何机,博客,blog,IT,技术">
    

    
    <link rel="alternative" href="atom.xml" title="何机的技术博客" type="application/atom+xml">
    
    
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HTML5-Canvas入门 | 何机的技术博客 · No pains,no gains</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">

    <!-- Javascript -->
    <script src="/js/jquery-2.1.0.min.js"></script>
    <script src="/js/jquery.backstretch.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/headroom.min.js"></script>
    <script src="/js/jquery.headroom.min.js"></script>
    <script src="/js/common.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    
    <meta name="baidu-site-verification" content="SzJ3MGdmeo" />


    <meta name="360-site-verification" content="afe5dc96bbb8d111b618f78493b95bb8" />


    <!--<meta name="baidu-site-verification" content="SzJ3MGdmeo" />-->
    <!--<meta name="360-site-verification" content="afe5dc96bbb8d111b618f78493b95bb8" />-->

</head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-inverse" role="banner">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://heji.website" title="何机的技术博客">何机的技术博客</a>
            </div>

            <div role="navigation" class="collapse navbar-collapse bs-navbar-collapse">
                
                <ul class="nav navbar-nav pull-right">
                    <li>
                        <!--<a class="max-width max-w300" title="No pains,no gains" href="/feelings">No pains,no gains</a>-->
						<a class="max-width max-w300" title="No pains,no gains">No pains,no gains</a>
                    </li>
                </ul>
                

                <ul class="nav navbar-nav">
                    
                    <li id="nav-index">
                        <a href="/" target="">首页</a>
                    </li>
                    
                    <li id="nav-archives">
                        <a href="/archives" target="">归档</a>
                    </li>
                    
                    <li id="nav-categories">
                        <a href="/categories" target="">分类</a>
                    </li>
                    
                    <li id="nav-tags">
                        <a href="/tags" target="">标签</a>
                    </li>
                    
                    <li id="nav-about">
                        <a href="/about" target="">关于</a>
                    </li>
                    

                    <li id="nav-github"><a href="https://github.com/heji1993" target="_blank">GitHub</a></li>
                    <!--<li id="nav-rss"><a href="/atom.xml" target="_blank">Rss</a></li>-->
                    <li id="nav-search"><input type="text" id="search" placeholder="search" /></li>
                </ul>
            </div>
        </div>
    </nav>

    <script>
    var bgRoot = "http://7xkwt1.com1.z0.glb.clouddn.com/background-";
    var bgLength = "74";
    var bgRandom = false;
    var bgImage = "/images/bg.jpg";

    $(function() {
        // page-id...
        var pageId = "2017/01/03/HTML5-canvas/";
        pageId = pageId.substr(0, pageId.indexOf("/"));
        if(pageId === "") pageId = "index";

        $("#nav-" + pageId).addClass("active");
    });
    </script>

    <article class="post container">
    <div class="well post-body first-post last-post">
        <h1>HTML5-Canvas入门</h1>

        <div class="time-info">
            
<span class="article-tags">
    
    Tags: <a href="/tags/JavaScript/">JavaScript</a>&nbsp;<a href="/tags/web前端/">web前端</a>&nbsp;<a href="/tags/canvas/">canvas</a>&nbsp;
</span>



<span class="article-categories">
    Category:
    <a class="article-category-link" href="/categories/HTML5/">HTML5</a>
</span>


        </div>
        <div class="time-info">
            发表: <time datetime="2017-01-03T10:28:13.406Z"
                       itemprop="datePublished">2017-01-03</time>
            
            更新: <time datetime="2017-01-03T10:30:14.658Z"
                       itemprop="dateModified">2017-01-03</time>
            
        </div>

        <div class="post-body-inner">
            
                <div id="toc" class="toc-article well">
                    <strong class="toc-title">大纲</strong>
                    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#开始使用（绘制矩形）"><span class="toc-number">1.</span> <span class="toc-text">开始使用（绘制矩形）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置画布绘制状态"><span class="toc-number">2.</span> <span class="toc-text">设置画布绘制状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#保存和恢复绘制状态"><span class="toc-number">3.</span> <span class="toc-text">保存和恢复绘制状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#绘制图像"><span class="toc-number">4.</span> <span class="toc-text">绘制图像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用路径绘图（重要）"><span class="toc-number">5.</span> <span class="toc-text">用路径绘图（重要）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#绘制圆弧"><span class="toc-number">6.</span> <span class="toc-text">绘制圆弧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#绘制贝塞尔曲线"><span class="toc-number">7.</span> <span class="toc-text">绘制贝塞尔曲线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建剪辑区域"><span class="toc-number">8.</span> <span class="toc-text">创建剪辑区域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#绘制文本"><span class="toc-number">9.</span> <span class="toc-text">绘制文本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用特效和变换"><span class="toc-number">10.</span> <span class="toc-text">使用特效和变换</span></a></li></ol>
                </div>
            

            <p>canvas是HTML5定义的一种可供绘图的元素，我们用JavaScript对它进行配置和操作。它很灵活，相对容易使用，并且提供了足够多的功能来代替flash制作某些类型的富内容。</p>
<a id="more"></a>
<h3 id="开始使用（绘制矩形）"><a href="#开始使用（绘制矩形）" class="headerlink" title="开始使用（绘制矩形）"></a>开始使用（绘制矩形）</h3><p>canvas元素只有height和width两个属性，元素里的内容会在浏览器不支持此元素时作为备用内容显示。当我们使用JavaScript获取该元素时，返回一个HTMLCanvasElement对象，下面是这个对象的成员：</p>
<table>
<thead>
<tr>
<th>成员</th>
<th>说明</th>
<th>返回</th>
</tr>
</thead>
<tbody>
<tr>
<td>height</td>
<td>对应于height属性</td>
<td>数值</td>
</tr>
<tr>
<td>width</td>
<td>对应于width属性</td>
<td>数值</td>
</tr>
<tr>
<td>getContext(context)</td>
<td>为画布返回绘图上下文</td>
<td>对象</td>
</tr>
</tbody>
</table>
<p>其中关键的方法是getContext。为了获得二维上下文对象，我们需要给这个方法传递参数2d。一旦得到这个上下文，就可以开始绘图了。下面是例子：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>canvas<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">            <span class="selector-tag">canvas</span>&#123;</div><div class="line">                <span class="attribute">border</span>:medium double black;</div><div class="line">                <span class="attribute">margin</span>:<span class="number">4px</span>;</div><div class="line">                <span class="attribute">background</span>:<span class="number">#fff</span>;</div><div class="line">             &#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">            <span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>).getContext(<span class="string">"2d"</span>);</div><div class="line">            <span class="keyword">var</span> count = <span class="number">5</span>;</div><div class="line">            <span class="keyword">var</span> offset = <span class="number">10</span>;</div><div class="line">            <span class="keyword">var</span> size = <span class="number">50</span>;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; count ; i++)&#123;</div><div class="line">                ctx.fillRect((offset+size) * i + offset, offset,size,size);</div><div class="line">                ctx.strokeRect((offset+size) * i + offset,<span class="number">2</span> * offset+size,size,size);</div><div class="line">&#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>效果查看<a href="http://runjs.cn/detail/emf7ixzw" title="绘制矩形" target="_blank" rel="external">绘制矩形</a><br>绘制矩形的相关方法：</p>
<table>
<thead>
<tr>
<th>成员</th>
<th>说明</th>
<th>返回</th>
</tr>
</thead>
<tbody>
<tr>
<td>clearRect(x,y,w,h)</td>
<td>清除指定的矩形</td>
<td>void</td>
</tr>
<tr>
<td>fillRect(x,y,w,h)</td>
<td>绘制一个实心矩形</td>
<td>void</td>
</tr>
<tr>
<td>strokeRect(x,y,w,h)</td>
<td>绘制一个空心矩形</td>
<td>void</td>
</tr>
</tbody>
</table>
<h3 id="设置画布绘制状态"><a href="#设置画布绘制状态" class="headerlink" title="设置画布绘制状态"></a>设置画布绘制状态</h3><p>绘图操作由绘制状态加以配置。后者是一组属性，指定了从线条宽度到填充色的所有参数。当我们绘制一个图形时，就会用到绘制状态的当前设置。下面是一个示例：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">height</span>=<span class="string">"400"</span>&gt;</span></div><div class="line">            Your browser doesn't support the <span class="tag">&lt;<span class="name">code</span>&gt;</span>canvas<span class="tag">&lt;/<span class="name">code</span>&gt;</span> element.</div><div class="line">        <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">            <span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>).getContext(<span class="string">"2d"</span>);</div><div class="line">            ctx.lineWidth = <span class="number">2</span>;</div><div class="line">            ctx.strokeRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">50</span>);</div><div class="line">            ctx.lineWidth = <span class="number">4</span>;</div><div class="line">            ctx.strokeRect(<span class="number">70</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">50</span>);</div><div class="line">            ctx.lineWidth = <span class="number">6</span>;</div><div class="line">            ctx.strokeRect(<span class="number">130</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">50</span>);</div><div class="line">            ctx.lineWidth = <span class="number">6</span>;</div><div class="line">            ctx.strokeRect(<span class="number">190</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">50</span>);</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>当我使用strokeRect方法时，lineWidth属性的当前值就会用于绘制矩形。下表展示了基本的绘制状态属性，还有一些属性在更高级的功能会用到：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
<th>取值</th>
</tr>
</thead>
<tbody>
<tr>
<td>fillStyle</td>
<td>获取或设置用于实心图形的样式</td>
<td>颜色值（默认black)、渐变对象、pattern对象</td>
</tr>
<tr>
<td>lineJoin</td>
<td>获取或设置线条与图形连接时的样式</td>
<td>round（圆角）、bevel（棱角）、miter（尖角，默认值）</td>
</tr>
<tr>
<td>lineWidth</td>
<td>获取或设置线条的宽度</td>
<td>数值（默认1.0）</td>
</tr>
<tr>
<td>strokeStyle</td>
<td>获取或设置用于线条的样式</td>
<td>颜色值（默认black)、渐变对象、pattern对象</td>
</tr>
</tbody>
</table>
<ul>
<li>设置线条连接样式<br>  lineJoin属性决定了相互连接的线条应该如何绘制，它有三个值：round（圆角）、bevel（棱角）、miter（尖角）。</li>
<li>设置填充和笔触（线条）样式<br>  改变fillStyle属性即改变填充的颜色，改变strokeStyle即改变笔触颜色。请自行尝试</li>
<li><p>使用渐变<br>  除了纯色，我们还可以把填充和笔触样式设置成渐变色。渐变是两种或更多颜色之间的渐进转变。canvas元素支持两类渐变：线性和径向。<br>  <img src="index_files/747b771f-1a98-4e49-a026-33f28a4db686.jpg" alt=""><br>  两个方法都返回一个CanvasGradient对象。<br>  <img src="index_files/14b03ee5-e1e0-4f3c-acd7-67ec76eec353.jpg" alt=""><br>  下面是线性渐变的例子：</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">    <span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>gradient<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"140"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>  效果请查看：<a href="http://runjs.cn/detail/dewufwgo" title="线性渐变效果" target="_blank" rel="external">线性渐变效果</a><br>  也可以设置渐变在一个小矩形范围内。<br>  <img src="index_files/ab7cd8d7-5182-40ec-a03c-722bd97f2435.jpg" alt=""><br>  效果为<br>  <img src="index_files/d576630a-a6da-48f8-b41f-d5130d3e40e2.jpg" alt=""><br>  下面是径向渐变的例子：</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">    <span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>RunJS<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">height</span>=<span class="string">"200"</span> <span class="attr">width</span>=<span class="string">"500"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">          <span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>).getContext(<span class="string">"2d"</span>);</div><div class="line">          <span class="comment">//第一第二个参数是起点圆的圆心坐标，第三个参数是起点圆的半径。第四第五个参数是终点圆的圆心坐标，第六个参数是终点圆的半径</span></div><div class="line">          <span class="keyword">var</span> grad = ctx.createRadialGradient(<span class="number">250</span>,<span class="number">70</span>,<span class="number">20</span>,<span class="number">200</span>,<span class="number">60</span>,<span class="number">80</span>);</div><div class="line">grad.addColorStop(<span class="number">0</span>,<span class="string">"#f00"</span>);</div><div class="line">grad.addColorStop(<span class="number">0.5</span>,<span class="string">"#fff"</span>);</div><div class="line">grad.addColorStop(<span class="number">1</span>,<span class="string">"#000"</span>);</div><div class="line">ctx.fillStyle = grad;</div><div class="line">ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">500</span>,<span class="number">160</span>);</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>  效果请查看<a href="http://runjs.cn/detail/nihv4gh9" target="_blank" rel="external">径向渐变效果</a><br>  一般而言，径向渐变的终点圆要包含起点圆，当我们给这个渐变添加颜色点时，它们会被放置在起点圆边界（该点的值为0）和终点圆边界（该点的值为1）之间的一条线段上。若终点圆没有包含起点圆，结果会很混乱。</p>
</li>
<li>使用图案<br>  除了纯色和渐变之外，我们还可以创建图案（pattern）。具体做法是使用画布上下文对象所定义的createPattern方法。2D绘图上下文定义了对三种图案类型的支持：图形、视频和画布。<br>  要将图像作为图案，需要把一个HTMLImageElement对象作为第一个参数传递给createPattern方法，第二个参数是重复样式。下面是综合例子：  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">    <span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">hidden</span>=<span class="string">""</span> <span class="attr">src</span>=<span class="string">"http://www.w3school.com.cn/i/lamp.gif"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">            <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="comment">//注意,一定要在DOM加载完之后,否则创建pattern会失败</span></div><div class="line">                <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</div><div class="line">                <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">                ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvas.width,canvas.height);</div><div class="line">                <span class="keyword">var</span> imgElem = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"img"</span>)[<span class="number">0</span>];</div><div class="line">                <span class="keyword">var</span> pattern = ctx.createPattern(imgElem,<span class="string">"repeat"</span>);</div><div class="line">                ctx.fillStyle = pattern;</div><div class="line">                ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">500</span>,<span class="number">300</span>);</div><div class="line">            &#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="保存和恢复绘制状态"><a href="#保存和恢复绘制状态" class="headerlink" title="保存和恢复绘制状态"></a>保存和恢复绘制状态</h3><p>可以用下表介绍的方法保存绘制状态，稍后再返回。</p>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>save()</td>
<td>保存绘制状态属性的值，并把它们推入状态栈</td>
</tr>
<tr>
<td>restore()</td>
<td>取出状态栈的第一组值，用它们来设置绘制状态</td>
</tr>
</tbody>
</table>
<p>绘制状态保存时会被存放在一个后进先出的栈中，意思是我们用save方法最后保存的状态会被restore方法首先进行恢复。</p>
<h3 id="绘制图像"><a href="#绘制图像" class="headerlink" title="绘制图像"></a>绘制图像</h3><p>可以用drawImage方法在画布上绘制图像。这个方法需要三个、五个或者九个参数。第一个参数始终是图像的来源，它可以是代表img、video、或者其他canvas元素的DOM对象。</p>
<ul>
<li><p>使用图片图像：</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">    <span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">            <span class="selector-tag">canvas</span>&#123;</div><div class="line">                <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</div><div class="line">            &#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">hidden</span>=<span class="string">""</span> <span class="attr">src</span>=<span class="string">"http://www.w3school.com.cn/i/lamp.gif"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">            <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>).getContext(<span class="string">"2d"</span>);</div><div class="line">                <span class="keyword">var</span> imageElem = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"img"</span>)[<span class="number">0</span>];</div><div class="line">                <span class="comment">//当只有三个参数时,第二三个参数指定图像开始绘制的坐标,绘制的图像大小为原始大小</span></div><div class="line">                ctx.drawImage(imageElem,<span class="number">10</span>,<span class="number">10</span>);</div><div class="line">                <span class="comment">//当只有五个参数时,第二三个参数指定图像开始绘制的坐标,第四五个参数指定绘制图像的大小</span></div><div class="line">                ctx.drawImage(imageElem,<span class="number">50</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">50</span>);</div><div class="line">                <span class="comment">//当有九个参数时,请自行谷歌</span></div><div class="line">            &#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>使用视频图像<br>  当图像的来源是video时，这样做其实是对视频的当前帧进行截图。</p>
</li>
<li>使用画布图像  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">    <span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">            <span class="selector-tag">body</span> &gt; *&#123;</div><div class="line">                <span class="attribute">float</span>: left;</div><div class="line">            &#125;</div><div class="line">            <span class="selector-tag">canvas</span>&#123;</div><div class="line">                <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e5e5e5</span>;</div><div class="line">            &#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"vid"</span> <span class="attr">width</span>=<span class="string">"800"</span> <span class="attr">height</span>=<span class="string">"400"</span> <span class="attr">hidden</span>=<span class="string">""</span> <span class="attr">src</span>=<span class="string">"../img/Clip_1080_5sec_10mbps_h264.mp4"</span>&gt;</span></div><div class="line">            当前浏览器不支持 video直接播放</div><div class="line">        <span class="tag">&lt;/<span class="name">video</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas1"</span> <span class="attr">width</span>=<span class="string">"360"</span> <span class="attr">height</span>=<span class="string">"240"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"pressme"</span>&gt;</span>点击我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas2"</span> <span class="attr">width</span>=<span class="string">"360"</span> <span class="attr">height</span>=<span class="string">"240"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">            <span class="keyword">var</span> srcCanvasElem = <span class="built_in">document</span>.getElementById(<span class="string">"canvas1"</span>);</div><div class="line">            <span class="keyword">var</span> srcCtx = srcCanvasElem.getContext(<span class="string">"2d"</span>);</div><div class="line">            <span class="keyword">var</span> targetCanvasElem = <span class="built_in">document</span>.getElementById(<span class="string">"canvas2"</span>).getContext(<span class="string">"2d"</span>);</div><div class="line">            <span class="keyword">var</span> videoElem = <span class="built_in">document</span>.getElementById(<span class="string">"vid"</span>);</div><div class="line">            targetCanvasElem.strokeStyle = <span class="string">"black"</span>;</div><div class="line">            targetCanvasElem.lineWidth = <span class="number">10</span>;</div><div class="line">            <span class="keyword">var</span> width = <span class="number">100</span>;</div><div class="line">            <span class="keyword">var</span> height = <span class="number">10</span>;</div><div class="line">            srcCtx.lineWidth = <span class="number">5</span>;</div><div class="line">            srcCtx.strokeStyle = <span class="string">"red"</span>;</div><div class="line">            setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                srcCtx.drawImage(videoElem,<span class="number">0</span>,<span class="number">0</span>,<span class="number">360</span>,<span class="number">240</span>);</div><div class="line">                srcCtx.strokeRect(<span class="number">180</span>-(width/<span class="number">2</span>),<span class="number">120</span> - (height/<span class="number">2</span>),width,height);</div><div class="line">            &#125;,<span class="number">25</span>);</div><div class="line">            setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                width = (width + <span class="number">1</span>) % <span class="number">200</span>;</div><div class="line">                height = (height + <span class="number">3</span>) % <span class="number">200</span>;</div><div class="line">            &#125;,<span class="number">100</span>)</div><div class="line">            <span class="built_in">document</span>.getElementById(<span class="string">"pressme"</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                targetCanvasElem.drawImage(srcCanvasElem,<span class="number">0</span>,<span class="number">0</span>,<span class="number">360</span>,<span class="number">240</span>);</div><div class="line">                targetCanvasElem.strokeRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">360</span>,<span class="number">240</span>);</div><div class="line">            &#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="用路径绘图（重要）"><a href="#用路径绘图（重要）" class="headerlink" title="用路径绘图（重要）"></a>用路径绘图（重要）</h3><p>之前的示例都依靠绘制矩形实现，矩形是一种有用的图形，但有时我们需要用到的是其他图形。对此，canvas提供了路径绘图。下面是绘制基本路径的可用方法：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
<th>返回</th>
</tr>
</thead>
<tbody>
<tr>
<td>beginPath()</td>
<td>开始一条新路径</td>
<td>void</td>
</tr>
<tr>
<td>closePath()</td>
<td>尝试闭合现有路径（做法是绘制一条线，连接最后那条线的终点与初始坐标）</td>
<td>void</td>
</tr>
<tr>
<td>fill()</td>
<td>填充用子路径描述的图形</td>
<td>void</td>
</tr>
<tr>
<td>isPointInPath(x,y)</td>
<td>如果指定的点在当前路径所描述的图形之内则返回true</td>
<td>布尔值</td>
</tr>
<tr>
<td>lineTo(x,y)</td>
<td>绘制一条到指定坐标的子路径</td>
<td>void</td>
</tr>
<tr>
<td>moveTo(x,y)</td>
<td>移动到指定坐标而不绘制子路径</td>
<td>void</td>
</tr>
<tr>
<td>rect(x,y,w,h)</td>
<td>绘制一个矩形</td>
<td>void</td>
</tr>
<tr>
<td>stroke()</td>
<td>给子路径描述的图形绘制轮廓</td>
<td>void</td>
</tr>
</tbody>
</table>
<p>绘制一条路径的基本顺序如下：</p>
<ol>
<li>调用beginPath方法；</li>
<li>调用moveTo方法移动到起点；</li>
<li>用arc和lineTo等方法绘制子路径；</li>
<li>调用closePath方法（可选）；</li>
<li>调用fill或stroke方法。</li>
</ol>
<p>下面是综合示例：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"400"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">            <span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>).getContext(<span class="string">"2d"</span>);</div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.lineWidth = <span class="number">1</span>;</div><div class="line">            ctx.moveTo(<span class="number">10</span>,<span class="number">10</span>);</div><div class="line">            ctx.lineTo(<span class="number">60</span>,<span class="number">10</span>);</div><div class="line">            ctx.lineTo(<span class="number">60</span>,<span class="number">60</span>);</div><div class="line">            ctx.closePath();</div><div class="line">            ctx.fillStyle = <span class="string">"red"</span>;</div><div class="line">            ctx.fill();</div><div class="line">            </div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.lineWidth = <span class="number">2</span>;</div><div class="line">            ctx.moveTo(<span class="number">70</span>,<span class="number">10</span>);</div><div class="line">            ctx.lineTo(<span class="number">170</span>,<span class="number">10</span>);</div><div class="line">            ctx.lineTo(<span class="number">170</span>,<span class="number">100</span>);</div><div class="line">            ctx.lineTo(<span class="number">150</span>,<span class="number">100</span>);</div><div class="line">            ctx.fillStyle = <span class="string">"red"</span>;</div><div class="line">            ctx.fill();</div><div class="line">            ctx.strokeStyle= <span class="string">"black"</span>;</div><div class="line">            <span class="comment">//若不关闭路径,那么绘制的轮廓不闭合</span></div><div class="line">            ctx.stroke();</div><div class="line">            </div><div class="line">            ctx.lineWidth = <span class="number">30</span>;</div><div class="line">            ctx.beginPath();</div><div class="line">            <span class="comment">//设置线条末端样式,默认是butt</span></div><div class="line">            ctx.lineCap = <span class="string">"butt"</span></div><div class="line">            ctx.moveTo(<span class="number">200</span>,<span class="number">10</span>);</div><div class="line">            ctx.lineTo(<span class="number">200</span>,<span class="number">100</span>);</div><div class="line">            ctx.stroke();</div><div class="line">            </div><div class="line">            ctx.beginPath();</div><div class="line">            <span class="comment">//设置线条末端样式,默认是butt</span></div><div class="line">            ctx.lineCap = <span class="string">"round"</span></div><div class="line">            ctx.moveTo(<span class="number">240</span>,<span class="number">20</span>);</div><div class="line">            ctx.lineTo(<span class="number">240</span>,<span class="number">100</span>);</div><div class="line">            ctx.stroke();</div><div class="line">            </div><div class="line">            ctx.beginPath();</div><div class="line">            <span class="comment">//设置线条末端样式,默认是butt</span></div><div class="line">            ctx.lineCap = <span class="string">"square"</span></div><div class="line">            ctx.moveTo(<span class="number">280</span>,<span class="number">20</span>);</div><div class="line">            ctx.lineTo(<span class="number">280</span>,<span class="number">100</span>);</div><div class="line">            ctx.stroke();</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<ul>
<li>绘制矩形<br>  rect方法会给当前路径添加一条矩形的子路径。如果需要一个单独的矩形，之前介绍的fillRect和strokeRect方法是更合适的选择。  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">    <span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"400"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">            <span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>).getContext(<span class="string">"2d"</span>);</div><div class="line">            ctx.fillStyle = <span class="string">"red"</span>;</div><div class="line">            ctx.strokeStyle = <span class="string">"black"</span>;</div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.moveTo(<span class="number">10</span>,<span class="number">10</span>);</div><div class="line">            ctx.lineTo(<span class="number">100</span>,<span class="number">10</span>);</div><div class="line">            ctx.lineTo(<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">            ctx.closePath();</div><div class="line">            <span class="comment">//绘制矩形</span></div><div class="line">            ctx.rect(<span class="number">100</span>,<span class="number">10</span>,<span class="number">100</span>,<span class="number">90</span>);</div><div class="line">            ctx.rect(<span class="number">100</span>,<span class="number">100</span>,<span class="number">130</span>,<span class="number">30</span>);</div><div class="line">            <span class="comment">//填充颜色</span></div><div class="line">            ctx.fill();</div><div class="line">            <span class="comment">//绘制轮廓</span></div><div class="line">            ctx.stroke();</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="绘制圆弧"><a href="#绘制圆弧" class="headerlink" title="绘制圆弧"></a>绘制圆弧</h3><p>我们使用arc和arcTo方法在画布上绘制圆弧，不过这两种方法绘制圆弧的方式会有所不同。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
<th>返回</th>
</tr>
</thead>
<tbody>
<tr>
<td>arc(x,y,rad,startAngle,endAngle,diretion)</td>
<td>(x,y)指定圆弧的圆心坐标，半径为rad，始角度为startAngle，结束角度为endAngle，可选参数direction指定了圆弧方向</td>
<td>void</td>
</tr>
<tr>
<td>arcTo(x1,y1,x2,y2,rad)</td>
<td>绘制一段半径为rad，经过(x1,y1)，直到(x2,y2)的圆弧</td>
<td>void</td>
</tr>
</tbody>
</table>
<ul>
<li><p>使用arcTo方法：<br>  绘制圆弧的一个复杂例子（移动鼠标看到变换）：</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">    <span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"140"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">            <span class="keyword">var</span> canvasElem = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</div><div class="line">            <span class="keyword">var</span> ctx = canvasElem.getContext(<span class="string">"2d"</span>);</div><div class="line">            </div><div class="line">            <span class="keyword">var</span> point1 = [<span class="number">100</span>,<span class="number">10</span>];</div><div class="line">            <span class="keyword">var</span> point2 = [<span class="number">200</span>,<span class="number">10</span>];</div><div class="line">            <span class="keyword">var</span> point3 = [<span class="number">200</span>,<span class="number">110</span>];</div><div class="line">            </div><div class="line">            draw();</div><div class="line">            canvasElem.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">                <span class="keyword">if</span>(e.ctrlKey)&#123;</div><div class="line">                    point1 = [e.clientX,e.clientY];</div><div class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(e.shiftKey)&#123;</div><div class="line">                    point2 = [e.clientX,e.clientY];</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    point3 = [e.clientX,e.clientY];</div><div class="line">                &#125;</div><div class="line">                ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">500</span>,<span class="number">140</span>);</div><div class="line">                draw();</div><div class="line">            &#125;</div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                ctx.fillStyle = <span class="string">"yellow"</span>;</div><div class="line">                ctx.strokeStyle = <span class="string">"black"</span>;</div><div class="line">                ctx.lineWidth = <span class="number">4</span>;</div><div class="line">                <span class="comment">//绘制圆弧</span></div><div class="line">                ctx.beginPath();</div><div class="line">                ctx.moveTo(point1[<span class="number">0</span>],point1[<span class="number">1</span>]);</div><div class="line">                ctx.arcTo(point2[<span class="number">0</span>],point2[<span class="number">1</span>],point3[<span class="number">0</span>],point3[<span class="number">1</span>],<span class="number">50</span>);</div><div class="line">                ctx.stroke();</div><div class="line">                <span class="comment">//绘制三个点</span></div><div class="line">                drawPoint(point1[<span class="number">0</span>],point1[<span class="number">1</span>]);</div><div class="line">                drawPoint(point2[<span class="number">0</span>],point2[<span class="number">1</span>]);</div><div class="line">                drawPoint(point3[<span class="number">0</span>],point3[<span class="number">1</span>]);</div><div class="line">                <span class="comment">//绘制连接三个点的线</span></div><div class="line">                ctx.beginPath();</div><div class="line">                ctx.moveTo(point1[<span class="number">0</span>],point1[<span class="number">1</span>]);</div><div class="line">                ctx.lineTo(point2[<span class="number">0</span>],point2[<span class="number">1</span>]);</div><div class="line">                ctx.lineTo(point3[<span class="number">0</span>],point3[<span class="number">1</span>]);</div><div class="line">                ctx.stroke();</div><div class="line">            &#125;</div><div class="line">            <span class="comment">//绘制三个点</span></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">drawPoint</span>(<span class="params">x,y</span>)</span>&#123;</div><div class="line">                ctx.lineWidth = <span class="number">1</span>;</div><div class="line">                ctx.strokeStyle = <span class="string">"red"</span>;</div><div class="line">                ctx.strokeRect(x - <span class="number">2</span>, y - <span class="number">2</span>,<span class="number">4</span>,<span class="number">4</span>);</div><div class="line">            &#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>  效果请查看<a href="http://runjs.cn/detail/nzicmpmy" target="_blank" rel="external">canvas绘制圆弧</a></p>
</li>
<li><p>使用arc方法<br>  arc方法使用起来略微简单一些。我们用前两个方法参数指定圆的圆心，第三个参数指定圆的半径，第四第五个参数指定起始和结束角度，最后一个参数指定是顺时针还是逆时针。<br>  <img src="index_files/6f623169-16c1-4420-9dbf-e1d56096aa1e.png" alt=""><br>  上图的开始角度为0，结束角度为1.5PI，方向为顺时针。<code>arc(100,75,50,0,1.5*Math.PI,false);</code></p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">    <span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"200"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">            <span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>).getContext(<span class="string">"2d"</span>);</div><div class="line">            ctx.strokeStyle = <span class="string">"black"</span>;</div><div class="line">            ctx.fillStyle = <span class="string">"steelblue"</span>;</div><div class="line">            ctx.beginPath();</div><div class="line">            <span class="comment">//圆心x,圆心y,半径,开始角度,结束角度,逆时针</span></div><div class="line">            ctx.arc(<span class="number">100</span>,<span class="number">100</span>,<span class="number">60</span>,<span class="number">0</span>,<span class="built_in">Math</span>.PI * <span class="number">2</span>,<span class="literal">true</span>);</div><div class="line">            ctx.fill();</div><div class="line">            ctx.stroke();</div><div class="line">            <span class="comment">//必须重新开始路径,否则会连在一起</span></div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.arc(<span class="number">230</span>,<span class="number">100</span>,<span class="number">60</span>,<span class="built_in">Math</span>.PI * <span class="number">0.5</span>,<span class="built_in">Math</span>.PI ,<span class="literal">true</span>);</div><div class="line">            ctx.closePath();</div><div class="line">            ctx.fill();</div><div class="line">            ctx.stroke();</div><div class="line">            <span class="comment">//绘制不规则图形</span></div><div class="line">            ctx.beginPath();</div><div class="line">            <span class="keyword">var</span> val = <span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; <span class="number">4</span> ; i++)&#123;</div><div class="line">                ctx.arc(<span class="number">370</span>,<span class="number">100</span>,<span class="number">60</span>,val,val+<span class="built_in">Math</span>.PI/<span class="number">4</span>,<span class="literal">false</span>);</div><div class="line">                val+=<span class="built_in">Math</span>.PI/<span class="number">2</span>;</div><div class="line">            &#125;</div><div class="line">            ctx.closePath();</div><div class="line">            ctx.fill();</div><div class="line">            ctx.stroke();</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>  效果请查看：<a href="http://runjs.cn/detail/bjlt1baj" target="_blank" rel="external">arc方法绘制圆弧</a></p>
</li>
</ul>
<h3 id="绘制贝塞尔曲线"><a href="#绘制贝塞尔曲线" class="headerlink" title="绘制贝塞尔曲线"></a>绘制贝塞尔曲线</h3><p>canvas支持绘制两种贝塞尔曲线：三次和二次。我们通过选择一个起点和终点，然后添加一个或多个控制点来形成曲线。下面的表格展示了绘制贝塞尔曲线的方法：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
<th>返回</th>
</tr>
</thead>
<tbody>
<tr>
<td>bezierCurveTo(cx1,cy1,cx2,cy2,x,y)</td>
<td>绘制一段贝塞尔曲线到（x,y），控制点为（cx1,cy1）和（cx2,cy2）。</td>
<td>void</td>
</tr>
<tr>
<td>quadraticCurveTo(cx,cy,x,y)</td>
<td>绘制一段二次贝塞尔曲线到点（x,y），控制点为（cx,cy）</td>
<td>void</td>
</tr>
</tbody>
</table>
<p>下面是三次贝塞尔曲线的示例：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">            <span class="keyword">var</span> canvasElem = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</div><div class="line">            <span class="keyword">var</span> ctx = canvasElem.getContext(<span class="string">"2d"</span>);</div><div class="line">            <span class="comment">//初始点</span></div><div class="line">            <span class="keyword">var</span> startPoint = [<span class="number">50</span>,<span class="number">100</span>];</div><div class="line">            <span class="keyword">var</span> endPoint = [<span class="number">400</span>,<span class="number">100</span>];</div><div class="line">            <span class="keyword">var</span> cp1 = [<span class="number">250</span>,<span class="number">50</span>];</div><div class="line">            <span class="keyword">var</span> cp2 = [<span class="number">350</span>,<span class="number">50</span>];</div><div class="line">            </div><div class="line">            canvasElem.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">                <span class="keyword">if</span>(e.shiftKey)&#123;</div><div class="line">                    <span class="comment">//当按下shift键,移动控制点1</span></div><div class="line">                    cp1 = [e.clientX,e.clientY];</div><div class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(e.ctrlKey)&#123;</div><div class="line">                    <span class="comment">//当按下ctrl键,移动控制点2</span></div><div class="line">                    cp2 = [e.clientX,e.clientY];</div><div class="line">                &#125;</div><div class="line">                <span class="comment">//清除画布</span></div><div class="line">                ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">500</span>,<span class="number">300</span>);</div><div class="line">                <span class="comment">//画图</span></div><div class="line">                draw();</div><div class="line">            &#125;</div><div class="line">            draw();</div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                ctx.lineWidth = <span class="number">3</span>;</div><div class="line">                ctx.strokeStyle = <span class="string">"black"</span>;</div><div class="line">                ctx.beginPath();</div><div class="line">                ctx.moveTo(startPoint[<span class="number">0</span>],startPoint[<span class="number">1</span>]);</div><div class="line">                ctx.bezierCurveTo(cp1[<span class="number">0</span>],cp1[<span class="number">1</span>],cp2[<span class="number">0</span>],cp2[<span class="number">1</span>],endPoint[<span class="number">0</span>],endPoint[<span class="number">1</span>]);</div><div class="line">                ctx.stroke();</div><div class="line">                <span class="comment">//绘制点</span></div><div class="line">                ctx.lineWidth = <span class="number">1</span>;</div><div class="line">                ctx.strokeStyle = <span class="string">"red"</span>;</div><div class="line">                <span class="keyword">var</span> points = [startPoint,endPoint,cp1,cp2];</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; points.length ; i++)&#123;</div><div class="line">                    drawPoint(points[i]);</div><div class="line">                &#125;</div><div class="line">                <span class="comment">//绘制直线</span></div><div class="line">                drawLine(startPoint,cp1);</div><div class="line">                drawLine(endPoint,cp2);</div><div class="line">            &#125;</div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">drawPoint</span>(<span class="params">point</span>)</span>&#123;</div><div class="line">                ctx.beginPath();</div><div class="line">                ctx.strokeRect(point[<span class="number">0</span>]<span class="number">-2</span>,point[<span class="number">1</span>]<span class="number">-2</span>,<span class="number">4</span>,<span class="number">4</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">drawLine</span>(<span class="params">from,to</span>)</span>&#123;</div><div class="line">                ctx.beginPath();</div><div class="line">                ctx.moveTo(<span class="keyword">from</span>[<span class="number">0</span>],<span class="keyword">from</span>[<span class="number">1</span>]);</div><div class="line">                ctx.lineTo(to[<span class="number">0</span>],to[<span class="number">1</span>]);</div><div class="line">                ctx.stroke();</div><div class="line">            &#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>效果请查看：<a href="http://runjs.cn/detail/nzjursph" target="_blank" rel="external">三次贝塞尔曲线</a></p>
<h3 id="创建剪辑区域"><a href="#创建剪辑区域" class="headerlink" title="创建剪辑区域"></a>创建剪辑区域</h3><p>一旦定义了一块裁剪区域，就只有区域内的路径才会显示在屏幕上。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">            <span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>).getContext(<span class="string">"2d"</span>);</div><div class="line">            ctx.fillStyle = <span class="string">"yellow"</span>;</div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.rect(<span class="number">100</span>,<span class="number">20</span>,<span class="number">300</span>,<span class="number">100</span>);</div><div class="line">            ctx.fill();</div><div class="line">            <span class="comment">//裁剪区域</span></div><div class="line">            ctx.clip();</div><div class="line">            <span class="comment">//只在裁剪的区域绘制</span></div><div class="line">            ctx.fillStyle = <span class="string">"red"</span>;</div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.rect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">500</span>,<span class="number">300</span>);</div><div class="line">            ctx.fill();</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="绘制文本"><a href="#绘制文本" class="headerlink" title="绘制文本"></a>绘制文本</h3><p>可以在画布上绘制文本。不过这种功能的支持还很初步。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
<th>返回</th>
</tr>
</thead>
<tbody>
<tr>
<td>fillText(text,x,y,width)</td>
<td>在位置(x,y)上绘制并填充指定文本。宽度参数是可选的，他设置了文本的宽度上限</td>
<td>void</td>
</tr>
<tr>
<td>strokeText(text,x,y,width)</td>
<td>在位置(x,y)上绘制并描边指定文本。宽度是可选参数</td>
<td>void</td>
</tr>
</tbody>
</table>
<p>我们可以使用三种绘制装态属性来控制文本绘制的方式。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
<th>返回</th>
</tr>
</thead>
<tbody>
<tr>
<td>font</td>
<td>设置绘制文本时使用的字体</td>
<td>字符串</td>
</tr>
<tr>
<td>textAlign</td>
<td>设置文本的对齐方式</td>
<td>字符串</td>
</tr>
<tr>
<td>textBaseLine</td>
<td>设置文本的基线：top、bottom、middle等</td>
<td>字符串</td>
</tr>
</tbody>
</table>
<p>下面是例子：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">        <span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>).getContext(<span class="string">"2d"</span>);</div><div class="line">        ctx.fillStyle = <span class="string">"steelblue"</span>;</div><div class="line">        ctx.strokeStyle = <span class="string">"lightgrey"</span>;</div><div class="line">        <span class="comment">//必须先设置字体大小再设置字体</span></div><div class="line">        ctx.font = <span class="string">"100px sans-serif"</span>;</div><div class="line">        ctx.textBaseline = <span class="string">"top"</span>;</div><div class="line">        ctx.fillText(<span class="string">"hello"</span>,<span class="number">10</span>,<span class="number">10</span>);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="使用特效和变换"><a href="#使用特效和变换" class="headerlink" title="使用特效和变换"></a>使用特效和变换</h3><ul>
<li>使用阴影<br>  可以用四种绘制状态属性来给我们在画布上绘制的图形和文本添加阴影。<br>  <img src="index_files/2db2ce9b-257c-498c-8c84-cde930d11fc9.jpg" alt=""><br>  下面是例子：<br>  <img src="index_files/8121521f-3350-443f-aa34-3e00d9f90c00.jpg" alt=""></li>
<li>使用透明度<br>  可以用两种方式来给我们绘制的文本和图形设置透明度。第一种使用rgba函数指定一个fillStyle或strokeStyle值，另一种是使用绘制属性globalAlpha。globalAlpha属性的值可以从0（完全透明）到1（完全不透明，这是默认值）。<br>  <img src="index_files/95061caa-c49c-4399-88c2-27552765a893.jpg" alt=""><br>  下面是代码效果：<br>  <img src="index_files/ebe29e5f-da5b-4387-af8a-889b16a73d28.jpg" alt=""></li>
<li>使用合成<br>  可以将透明度与globalCompositeOperation属性结合使用，来控制图形和文本在画布上绘制的方式。</li>
<li>使用变换<br>  我们可以给画布应用变换，它会应用到后续所有的绘图操作上。<br>  <img src="index_files/adf8c417-7d62-47c7-81cf-c0b35abe43e3.jpg" alt=""><br>  <img src="index_files/70331c2f-2d6b-4994-8a24-a674ef0db510.jpg" alt=""><br>  在这个例子里，我填充并描边了一些文本，然后缩放、平移和旋转了画布，这些操作影响了我接下来绘制的空心矩形和实心矩形。<br>  <img src="index_files/80b1643c-4488-4f6e-9e09-26fb2637210d.jpg" alt=""></li>
</ul>


            <div class="post-info">
    <p class="link">本文链接：<a href="http://heji.website/2017/01/03/HTML5-canvas/">http://heji.website/2017/01/03/HTML5-canvas/</a></p>
    <div class="share">
    分享本页：
    
        <div class="bdsharebuttonbox"><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博">腾讯微博</a><a href="#" class="bds_more" data-cmd="more"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>

    
    
</div>

</div>


            
    <section class="comment">
    <div class="ds-thread" data-thread-key="undefined" data-title="HTML5-Canvas入门" data-url="http://heji.website/2017/01/03/HTML5-canvas/" data-author-key="何机"></div>
</section>


<script type="text/javascript">
var duoshuoQuery = {short_name:"heji"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';
        ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>





        </div>
    </div>
</article>

    <footer id="footer">
        <div id="bottom-tip">
            何机的技术博客 —— <small>No pains,no gains</small>
        </div>
        <small>该博客由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动，搭载 <a href="https://github.com/gejiawen/hexadillax2" target="_blank">Hexadillax2</a> 主题</small><br />
        <!--<small>如果你访问github速度过慢，可移步本站的备份站点<a href="http://gejiawen.gitcafe.io">gejiawen.gitcafe.io</a></small><br />-->
        <small>&copy; 2017 <a href="http://heji.website" target="_blank">何机</a></small>
    </footer>
    
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e4dd778a6204eb51e4f25460e37481ad";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>


    <script type="text/javascript" src="http://tajs.qq.com/stats?sId=58628762" charset="UTF-8"></script>


    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-51347904-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>

